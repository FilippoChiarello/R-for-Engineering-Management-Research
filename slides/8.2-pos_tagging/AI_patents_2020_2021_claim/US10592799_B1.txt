<document>

<filing_date>
2019-01-23
</filing_date>

<publication_date>
2020-03-17
</publication_date>

<priority_date>
2019-01-23
</priority_date>

<ipc_classes>
G06F17/16,G06N3/04,G06N3/08
</ipc_classes>

<assignee>
STRADVISION
</assignee>

<inventors>
BOO, SUKHOON
CHO, HOJIN
JANG, TAEWOONG
JE, HONGMO
JEONG, KYUNGJOONG
KIM, HAK-KYOUNG
KIM, INSU
KIM, KYE-HYEON
KIM, YONGJOONG
NAM, WOONHYUN
RYU, WOOJU
SUNG, MYUNGCHUL
YEO, DONGHUN
</inventors>

<docdb_family_id>
68886758
</docdb_family_id>

<title>
Determining FL value by using weighted quantization loss values to thereby quantize CNN parameters and feature values to be used for optimizing hardware applicable to mobile devices or compact networks with high precision
</title>

<abstract>
There is provided a method for determining an FL value to be used for optimizing hardware applicable to mobile devices, compact networks, and the like with high precision. The method includes steps of: a computing device (a) applying quantization operations to original values included in an original vector by referring to a BW value and each of FL candidate values, to thereby generate each of quantized vectors, including the quantized values, corresponding to each of the FL candidate values; (b) generating each of weighted quantization loss values, corresponding to each of the FL candidate values, by applying weighted quantization loss operations to information on each of differences between the original values and the quantized values included in each of the quantized vectors; and (c) determining the FL value among the FL candidate values by referring to the weighted quantization loss values and a device using the same.
</abstract>

<claims>
1. A method for determining an FL value, which is an FL parameter that is an absolute value of an exponent of a number represented by a LSB, least significant bit, included in quantized values, comprising steps of: (a) a computing device, if an original vector including original values is acquired, applying quantization operations to the original values by referring to (i) a BW, bit width, value, which is a BW parameter corresponding to the number of bits used to represent each of the quantized values, and (ii) each of FL candidate values, to thereby generate each of quantized vectors, including the quantized values, corresponding to each of the FL candidate values; b) the computing device generating each of weighted quantization loss values, corresponding to each of the FL candidate values, by applying weighted quantization loss operations to information on each of differences between the original values included in the original vector and the quantized values included in each of the quantized vectors; and (c) the computing device determining the FL value among the FL candidate values by referring to the weighted quantization loss values, wherein at the step of (b), the weighted quantization loss operation follows a formula below,
description="In-line Formulae" end="lead"?Ll=∥{right arrow over (W)}·({right arrow over (Q)}l−{right arrow over (x)})∥p description="In-line Formulae" end="tail"? wherein {right arrow over (x)} is the original vector, Ql is an l-th quantized vector, {right arrow over (W)} is a weight vector, which includes at least part of weight values generated by referring to sizes of the original values · is an operation that generates an integrated vector whose elements are determined as results of element-wise multiplication of the weight vector {right arrow over (W)} and a difference vector ({right arrow over (Q)}l−{right arrow over (x)}), and ∥ ∥p is an L-P norm operation.
2. A method for determining an FL value, which is an FL parameter that is an absolute value of an exponent of a number represented by a LSB, least significant bit, included in quantized values, comprising steps of: (a) a computing device, if an original vector including original values is acquired, applying quantization operations to the original values by referring to (i) a BW, bit width, value, which is a BW parameter corresponding to the number of bits used to represent each of the quantized values, and (ii) each of FL candidate values, to thereby generate each of quantized vectors, including the quantized values, corresponding to each of the FL candidate values; b) the computing device generating each of weighted quantization loss values, corresponding to each of the FL candidate values, by applying weighted quantization loss operations to information on each of differences between the original values included in the original vector and the quantized values included in each of the quantized vectors; and (c) the computing device determining the FL value among the FL candidate values by referring to the weighted quantization loss values, wherein, at the step of (a), the quantization operations follow a formula below, wherein, {right arrow over (Q)}l is an l-th quantized vector, xk is a k-th original value included in the original vector, ϵ is a constant for determining a type of the quantization operation, and [ ] is a Gaussian operation.
3. The method of claim 1, wherein, at the step of (b), the weighted quantization loss operations generate each of the weighted quantization loss values corresponding to each of the FL candidate values by referring to a weight vector, wherein the weight vector includes at least part of weight values generated by referring to sizes of the original values.
4. The method of claim 1, wherein the original values include (i) CNN parameters of an arbitrary specific layer in a CNN and (ii) feature values of a feature map, corresponding to a training image to be used for determining the FL value, while the specific layer is processing the feature map.
5. The method of claim 4, wherein the FL value is an optimized value so that the weighted quantization loss values are smaller than a threshold value when the values of the feature map are quantized, at least part of the values of the feature map being included in different channels thereof.
6. The method of claim 1, further comprising a step of: (d) the computing device applying the quantization operations to parameters included in each layer of a CNN by referring to the FL value and the BW value, to thereby generate quantized parameters.
7. The method of claim 6, further comprising steps of: (e) the computing device, if test values are acquired, instructing the CNN to apply convolution operations to the test values by using the quantized parameters to thereby generate test feature values, and instructing the CNN to accumulate the test feature values; and (f) the computing device applying the quantization operations to the accumulated test feature values by referring to the FL value and the BW value to thereby generate quantized test feature values, and storing the quantized test feature values in a memory space.
8. The method of claim 7, wherein, at the step of (e), the test values are acquired in a fixed point form, and the test feature values are generated in a floating point form, and the computing device instructs the CNN to accumulate the test feature values in the floating point form, and wherein, at the step of (f), the computing device generates the quantized feature values in the fixed point form, and storing the quantized feature values in the fixed point form in the memory space.
9. A computing device for determining an FL value, which is an FL parameter that is an absolute value of an exponent of a number represented by a LSB, least significant bit, included in quantized values, comprising: at least one memory that stores instructions; and at least one processor configured to execute the instructions to: perform processes of (I) applying quantization operations to the original values by referring to (i) a BW, bit width, value, which is a BW parameter corresponding to the number of bits used to represent each of the quantized values, and (ii) each of FL candidate values, to thereby generate each of quantized vectors, including the quantized values, corresponding to each of the FL candidate values; (II) generating each of weighted quantization loss values, corresponding to each of the FL candidate values, by applying weighted quantization loss operations to information on each of differences between the original values included in an original vector including original values and the quantized values included in each of the quantized vectors; and (III) determining the FL value among the FL candidate values by referring to the weighted quantization loss values, wherein at the process of (II), the weighted quantization loss operation follows a formula below,
description="In-line Formulae" end="lead"?Ll=∥{right arrow over (W)}·({right arrow over (Q)}l−{right arrow over (x)})∥p description="In-line Formulae" end="tail"? wherein {right arrow over (x)} is the original vector, Ql is an l-th quantized vector, {right arrow over (W)} is a weight vector, which includes at least part of weight values generated by referring to sizes of the original values · is an operation that generates an integrated vector whose elements are determined as results of element-wise multiplication of the weight vector {right arrow over (W)} and a difference vector ({right arrow over (Q)}l−{right arrow over (x)}), and ∥ ∥p is an L-P norm operation.
10. A computing device for determining an FL value, which is an FL parameter that is an absolute value of an exponent of a number represented by a LSB, least significant bit, included in quantized values, comprising: at least one memory that stores instructions; and at least one processor configured to execute the instructions to: perform processes of (1) applying quantization operations to the original values by referring to (i) a BW, bit width, value, which is a BW parameter corresponding to the number of bits used to represent each of the quantized values, and (ii) each of FL candidate values, to thereby generate each of quantized vectors, including the quantized values, corresponding to each of the FL candidate values; (II) generating each of weighted quantization loss values, corresponding to each of the FL candidate values, by applying weighted quantization loss operations to information on each of differences between the original values included in an original vector including original values and the quantized values included in each of the quantized vectors; and (III) determining the FL value among the FL candidate values by referring to the weighted quantization loss values, wherein, at the process of (I), the quantization operations follow a formula below, wherein, {right arrow over (Q)}l is an l-th quantized vector, xk is a k-th original value included in the original vector, ϵ is a constant for determining a type of the quantization operation, and [ ] is a Gaussian operation.
11. The computing device of claim 9, wherein, at the process of (II), the weighted quantization loss operations generate each of the weighted quantization loss values corresponding to each of the FL candidate values by referring to a weight vector, wherein the weight vector includes at least part of weight values generated by referring to sizes of the original values.
12. The computing device of claim 9, wherein the original values include (i) CNN parameters of an arbitrary specific layer in a CNN and (ii) feature values of a feature map, corresponding to a training image to be used for determining the FL value, while the specific layer is processing the feature map.
13. The computing device of claim 9, wherein the FL value is an optimized value so that the weighted quantization loss values are smaller than a threshold value when the values of the feature map are quantized, at least part of the values of the feature map being included in different channels thereof.
14. The computing device of claim 9, wherein the processor further performs a process of: (IV) applying the quantization operations to parameters included in each layer of a CNN by referring to the FL value and the BW value, to thereby generate quantized parameters.
15. The computing device of claim 14, wherein the processor further performs processes of: (V) if test values are acquired, instructing the CNN to apply convolution operations to the test values by using the quantized parameters to thereby generate test feature values, and instructing the CNN to accumulate the test feature values; and (VI) applying the quantization operations to the accumulated test feature values by referring to the FL value and the BW value to thereby generate quantized test feature values, and storing the quantized test feature values in a memory space.
16. The computing of claim 15, wherein, at the process of (V), the test values are acquired in a fixed point form, and the test feature values are generated in a floating point form, and the processor instructs the CNN to accumulate the test feature values in the floating point form, and wherein, at the process of (VI), the processor generates the quantized feature values in the fixed point form, and storing the quantized feature values in the fixed point form in the memory space.
</claims>
</document>
