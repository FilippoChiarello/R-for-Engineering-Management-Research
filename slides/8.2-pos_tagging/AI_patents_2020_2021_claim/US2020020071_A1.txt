<document>

<filing_date>
2017-12-04
</filing_date>

<publication_date>
2020-01-16
</publication_date>

<priority_date>
2016-12-05
</priority_date>

<ipc_classes>
G06T3/00
</ipc_classes>

<assignee>
GOOGLE
</assignee>

<inventors>
PANAGOPOULOS, ALEXANDROS
FREY, NATHAN
</inventors>

<docdb_family_id>
57750582
</docdb_family_id>

<title>
METHOD FOR CONVERTING LANDSCAPE VIDEO TO PORTRAIT MOBILE LAYOUT
</title>

<abstract>
Systems and methods for cropping media for a particular orientation using a computing device are described. A method may first comprise receiving by a video preprocessor of the device, a first frame of media in a first orientation. A first region comprising a first feature within the first frame may be identified, by an image analyzer. A cropping calculator of the device may generate a score for the first region based on a characteristic of the first feature and determine that the score for the first region exceeds a threshold. An image processor of the device may then crop the first frame of the video, responsive to the determination that the score for the first region exceeds the threshold, to include the first region within a predetermined display area comprising a subset of the first frame in a second orientation.
</abstract>

<claims>
1. A method, comprising: receiving, by a video preprocessor of a device, a first frame of a video in a first orientation; identifying, by an image analyzer of the device, a first region within the first frame comprising a first feature; generating a score, by a cropping calculator of the device, for the first region based on a characteristic of the first feature; determining, by the cropping calculator, that the score for the first region exceeds a threshold; identifying, by the image analyzer, a second region within the first frame comprising a second feature; generating a second score, by the cropping calculator, for the second region; determining, by the cropping calculator, that the second score exceeds the threshold; and responsive to the determination, cropping the first frame of the video, by an image processor of the device, to include the first region within a predetermined display area comprising a subset of the first frame in a second orientation; wherein cropping the first frame further comprises: identifying, by the image analyzer, a display region in the second orientation comprising the first region and the second region, responsive to the determination that the score for the first region and the second score for the second region each exceed the threshold, and cropping the first frame, by the image processor, to the boundaries of the identified display region; and wherein identifying the display region in the second orientation comprising the first region and the second region comprises: determining, by the cropping calculator, that the score for the first region is higher than the second score for the second region, generating, by the image processor, an intermediate display region centered on the first feature in the second orientation having a predetermined size, and adjusting, by the image processor, a position of the intermediate display region within the frame to include the first region and second region while maintaining the predetermined size and second orientation.
2. The method of claim 1, wherein the first feature comprises text, and wherein generating the score for the first region based on a characteristic of the first feature further comprises generating the score, by the cropping calculator, proportional to a size of the text.
3. The method of claim 1, wherein the first feature comprises text, and wherein generating the score for the first region based on a characteristic of the first feature further comprises generating the score, by the cropping calculator, inversely proportional to a distance of the text from a center of the frame.
4. The method of claim 1, wherein the first feature comprises a face, and wherein generating the score for the first region based on a characteristic of the first feature further comprises generating the score, by the cropping calculator, based on the size of the face relative to the frame.
5. The method of claim 1, further comprising: identifying, by the image analyzer, a third region within the first frame comprising a third feature, generating a third score, by the cropping calculator, for the third region, determining, by the cropping calculator, that the third score is less than the threshold, and responsive to the determination, cropping, by the image processor, the third region from the first frame.
6. The method of claim 1, further comprising: receiving, by the video preprocessor, a second frame of the video in the first orientation; identifying, by the image analyzer, a second position in the second frame for the first region comprising the first feature; and generating a second score, by the cropping calculator, for the first region based on an amount of movement of the first region between the first frame and second frame; and wherein determining that the score for the first region exceeds a threshold further comprises adding the score for the first region and the second score for the first region.
7. The method of claim 6, further comprising identifying, by a temporal image processor, a global motion vector from a difference in pixels of the first frame and pixels of the second frame; and wherein generating the second score comprises generating a score, by the cropping calculator, proportional to a difference between the movement of the first region between the first frame and second frame and the global motion vector.
8. A system comprising: one or more processors of a device; and a network interface electrically connected to the one or more processors; wherein the one or more processors are configured to: receive a first frame of a video in a first orientation; identify a first region within the first frame comprising a first feature; generate a score for the first region based on a characteristic of the first feature; determine that the score for the first region exceeds a threshold; identify a second region within the first frame comprising a second feature; generate a second score for the second region; determine that the second score exceeds the threshold; and responsive to the determination, crop the first frame of the video to include the first region within a predetermined display area comprising a subset of the first frame in a second orientation; wherein cropping the first frame further comprises: identifying a display region in the second orientation comprising the first region and the second region, responsive to the determination that the score for the first region and the second score for the second region each exceed the threshold, and cropping the first frame to the boundaries of the identified display region; and wherein identifying the display region in the second orientation comprising the first region and the second region comprises: determining that the score for the first region is higher than the second score for the second region, generating an intermediate display region centered on the first feature in the second orientation having a predetermined size, and adjusting a position of the intermediate display region within the frame to include the first region and second region while maintaining the predetermined size and second orientation.
9. The system of claim 8, wherein the first feature comprises text, and wherein the one or more processors are further configured to generate the score for the first region, proportional to a size of the text.
10. The system of claim 8, wherein the first feature comprises text, and wherein the one or more processors are further configured to generate the score for the first region, inversely proportional to a distance of the text from a center of the frame.
11. The system of claim 8, wherein the first feature comprises a face, and wherein the one or more processors are further configured to generate the score for the first region based on the size of the face relative to the frame.
12. The system of claim 8, wherein the one or more processors are further configured to: identify a third region within the first frame comprising a third feature, generate a third score for the third region, determine that the third score is less than the threshold, and responsive to the determination, crop the third region from the first frame.
13. The system of claim 8, wherein the one or more processors are further configured to: receive a second frame of the video in the first orientation; identify a second position in the second frame for the first region comprising the first feature; and generate a second score for the first region based on an amount of movement of the first region between the first frame and second frame; and wherein determining that the score for the first region exceeds a threshold further comprises adding the score for the first region and the second score for the first region.
14. The system of claim 13, wherein the one or more processors are further configured to: identify a global motion vector from a difference in pixels of the first frame and pixels of the second frame; and generate the second score proportional to a difference between the movement of the first region between the first frame and second frame and the global motion vector.
15. A non-transitory computer-readable medium comprising instructions that, when executed by the processor of a computing device, cause the computing device to: receive a first frame of a video in a first orientation; identify a first region within the first frame comprising a first feature; generate a score for the first region based on a characteristic of the first feature; determine that the score for the first region exceeds a threshold; identify a second region within the first frame comprising a second feature; generate a second score for the second region; determine that the second score exceeds the threshold; and responsive to the determination, crop the first frame of the video to include the first region within a predetermined display area comprising a subset of the first frame in a second orientation; wherein cropping the first frame further comprises: identifying a display region in the second orientation comprising the first region and the second region, responsive to the determination that the score for the first region and the second score for the second region each exceed the threshold, and cropping the first frame to the boundaries of the identified display region; and wherein identifying the display region in the second orientation comprising the first region and the second region comprises: determining that the score for the first region is higher than the second score for the second region, generating an intermediate display region centered on the first feature in the second orientation having a predetermined size, and adjusting a position of the intermediate display region within the frame to include the first region and second region while maintaining the predetermined size and second orientation.
16. The computer-readable medium of claim 15, wherein the first feature comprises text, and wherein execution of the instructions causes the computing device to generate the score for the first region, proportional to a size of the text.
17. The computer-readable medium of claim 15, wherein the first feature comprises text, and wherein execution of the instructions causes the computing device to generate the score for the first region, inversely proportional to a distance of the text from a center of the frame.
18. The computer-readable medium of claim 15, wherein the first feature comprises a face, and wherein execution of the instructions causes the computing device to generate the score for the first region based on the size of the face relative to the frame.
19. The computer-readable medium of claim 15, wherein execution of the instructions causes the computing device to: identify a third region within the first frame comprising a third feature, generate a third score for the third region, determine that the third score is less than the threshold, and responsive to the determination, crop the third region from the first frame.
20. The computer-readable medium of claim 15, wherein execution of the instructions causes the computing device to: receive a second frame of the video in the first orientation; identify a second position in the second frame for the first region comprising the first feature; and generate a second score for the first region based on an amount of movement of the first region between the first frame and second frame; and wherein determining that the score for the first region exceeds a threshold further comprises adding the score for the first region and the second score for the first region.
</claims>
</document>
