<document>

<filing_date>
2018-11-28
</filing_date>

<publication_date>
2020-11-10
</publication_date>

<priority_date>
2018-01-29
</priority_date>

<ipc_classes>
G06F17/11,G06K9/00,G06K9/62
</ipc_classes>

<assignee>
BEIJING KUANGSHI TECHNOLOGY COMPANY
</assignee>

<inventors>
LIU YU
</inventors>

<docdb_family_id>
64325984
</docdb_family_id>

<title>
Facial recognition method, facial recognition system, and non-transitory recording medium
</title>

<abstract>
The embodiments of this application provide a facial recognition method and system, and a non-transitory recording medium. The method includes: obtaining a first feature vector of a first face in a first facial image and a first confidence vector having the same dimension as the first feature vector, wherein elements in the first confidence vector are used to indicate credibility of features represented by the corresponding elements in the first feature vector; obtaining a second feature vector of a second face in a second facial image and a second confidence vector having the same dimension as the second feature vector, wherein elements in the second confidence vector are used to indicate credibility of features represented by the corresponding elements in the second feature vector; and determining the first confidence vector, the second feature vector and the second confidence vector, whether the first and second face belong to the same person.
</abstract>

<claims>
1. A facial recognition method, the method comprising: obtaining a first feature vector of a first face in a first facial image and a first confidence vector having the same dimension as the first feature vector, wherein elements in the first confidence vector are used to indicate credibility of features represented by the corresponding elements in the first feature vector; obtaining a second feature vector of a second face in a second facial image and a second confidence vector having the same dimension as the second feature vector, wherein elements in the second confidence vector are used to indicate credibility of features represented by the corresponding elements in the second feature vector; and determining, according to the first feature vector, the first confidence vector, the second feature vector and the second confidence vector, whether the first face and the second face belong to the same person, wherein determining, according to the first feature vector, the first confidence vector, the second feature vector and the second confidence vector, whether the first face and the second face belong to the same person comprises: calculating a degree of coincidence between the first confidence vector and the second confidence vector; and if the degree of coincidence is less than a preset threshold, determining that it is impossible to determine whether the first face and the second face belong to the same person; if the degree of coincidence is greater than or equal to the preset threshold, calculating a similarity between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector, and determining whether the first face and the second face belong to the same person according to the similarity.
2. The method according to claim 1, wherein calculating a degree of coincidence between the first confidence vector and the second confidence vector comprises: obtaining the degree of coincidence by calculating an inner product of the first confidence vector and the second confidence vector.
3. The method according to claim 1, wherein calculating a similarity between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector comprises: calculating a distance between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector; and calculating a similarity between the first face and the second face according to the distance.
4. The method according to claim 3, wherein the distance is calculated using the following formula: where X1 represents the first feature vector, X2 represents the second feature vector, Y1 represents the first confidence vector, Y2 represents the second confidence vector, < > represents calculating an inner product, and * represents multiplying by bit.
5. The method according to claim 3, wherein the similarity is calculated using the following formula: where S represents the similarity, D represents the distance, and A and B are preset parameters.
6. The method according to claim 1, wherein obtaining a first feature vector of a first face in a first facial image and a first confidence vector having the same dimension as the first feature vector comprises: inputting the first facial image into a trained neural network to obtain the first feature vector and the first confidence vector; and wherein obtaining a second feature vector of a second face in a second facial image and a second confidence vector having the same dimension as the second feature vector comprises: inputting the second facial image to the trained neural network to obtain the second feature vector and the second confidence vector.
7. A facial recognition system, comprising a memory, a processor, and a computer program stored in the memory and running on the processor, wherein steps of a facial recognition method are implemented when the computer program is executed by the processor, the method comprising: obtaining a first feature vector of a first face in a first facial image and a first confidence vector having the same dimension as the first feature vector, wherein elements in the first confidence vector are used to indicate credibility of features represented by the corresponding elements in the first feature vector; obtaining a second feature vector of a second face in a second facial image and a second confidence vector having the same dimension as the second feature vector, wherein elements in the second confidence vector are used to indicate credibility of features represented by the corresponding elements in the second feature vector; and determining, according to the first feature vector, the first confidence vector, the second feature vector and the second confidence vector, whether the first face and the second face belong to the same person, wherein determining, according to the first feature vector, the first confidence vector, the second feature vector and the second confidence vector, whether the first face and the second face belong to the same person comprises: calculating a degree of coincidence between the first confidence vector and the second confidence vector; and if the degree of coincidence is less than a preset threshold, determining that it is impossible to determine whether the first face and the second face belong to the same person; if the degree of coincidence is greater than or equal to the preset threshold, calculating a similarity between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector, and determining whether the first face and the second face belong to the same person according to the similarity.
8. The system according to claim 7, wherein calculating a degree of coincidence between the first confidence vector and the second confidence vector comprises: obtaining the degree of coincidence by calculating an inner product of the first confidence vector and the second confidence vector.
9. The system according to claim 7, wherein calculating a similarity between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector comprises: calculating a distance between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector; and calculating a similarity between the first face and the second face according to the distance.
10. The system according to claim 9, wherein the distance is calculated using the following formula: where X1 represents the first feature vector, X2 represents the second feature vector, Y1 represents the first confidence vector, Y2 represents the second confidence vector, < > represents calculating an inner product, and * represents multiplying by bit.
11. The system according to claim 9, wherein the similarity is calculated using the following formula: where S represents the similarity, D represents the distance, and A and B are preset parameters.
12. The system according to claim 7, wherein obtaining a first feature vector of a first face in a first facial image and a first confidence vector having the same dimension as the first feature vector comprises: inputting the first facial image into a trained neural network to obtain the first feature vector and the first confidence vector; and obtaining a second feature vector of a second face in a second facial image and a second confidence vector having the same dimension as the second feature vector comprises: inputting the second facial image to the trained neural network to obtain the second feature vector and the second confidence vector.
13. A non-transitory recording medium on which a computer program is stored, wherein steps of a facial recognition method are implemented when the computer program is executed by a processor, the method comprising: obtaining a first feature vector of a first face in a first facial image and a first confidence vector having the same dimension as the first feature vector, wherein elements in the first confidence vector are used to indicate credibility of features represented by the corresponding elements in the first feature vector; obtaining a second feature vector of a second face in a second facial image and a second confidence vector having the same dimension as the second feature vector, wherein elements in the second confidence vector are used to indicate credibility of features represented by the corresponding elements in the second feature vector; and determining, according to the first feature vector, the first confidence vector, the second feature vector and the second confidence vector, whether the first face and the second face belong to the same person, wherein determining, according to the first feature vector, the first confidence vector, the second feature vector and the second confidence vector, whether the first face and the second face belong to the same person comprises: calculating a degree of coincidence between the first confidence vector and the second confidence vector; and if the degree of coincidence is less than a preset threshold, determining that it is impossible to determine whether the first face and the second face belong to the same person; if the degree of coincidence is greater than or equal to the preset threshold, calculating a similarity between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector, and determining whether the first face and the second face belong to the same person according to the similarity.
14. The non-transitory recording medium according to claim 13, wherein calculating a degree of coincidence between the first confidence vector and the second confidence vector comprises: obtaining the degree of coincidence by calculating an inner product of the first confidence vector and the second confidence vector.
15. The non-transitory recording medium according to claim 13, wherein calculating a similarity between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector comprises: calculating a distance between the first face and the second face according to the first confidence vector, the first feature vector, the second confidence vector and the second feature vector; and calculating a similarity between the first face and the second face according to the distance.
16. The non-transitory recording medium according to claim 15, wherein the distance is calculated using the following formula: where X1 represents the first feature vector, X2 represents the second feature vector, Y1 represents the first confidence vector, Y2 represents the second confidence vector, < > represents calculating an inner product, and * represents multiplying by bit.
17. The non-transitory recording medium according to claim 15, wherein the similarity is calculated using the following formula: where S represents the similarity, D represents the distance, and A and B are preset parameters.
</claims>
</document>
