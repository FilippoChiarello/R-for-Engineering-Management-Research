<document>

<filing_date>
2019-05-17
</filing_date>

<publication_date>
2020-10-27
</publication_date>

<priority_date>
2019-05-17
</priority_date>

<ipc_classes>
G06T13/40,G06T7/00,G06T7/70
</ipc_classes>

<assignee>
ADOBE
</assignee>

<inventors>
ACQUAVELLA, JAMES
SAITO, JUN
Werner, David
</inventors>

<docdb_family_id>
72944442
</docdb_family_id>

<title>
INVERSE KINEMATIC SOLUTION BLENDING IN DIGITAL CHARACTER ANIMATION
</title>

<abstract>
The present disclosure relates to systems, non-transitory computer-readable media, and methods for intelligently blending inverse kinematic (IK) solutions to more naturally depict joint positioning and/or movement of digital animated characters. In particular, in one or more embodiments, the character animation system can blend two IK solutions for an elbow joint based on a shoulder angle. For example, the character animation system can utilize a blending region to dynamically blend IK solutions as the shoulder angle moves through the blending region, thereby smoothly modifying bend direction and elbow position of the animated character arm. Based on the modified elbow position relative to a wrist position and a shoulder position, the animated character system can simulate more accurate, natural arm movements while reducing time and interactions needed to generate realistic animation sequences.
</abstract>

<claims>
1. A non-transitory computer-readable medium storing instructions that, when executed by at least one processor, cause a computer system to: identify a wrist position and a shoulder position of an animated character in a frame of a two-dimensional digital animation; determine, based on the wrist position and the shoulder position of the animated character, a first inverse kinematic solution of a first elbow position and a second inverse kinematic solution of a second elbow position; determine a modified elbow position by blending the first inverse kinematic solution of the first elbow position and the second inverse kinematic solution of the second elbow position according to blending weights determined based on a shoulder angle of the animated character; and generate a representation of the animated character based on the wrist position, the shoulder position, and the modified elbow position.
2. The non-transitory computer-readable medium of claim 1, further comprising instructions that, when executed by the at least one processor, cause the computer system to identify the shoulder angle of the animated character in the frame of the two-dimensional digital animation by identifying an angle between a reference plane associated with the animated character and a line connecting the shoulder position with the first elbow position or the second elbow position.
3. The non-transitory computer-readable medium of claim 1, further comprising instructions that, when executed by the at least one processor, cause the computer system to determine the modified elbow position in response to determining that the shoulder angle of the animated character falls within a blending region.
4. The non-transitory computer-readable medium of claim 3, wherein the blending region comprises a range of angles between a first angle and a second angle and further comprising instructions that, when executed by the at least one processor, cause the computer system to determine that the shoulder angle of the animated character falls within the blending region by determining that the shoulder angle is between the first angle and the second angle.
5. The non-transitory computer-readable medium of claim 4, further comprising instructions that, when executed by the at least one processor, cause the computer system to determine the first angle and the second angle of the blending region by: identifying a shoulder angle limit indicating a central angle of the blending region; identifying a transition angle indicating an angle range relative to the shoulder angle limit; and determining the first angle and the second angle by applying the transition angle to the shoulder angle limit.
6. The non-transitory computer-readable medium of claim 4, further comprising instructions that, when executed by the at least one processor, cause the computer system to blend the first inverse kinematic solution of the first elbow position and the second inverse kinematic solution of the second elbow position by weighting the first inverse kinematic solution of the first elbow position and the second inverse kinematic solution of the second elbow position utilizing the blending weights that account for proximity of the shoulder angle relative to the first angle and the second angle.
7. The non-transitory computer-readable medium of claim 6, wherein weighting the first inverse kinematic solution of the first elbow position and the second inverse kinematic solution of the second elbow position comprises generating the blending weights by applying a smoothstep function to the first inverse kinematic solution of the first elbow position and the second inverse kinematic solution of the second elbow position based on the first angle, the second angle, and the shoulder angle.
8. The non-transitory computer-readable medium of claim 1, further comprising instructions that, when executed by the at least one processor, cause the computer system to: receive a user input associated with a portion of the animated character to move at least one of the wrist position or the shoulder position to a new wrist position and a new shoulder position, respectively; determine, based on the new wrist position and the new shoulder position of the animated character, a third inverse kinematic solution of a third elbow position and a fourth inverse kinematic solution of a fourth elbow position; determine a new modified elbow position by blending the third inverse kinematic solution of the third elbow position and the fourth inverse kinematic solution of the fourth elbow position according to new blending weights determined based on a new shoulder angle of the animated character; and generate an additional representation of the animated character based on the new wrist position, the new shoulder position, and the new modified elbow position.
9. The non-transitory computer-readable medium of claim 1, wherein the animated character comprises an arm having an initial arm length and further comprising instructions that, when executed by the at least one processor, cause the computer system to generate the representation of the animated character based on the wrist position, the shoulder position, and the modified elbow position by generating a modified arm having modified arm length shorter than the initial arm length.
10. The non-transitory computer-readable medium of claim 1, further comprising instructions that, when executed by the at least one processor, cause the computer system to: associate a first art layer with a first orientation of an arm of the animated character and associate a second art layer with a second orientation of the arm of the animated character; determine a switch point within a blending region at which a shoulder angle of the animated character triggers a switch between the first art layer and the second art layer; and generate for display the first art layer or the second art layer by comparing the shoulder angle and the switch point.
11. A system comprising: at least one processor; and at least one non-transitory computer-readable storage medium storing instructions that, when executed by the at least one processor, cause the system to: identify a wrist position and a shoulder position of an animated character in a frame of a two-dimensional digital animation; determine, based on the wrist position and the shoulder position of the animated character, a first inverse kinematic solution of a first elbow position and a second inverse kinematic solution of a second elbow position different from the first elbow position; determine a shoulder angle based on the shoulder position and the first elbow position or the second elbow position; determine a modified elbow position by blending the first inverse kinematic solution of the first elbow position and the second inverse kinematic solution of the second elbow position according to blending weights determined based on the shoulder angle of the animated character; and generate a representation of the animated character based on the wrist position, the shoulder position, and the modified elbow position.
12. The system of claim 11, further comprising instructions that, when executed by the at least one processor, cause the system to identify the shoulder angle of the animated character in the frame of the two-dimensional digital animation by identifying an angle between a reference plane associated with the animated character and a line connecting the shoulder position with the first elbow position or the second elbow position.
13. The system of claim 11, further comprising instructions that, when executed by the at least one processor, cause the system to determine the modified elbow position in response to determining that the shoulder angle of the animated character falls within a blending region.
14. The system of claim 13, wherein the blending region comprises a range of angles between a first angle and a second angle and further comprising instructions that, when executed by the at least one processor, cause the system to determine that the shoulder angle of the animated character falls within the blending region by determining that the shoulder angle is between the first angle and the second angle.
15. The system of claim 11, further comprising instructions that, when executed by the at least one processor, cause the system to: receive a user input associated with a portion of the animated character to move at least one of the wrist position or the shoulder position to a new wrist position and a new shoulder position, respectively; determine, based on the new wrist position and the new shoulder position of the animated character, a third inverse kinematic solution of a third elbow position and a fourth inverse kinematic solution of a fourth elbow position; determine a new modified elbow position by blending the third inverse kinematic solution of the third elbow position and the fourth inverse kinematic solution of the fourth elbow position according to new blending weights determined based on a new shoulder angle of the animated character; and generate an additional representation of the animated character based on the new wrist position, the new shoulder position, and the new modified elbow position.
16. The system of claim 11, wherein the animated character comprises an arm having an initial arm length and further comprising instructions that, when executed by the at least one processor, cause the system to generate the representation of the animated character based on the wrist position, the shoulder position, and the modified elbow position by generating a modified arm having a modified arm length shorter than the initial arm length.
17. A computer-implemented method comprising: identifying a user interaction to move one or more portions of an animated character in a two-dimensional digital animation; based on the user interaction, identifying a first joint position and a second joint position of the animated character; a step for generating a representation of the animated character having a blended middle joint position reflecting both a first inverse kinematic solution of a first middle joint position and a second inverse kinematic solution of a second middle joint position; and providing the representation of the animated character for display as part of the two-dimensional digital animation.
18. The computer-implemented method of claim 17, wherein: the first joint position includes a wrist position of the animated character; the second joint position includes a shoulder position of the animated character; and the first middle joint position comprises a first elbow position, the second middle joint position comprises a second elbow position, and the blended middle joint position comprises a blended elbow position.
19. The computer-implemented method of claim 17, wherein the blended middle joint position is spatially positioned between the first middle joint position and the second middle joint position.
20. The computer-implemented method of claim 17, wherein the animated character comprises an arm having an initial arm length and the computer-implemented method further comprises generating the representation of the animated character based on the first joint position, the second joint position, and the blended middle joint position by generating a modified arm having a modified arm length different from the initial arm length.
</claims>
</document>
