<document>

<filing_date>
2018-12-06
</filing_date>

<publication_date>
2020-07-21
</publication_date>

<priority_date>
2017-11-15
</priority_date>

<ipc_classes>
H04B17/318,H04W28/04,H04W36/00,H04W36/28,H04W36/30,H04W4/80
</ipc_classes>

<assignee>
AMAZON TECHNOLOGIES
</assignee>

<inventors>
JORGOVANOVIC, MILOS
BATTA, GANESHA
</inventors>

<docdb_family_id>
69406663
</docdb_family_id>

<title>
Wireless device connection handover
</title>

<abstract>
A system and method includes a first device (e.g., a primary wireless in-ear device) connected to a second device (e.g., a secondary wireless in-ear device) using a first wireless connection. The first device is also connected to a third device (e.g., a smartphone or smart watch) using a second wireless connection. If the first device and second devices determine signal quality metrics corresponding to the quality of the wireless signal received by each. If the second device reports having a better signal quality, communication with the third device is handed off from the first device to the second device.
</abstract>

<claims>
1. A computer-implemented method comprising: establishing a first wireless connection between a first in-ear device and a second in-ear device; establishing, based at least in part on a wireless signal output by a user device, a second wireless connection between the first in-ear device and the user device; determining, using the first in-ear device, a first signal quality value of the second wireless connection; receiving, from the second in-ear device, a second signal quality value of the wireless signal; determining, using the first in-ear device, a first signal strength value of the second wireless connection; receiving, from the second in-ear device, a second signal strength value of the wireless signal; determining, using the first in-ear device, that the first signal strength value represents a lower signal strength than the second signal strength value; determining, using the first in-ear device, that the first signal quality value represents a lower signal quality than the second signal quality value; sending, by the first in-ear device to the second in-ear device, a role-switch command; and disconnecting the second wireless connection.
2. The computer-implemented method of claim 1, further comprising: sending, from the second in-ear device to the first in-ear device, the second signal strength value; and based at least in part on receiving the role-switch command, establishing a third wireless connection between the second in-ear device and the user device.
3. The computer-implemented method of claim 2, further comprising at least one of: determining, using the second in-ear device and the wireless signal, first configuration information corresponding to the second wireless connection, the first configuration information including a first address of the first in-ear device; or receiving, from the first in-ear device at the second in-ear device, second configuration information corresponding to the second wireless connection, the second configuration information including a second address of the first in-ear device, wherein the second wireless connection is transferred based at least in part on the first configuration information or the second configuration information.
4. The computer-implemented method of claim 1, further comprising: determining, using the first in-ear device, that the first signal quality value is greater than a threshold, wherein the first signal quality value is a first packet error rate (PER) and the second signal quality value is a second PER.
5. The computer-implemented method of claim 1, further comprising: determining, using the first in-ear device, that the first signal strength value is less than a threshold, wherein the first signal strength value is a first received signal strength indicator (RSSI) and the second signal strength value is a second RSSI.
6. The computer-implemented method of claim 1, further comprising: establishing, based at least in part on the wireless signal, a third wireless connection between the second in-ear device and the user device; determining, using the second in-ear device, that the second signal strength value satisfies a condition quality threshold; determining, using the second in-ear device, a third signal strength value of the wireless signal; receiving, from using the first in-ear device, a fourth signal strength value of the wireless signal; determining, using the first in-ear device, that the third signal strength value is less than the fourth signal strength value; and based at least in part on determining that the third signal strength value is less than the fourth signal strength value, disconnecting the third wireless connection.
7. The computer-implemented method of claim 1, wherein determining that the first signal quality value is lower than the second signal quality value further comprises: subtracting, from the second signal strength value, a delta factor to generate a modified second signal strength value, the delta factor corresponding to a minimum improvement in signal quality; and determining that the first signal strength value is lower than the modified second signal strength value.
8. The computer-implemented method of claim 1, wherein determining the first signal quality value further comprises: determining, during a first time period, a first packet error rate (PER) value corresponding to the second wireless connection; determining, during a second time period after the first time period, a second PER value corresponding to the second wireless connection; increasing the second PER value in accordance with a weighting factor to generate a weighted second PER value, the weighting factor corresponding to an emphasis on newer packets; and determining an average of the first PER value and the weighted second PER value.
9. The computer-implemented method of claim 1, further comprising: prior to disconnecting the second wireless connection, sending, to the user device from the first in-ear device, a first command to pause the second wireless connection; sending, to the user device from the first in-ear device, audio data corresponding to an utterance; and sending, to the user device from the first in-ear device, a second command to resume the second wireless connection.
10. The computer-implemented method of claim 1, further comprising: determining a status of the first in-ear device, the status corresponding to an in-ear state of the first in-ear device; determining, using a state machine, a running average of the first signal quality value; and based at least in part on disconnecting the second wireless connection, resetting the state machine.
11. A system comprising: at least one processor; and at least one memory including instructions that, when executed by the at least one processor, cause the system to: establish a first wireless connection between a first in-ear device and a second in-ear device; establish, based at least in part on a wireless signal output by a user device, a second wireless connection between the first in-ear device and the user device; determine, using the first in-ear device, a first signal quality value of the second wireless connection; receive, from the second in-ear device, a second signal quality value of the wireless signal; determine, using the first in-ear device, a first signal strength value of the second wireless connection; receive, from the second in-ear device, a second signal strength value of the wireless signal; determine, using the first in-ear device, that the first signal strength value represents a lower signal strength than the second signal strength value; determine, using the first in-ear device, that the first signal quality value represents a lower signal quality than the second signal quality value; send, by the first in-ear device to the second in-ear device, a role-switch command; and disconnect the second wireless connection.
12. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: send, from the second in-ear device to the first in-ear device, the second signal quality value; and based at least in part on receiving the role-switch command, establish a third wireless connection between the second in-ear device and the user device.
13. The system of claim 12, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: determine, using the second in-ear device and the wireless signal, first configuration information corresponding to the second wireless connection, the first configuration information including a first address of the first in-ear device; or receive, from the first in-ear device at the second in-ear device, second configuration information corresponding to the second wireless connection, the second configuration information including a second address of the first in-ear device, wherein the second wireless connection is transferred based at least in part on the first configuration information or the second configuration information.
14. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: determine, using the first in-ear device, that the first signal quality value is greater than a threshold, wherein the first signal quality value is a first packet error rate (PER) and the second signal quality value is a second PER.
15. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: determine, using the first in-ear device, that the first signal strength value is less than a threshold, wherein the first signal strength value is a first received signal strength indicator (RSSI) and the second signal strength value is a second RSSI.
16. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: establish, based at least in part on the wireless signal, a third wireless connection between the second in-ear device and the user device; determine, using the second in-ear device, that the second signal strength value satisfies a condition; determine, using the second in-ear device, a third signal strength value of the wireless signal; receive, from the first in-ear device, a fourth signal strength value of the wireless signal; determine, using the first in-ear device, that the third signal strength value is less than the fourth signal strength value; and based at least in part on determining that the third signal strength value is less than the fourth signal strength value, disconnect the third wireless connection.
17. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: determine, during a first time period, a first packet error rate (PER) value corresponding to the second wireless connection; determine, during a second time period after the first time period, a second PER value corresponding to the second wireless connection; increase the second PER value in accordance with a weighting factor to generate a weighted second PER value, the weighting factor corresponding to an emphasis on newer packets; and determine an average of the first PER value and the weighted second PER value.
18. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: determine a status of the first in-ear device, the status corresponding to an in-ear state of the first in-ear device; determine, using a state machine, a running average of the first signal quality value; and based at least in part on disconnecting the second wireless connection, reset the state machine.
19. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: prior to disconnecting the second wireless connection, send, to the user device from the first in-ear device, a first command to pause the second wireless connection; send, to the user device from the first in-ear device, audio data corresponding to an utterance; and send, to the user device from the first in-ear device, a second command to resume the second wireless connection.
20. The system of claim 11, wherein the at least one memory further includes instructions that, when executed by the at least one processor, further cause the system to: determine a status of the first in-ear device, the status corresponding to an in-ear state of the first in-ear device; determine, using a state machine, a running average of the first signal quality value; and based at least in part on disconnecting the second wireless connection, reset the state machine.
</claims>
</document>
