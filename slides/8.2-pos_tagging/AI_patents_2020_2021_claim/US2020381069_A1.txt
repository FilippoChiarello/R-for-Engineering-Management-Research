<document>

<filing_date>
2019-06-19
</filing_date>

<publication_date>
2020-12-03
</publication_date>

<priority_date>
2019-05-31
</priority_date>

<ipc_classes>
G11C19/28,G11C19/38
</ipc_classes>

<assignee>
AMD (ADVANCED MICRO DEVICES)
</assignee>

<inventors>
Meng, Qing
</inventors>

<docdb_family_id>
73549932
</docdb_family_id>

<title>
STRIPE BASED SELF-GATING FOR RETIMING PIPELINES
</title>

<abstract>
Systems, apparatuses, and methods for implementing stripe-based self-gating and change detect signal propagation for retiming pipelines are disclosed. A circuit includes one or more stripes, with each stripe including a plurality of stages of registers, with each stage only receiving input signals from the preceding stage. For a given stripe, the first stage of registers are self-gated to reduce power consumption by only clocking a group of registers when any of their input signals change. The self-gating signals of the first stage of registers are combined together to create a change detect signal which is passed through a register and provided to a second stage of registers as a clock-enable signal. Accordingly, the second stage registers are only clocked when the change detect signal indicates a change will be forwarded from the first stage. This reduces power consumption for the second stage without causing the area increase associated with self-gating circuitry.
</abstract>

<claims>
1. A circuit comprising: a plurality of registers in a first stage; and a plurality of registers in a second stage; wherein the circuit is configured to: generate a change detect signal from a plurality of self-gating signals corresponding to the plurality of registers in the first stage; pass the change detect signal through a first register to create a first delayed version of the change detect signal; generate a first clock enable signal from the first delayed version of the change detect signal; and supply a clock to the plurality of registers in the second stage only when the first clock enable signal is enabled.
2. The circuit as recited in claim 1, wherein a number of registers in the first stage is less than a first threshold, and wherein a number of registers in the second stage is less than a second threshold.
3. The circuit as recited in claim 1, wherein a toggle rate of the plurality of registers in the second stage is predicted to be less than a threshold.
4. The circuit as recited in claim 1, wherein the circuit further comprises a plurality of registers in a third stage of the circuit stripe, wherein the circuit is further configured to: pass the first delayed version of the change detect signal through a second register to create a second delayed version of the change detect signal; generate a second clock enable signal from the second delayed version of the change detect signal; and supply a clock to the plurality of registers in the third stage only when the second clock enable signal is enabled.
5. The circuit as recited in claim 1, wherein fan-out destinations of the first stage go only to the second stage, and wherein fan-in connections of the second stage are only found in the first stage.
6. The circuit as recited in claim 1, wherein the change detect signal is generated by passing the plurality of self-gating signals through one or more levels of OR-gates.
7. The circuit as recited in claim 1, wherein the second stage does not include any self-gating circuitry, and wherein only the first stage includes self-gating circuitry.
8. A method comprising: generating a change detect signal from a plurality of self-gating signals corresponding to a plurality of registers in the first stage; passing the change detect signal through a first register to create a first delayed version of the change detect signal; generating a first clock enable signal from the first delayed version of the change detect signal; and supplying a clock to a plurality of registers in a second stage only when the first clock enable signal is enabled.
9. The method as recited in claim 8, wherein a number of registers in the first stage is less than a first threshold, and wherein a number of registers in the second stage is less than a second threshold.
10. The method as recited in claim 8, wherein a toggle rate of the plurality of registers in the second stage is predicted to be less than a threshold.
11. The method as recited in claim 8, further comprising: passing the first delayed version of the change detect signal through a second register to create a second delayed version of the change detect signal; generating a second clock enable signal from the second delayed version of the change detect signal; and supplying a clock to a plurality of registers in a third stage only when the second clock enable signal is enabled.
12. The method as recited in claim 8, wherein fan-out destinations of the first stage go only to the second stage, and wherein fan-in connections of the second stage are only found in the first stage.
13. The method as recited in claim 8, wherein the change detect signal is generated by passing the plurality of self-gating signals through one or more levels of OR-gates.
14. The method as recited in claim 8, wherein the second stage does not include any self-gating circuitry, and wherein only the first stage includes self-gating circuitry.
15. A system comprising: a memory storing program instructions; a processor coupled to the memory; and control logic coupled to the processor, wherein the control logic is configured to: generate a change detect signal from a plurality of self-gating signals corresponding to a plurality of registers in a first stage; pass the change detect signal through a first register to create a first delayed version of the change detect signal; generate a first clock enable signal from the first delayed version of the change detect signal; and supply a clock to a plurality of registers in a second stage only when the first clock enable signal is enabled.
16. The system as recited in claim 15, wherein a number of registers in the first stage is less than a first threshold, and wherein a number of registers in the second stage is less than a second threshold.
17. The system as recited in claim 15, wherein a toggle rate of the plurality of registers in the second stage is predicted to be less than a threshold.
18. The system as recited in claim 15, wherein the control logic is further configured to: pass the first delayed version of the change detect signal through a second register to create a second delayed version of the change detect signal; generate a second clock enable signal from the second delayed version of the change detect signal; and supply a clock to a plurality of registers in a third stage only when the second clock enable signal is enabled.
19. The system as recited in claim 15, wherein fan-out destinations of the first stage go only to the second stage, and wherein fan-in connections of the second stage are only found in the first stage.
20. The system as recited in claim 15, wherein the second stage does not include any self-gating circuitry, and wherein only the first stage includes self-gating circuitry.
</claims>
</document>
