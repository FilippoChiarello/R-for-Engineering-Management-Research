<document>

<filing_date>
2018-08-08
</filing_date>

<publication_date>
2020-11-10
</publication_date>

<priority_date>
2016-06-01
</priority_date>

<ipc_classes>
G10L19/02,G10L19/16,G10L19/22,G10L25/18,G10L25/21,G10L25/60
</ipc_classes>

<assignee>
TENCENT TECHNOLOGY (SHENZHEN) COMPANY
</assignee>

<inventors>
ZHAO, WEIFENG
</inventors>

<docdb_family_id>
57446781
</docdb_family_id>

<title>
Sound file sound quality identification method and apparatus
</title>

<abstract>
A sound file sound quality identification method is provided. The method includes converting a format of a to-be-identified sound file into a preset reference audio format; performing framing on the sound file to obtain a plurality of frames; and performing Fourier transformation processing on the to-be-identified sound file to obtain a spectrum of each frame. The method also includes performing model matching according to the spectrum of each frame of the to-be-identified sound file to obtain a preliminary classification result of the to-be-identified sound file; determining an energy change point of the to-be-identified sound file according to the spectrum of each frame; and determining a sound quality of the to-be-identified sound file according to the preliminary classification result of the to-be-identified sound file and the energy change point of the to-be-identified sound file.
</abstract>

<claims>
1. A sound file sound quality identification method, comprising: converting a format of a to-be-identified sound file into a preset reference audio format; performing framing on the to-be-identified sound file to obtain a plurality of frames of the to-be-identified sound file; performing Fourier transformation processing on the to-be-identified sound file in the reference audio format, to obtain a spectrum of each frame of the to-be-identified sound file; performing model matching according to the spectrum of each frame of the to-be-identified sound file, to obtain a preliminary classification result of the to-be-identified sound file; determining an energy change point of the to-be-identified sound file according to the spectrum of each frame of the to-be-identified sound file; and determining a sound quality of the to-be-identified sound file according to the preliminary classification result of the to-be-identified sound file and the energy change point of the to-be-identified sound file.
2. The method according to claim 1, wherein the reference audio format is a pulse code modulation (PCM) file format with a sampling rate of approximately 44.1 KHz and sampling precision of approximately 16 bits.
3. The method according to claim 1, wherein the converting a format of a to-be-identified sound file into a preset reference audio format comprises: detecting whether the to-be-identified sound file is in the reference audio format; and when it is determined that the to-be-identified sound file is not in the reference audio format, decoding the to-be-identified sound file into the reference audio format.
4. The method according to claim 1, wherein the performing framing on the to-be-identified sound file in the reference audio format comprises: setting a specified length and a frame shift, and performing framing on the to-be-identified sound file according to the set specified length and frame shift.
5. The method according to claim 1, wherein the performing model matching according to the spectrum of each frame of the to-be-identified sound file comprises: separately performing segmentation on frequency bands in the spectrum of each frame to obtain a plurality of frequency band segments; for each frequency band segment, summing up an energy value of each of the frequency bands in the frequency band segment, to obtain an energy value of each frequency band segment of the sound file determining a fading eigenvector of the to-be-identified sound file according to the energy value of each frequency band segment of the to-be-identified sound file; and performing model matching on the to-be-identified sound file according to the fading eigenvector of the to-be-identified sound file, to obtain the preliminary classification result of the to-be-identified sound file.
6. The method according to claim 5, wherein the separately performing segmentation on frequency bands in the spectrum of each frame comprises: setting a frequency band number and a frequency shift for each frequency band segment, and performing segmentation according to the set frequency band number and frequency shift.
7. The method according to claim 5, wherein the fading eigenvector Y of the to-be-identified sound file is obtained by using the following formula:
description="In-line Formulae" end="lead"?yi=xi+1−xi(i∈[1,L−1])description="In-line Formulae" end="tail"? wherein xi(i∈[1,L]) indicates an energy value of an ith frequency band segment of the to-be-identified sound file, and i is an integer; and the preliminary classification result of the to-be-identified sound file is a confidence level q, which is obtained by using the following formula:
description="In-line Formulae" end="lead"?q=WY description="In-line Formulae" end="tail"? wherein W is a linear correlation coefficient corresponding to a model used when the model matching is performed.
8. The method according to claim 1, wherein the determining an energy change point of the to-be-identified sound file according to the spectrum of each frame of the to-be-identified sound file comprises: determining a highest spectrum dividing-line of each frame of the to-be-identified sound file; according to the frequency band with the highest spectrum dividing-line of each frame, separately counting a total number of highest spectrum dividing-lines in each frequency band and recording the total number as ri(i∈[1,M]), wherein ri indicates a number of highest spectrum dividing-lines in an ith frequency band; and M is a total number of frequency bands; summing up all s number of close points in ri(i∈[1,M]), to obtain s number of neighboring frequency bands with largest energy sums; and determining a frequency corresponding to an optimal transformation frequency band in the s number of neighboring frequency bands with largest energy sums, and using the frequency as an energy change point of the to-be-identified sound file.
9. The method according to claim 8, wherein the determining a highest spectrum dividing-line of each frame of the to-be-identified sound file comprises: for each frame, traversing all frequency bands from a high frequency to a low frequency, wherein a first frequency band whose energy value is greater than a first threshold is a highest spectrum dividing-line of this frame.
10. The method according to claim 8, wherein the frequency c corresponding to the optimal transformation frequency band may be obtained by using the following formula: wherein s is a numerical value; l is a number of a first frequency band in the s number of neighboring frequency bands with largest energy sums; M is a frequency band number obtained after the Fourier transformation is performed on the to-be-identified sound file; and ri(i∈[1,M]) is the number of the highest spectrum dividing-lines in the ith frequency band.
11. The method according to claim 1, wherein the determining sound quality of the to-be-identified sound file according to the preliminary classification result of the to-be-identified sound file and the energy change point of the to-be-identified sound file comprises: determining that the preliminary classification result of the to-be-identified sound file is a confidence level q, and the energy change point is a frequency c corresponding to the optimal transformation frequency band; calculating two intermediate parameters d and e as:
description="In-line Formulae" end="lead"?d=c−20000;description="In-line Formulae" end="tail"?
description="In-line Formulae" end="lead"?e=q−0.5;description="In-line Formulae" end="tail"? when both d and e are greater than 0, determining that the to-be-identified sound file is a lossless file; and when both d and e are less than 0, determining that the to-be-identified sound file is a lossy file.
12. A sound file sound quality identification method, comprising: converting a format of a to-be-identified sound file into a preset reference audio format; performing framing on the to-be-identified sound file to obtain a plurality of frames of the to-be-identified sound file; performing Fourier transformation processing on the to-be-identified sound file in the reference audio format, to obtain a spectrum of each frame of the to-be-identified sound file; performing model matching according to the spectrum of each frame of the to-be-identified sound file, to obtain a preliminary classification result of the to-be-identified sound file; and determining a sound quality of the to-be-identified sound file according to the preliminary classification result of the to-be-identified sound file.
13. The method according to claim 12, wherein the performing model matching according to the spectrum of each frame of the to-be-identified sound file comprises: separately performing segmentation on frequency bands in the spectrum of each frame to obtain a plurality of frequency band segments; for each frequency band segment, summing up an energy value of each of the frequency bands in the frequency band segment, to obtain an energy value of each frequency band segment of the sound file determining a fading eigenvector of the to-be-identified sound file according to the energy value of each frequency band segment of the to-be-identified sound file; and performing model matching on the to-be-identified sound file according to the fading eigenvector of the to-be-identified sound file, to obtain the preliminary classification result of the to-be-identified sound file.
14. The method according to claim 13, wherein the fading eigenvector Y of the to-be-identified sound file is obtained by using the following formula:
description="In-line Formulae" end="lead"?yi=xi+1−xi(i∈[1,L−1])description="In-line Formulae" end="tail"? wherein xi(i∈[1, L]) indicates an energy value of an ith frequency band segment of the to-be-identified sound file, and i is an integer; and the preliminary classification result of the to-be-identified sound file is a confidence level q, which is obtained by using the following formula:
description="In-line Formulae" end="lead"?q=WY description="In-line Formulae" end="tail"? wherein W is a linear correlation coefficient corresponding to a model used when the model matching is performed.
15. The method according to claim 12, wherein the determining sound quality of the to-be-identified sound file according to the preliminary classification result of the to-be-identified sound file comprises: determining that the preliminary classification result of the to-be-identified sound file is a confidence level q; when q is greater than a preset threshold, determining that the to-be-identified sound file is a lossless file; and when q is less than or equal to the preset threshold, determining that the to-be-identified sound file is a lossy file.
16. A sound file sound quality identification method, comprising: converting a format of a to-be-identified sound file into a preset reference audio format; performing framing on the to-be-identified sound file to obtain a plurality of frames of the to-be-identified sound file; performing Fourier transformation processing on the to-be-identified sound file in the reference audio format, to obtain a spectrum of each frame of the to-be-identified sound file; determining an energy change point of the to-be-identified sound file according to the spectrum of each frame of the to-be-identified sound file; and determining sound quality of the to-be-identified sound file according to the energy change point of the to-be-identified sound file.
17. The method according to claim 16, wherein the determining an energy change point of the to-be-identified sound file according to the spectrum of each frame of the to-be-identified sound file comprises: determining a highest spectrum dividing-line of each frame of the to-be-identified sound file; according to the frequency band with the highest spectrum dividing-line of each frame, separately counting a total number of highest spectrum dividing-lines in each frequency band and recording the total number as ri(i∈[1,M]), wherein ri indicates a number of highest spectrum dividing-lines in an ith frequency band; and M is a total number of frequency bands; summing up all s number of close points in ri(i∈[1,M]), to obtain s number of neighboring frequency bands with largest energy sums; and determining a frequency corresponding to an optimal transformation frequency band in the s number of neighboring frequency bands with largest energy sums, and using the frequency as an energy change point of the to-be-identified sound file.
18. The method according to claim 17, wherein the determining a highest spectrum dividing-line of each frame of the to-be-identified sound file comprises: for each frame, traversing all frequency bands from a high frequency to a low frequency, wherein a first frequency band whose energy value is greater than a first threshold is a highest spectrum dividing-line of this frame.
19. The method according to claim 17, wherein the frequency c corresponding to the optimal transformation frequency band may be obtained by using the following formula: wherein s is a numerical value; l is a number of a first frequency band in the s number of neighboring frequency bands with largest energy sums; M is a frequency band number obtained after the Fourier transformation is performed on the to-be-identified sound file; and ri(i∈[1,M]) is the number of the highest spectrum dividing-lines in the ith frequency band.
20. The method according to claim 16, wherein the determining sound quality of the to-be-identified sound file according to the energy change point of the to-be-identified sound file comprises: determining that the energy change point is a frequency c corresponding to an optimal transformation frequency band; when the frequency c is greater than a preset threshold, determining that the to-be-identified sound file is a lossless file; and when the frequency c is less than or equal to a preset threshold, determining that the to-be-identified sound file is a lossy file.
</claims>
</document>
