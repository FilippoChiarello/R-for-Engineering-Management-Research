<document>

<filing_date>
2019-04-26
</filing_date>

<publication_date>
2021-01-26
</publication_date>

<priority_date>
2018-04-27
</priority_date>

<ipc_classes>
H04N19/563,H04N19/80
</ipc_classes>

<assignee>
PANASONIC INTELLECTUAL PROPERTY
</assignee>

<inventors>
NISHI TAKAHIRO
TOMA TADAMASA
ABE, KIYOFUMI
KANOH, RYUICHI
</inventors>

<docdb_family_id>
68292896
</docdb_family_id>

<title>
Encoder, decoder, encoding method, and decoding method for generating a prediction image using a plurality of pixels generated outside of a boundary of a reference picture on which smoothing has been performed
</title>

<abstract>
An encoder is an encoder which encodes a video, and includes: circuitry; and memory. The circuitry, using the memory, derives a motion vector of a current block included in a current picture, by referring to a reference picture different from the current picture; when a reference region indicated by the motion vector includes a region outside a boundary of the reference picture, performs padding for generating a plurality of pixels outside the boundary in the reference region, using one of a plurality of pixels inside the boundary of the reference picture, to generate the plurality of pixels outside the boundary; performs smoothing on the plurality of pixels outside the boundary; and generates a prediction image, using the plurality of pixels outside the boundary on which the smoothing has been performed.
</abstract>

<claims>
1. An encoder which encodes a video, comprising: circuitry; and memory, wherein using the memory, the circuitry, in operation, performs: deriving a motion vector of a current block included in a current picture, by referring to a reference picture different from the current picture; when a reference region indicated by the motion vector includes a region outside a boundary of the reference picture, padding using at least one pixel inside the boundary of the reference picture to generate first pixels outside the boundary; smoothing on the first pixels outside the boundary of the reference picture to change each of first values of the first pixels to smooth the first values, by using pixels next to each of the first pixels to be changed, the first pixels being included in the pixels outside the boundary of the reference picture generated by padding; and encoding the current block by referring to the reference region including the first pixels on which the smoothing has been performed, the smoothing is smoothing filter processing which uses, as an input, a plurality of pixels aligned in a direction parallel to the boundary of the reference picture among the first pixels outside the boundary, and the circuitry, when performing the smoothing, applies a filter having a first strength to a plurality of pixels included in a first region among the first pixels outside the boundary, and a filter having a second strength greater than the first strength to a plurality of pixels included in a second region among the first pixels outside the boundary, the second region being located farther from the boundary of the reference picture than the first region is.
2. The encoder according to claim 1, wherein the circuitry, when performing the padding, makes at least one copy of the at least one pixel inside the boundary of the reference picture, to be aligned in a direction perpendicular to the boundary, the at least one pixel inside the boundary of the reference picture being at an end of the reference picture.
3. The encoder according to claim 1, wherein the smoothing is not performed on, among the first pixels outside the boundary, a plurality of pixels generated by performing the padding using pixels at four corners of the boundary of the reference picture among the at least one pixel inside the boundary of the reference picture.
4. The encoder according to claim 1, wherein the circuitry, further, when performing the smoothing, moderates a boundary line between the at least one pixel inside the boundary of the reference picture and the first pixels outside the boundary of the reference picture.
5. A decoder which decodes a video, comprising: circuitry; and memory, wherein using the memory, the circuitry, in operation, performs: deriving a motion vector of a current block included in a current picture, by referring to a reference picture different from the current picture; when a reference region indicated by the motion vector includes a region outside a boundary of the reference picture, padding using at least one pixel inside the boundary of the reference picture to generate first pixels outside the boundary; smoothing on first pixels outside the boundary of the reference picture to change each of first values of the first pixels to smooth the first values, by using pixels next to each of the first pixels to be changed, the first pixels being included in the pixels outside the boundary of the reference picture generated by padding; and decoding the current block by referring to the reference region including the first pixels on which the smoothing has been performed, the smoothing is smoothing filter processing which uses, as an input, a plurality of pixels aligned in a direction parallel to the boundary of the reference picture among the first pixels outside the boundary, and the circuitry, when performing the smoothing, applies a filter having a first strength to a plurality of pixels included in a first region among the first pixels outside the boundary, and a filter having a second strength greater than the first strength to a plurality of pixels included in a second region among the first pixels outside the boundary, the second region being located farther from the boundary of the reference picture than the first region is.
6. The decoder according to claim 5, wherein the circuitry, when performing the padding, makes at least one copy of the at least one pixel inside the boundary of the reference picture, to be aligned in a direction perpendicular to the boundary, the at least one pixel inside the boundary of the reference picture being at an end of the reference picture.
7. The decoder according to claim 5, wherein the smoothing is not performed on, among the first pixels outside the boundary, a plurality of pixels generated by performing the padding using pixels at four corners of the boundary of the reference picture among the at least one pixel inside the boundary of the reference picture.
8. The decoder according to claim 7, wherein the circuitry, further, when performing the smoothing, moderates a boundary line between the at least one pixel inside the boundary of the reference picture and the plurality of pixels outside the boundary of the reference picture.
9. An encoding method for encoding a video, comprising: deriving a motion vector of a current block included in a current picture, by referring to a reference picture different from the current picture; when a reference region indicated by the motion vector includes a region outside a boundary of the reference picture, performing padding using at least one pixel inside the boundary of the reference picture to generate first pixels outside the boundary; performing smoothing on the first pixels outside the boundary of the reference picture to change each of first values of the first pixels to smooth the first values, by using pixels next to each of the first pixels to be changed, the first pixels being included in the pixels outside the boundary of the reference picture generated by padding; and encoding the current block by referring to the reference region including the first pixels on which the smoothing has been performed, wherein the smoothing is smoothing filter processing which uses, as an input, a plurality of pixels aligned in a direction parallel to the boundary of the reference picture among the first pixels outside the boundary, and the performing the smoothing includes applying a filter having a first strength to a plurality of pixels included in a first region among the first pixels outside the boundary, and a filter having a second strength greater than the first strength to a plurality of pixels included in a second region among the first pixels outside the boundary, the second region being located farther from the boundary of the reference picture than the first region is.
10. A decoding method for decoding a video, comprising: deriving a motion vector of a current block included in a current picture, by referring to a reference picture different from the current picture; when a reference region indicated by the motion vector includes a region outside a boundary of the reference picture, performing padding for using at least one pixel inside the boundary of the reference picture to generate first pixels outside the boundary; performing smoothing on the first pixels outside the boundary of the reference picture to change each of first values of the first pixels to smooth the first values, by using pixels next to each of the first pixels to be changed, the first pixels being included in the pixels outside the boundary of the reference picture generated by padding; and decoding the current block by referring to the reference region including the first pixels on which the smoothing has been performed, wherein the smoothing is smoothing filter processing which uses, as an input, a plurality of pixels aligned in a direction parallel to the boundary of the reference picture among the first pixels outside the boundary, and the performing the smoothing includes applying a filter having a first strength to a plurality of pixels included in a first region among the first pixels outside the boundary, and a filter having a second strength greater than the first strength to a plurality of pixels included in a second region among the first pixels outside the boundary, the second region being located farther from the boundary of the reference picture than the first region is.
</claims>
</document>
