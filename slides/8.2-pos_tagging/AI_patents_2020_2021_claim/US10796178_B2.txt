<document>

<filing_date>
2017-12-13
</filing_date>

<publication_date>
2020-10-06
</publication_date>

<priority_date>
2016-12-15
</priority_date>

<ipc_classes>
G06K9/00,G06K9/20
</ipc_classes>

<assignee>
BEIJING KUANGSHI TECHNOLOGY COMPANY
MEGVII (BEIJING) TECHNOLOGY COMPANY
</assignee>

<inventors>
FAN, HAOQIANG
CHEN, KEQING
</inventors>

<docdb_family_id>
62561714
</docdb_family_id>

<title>
Method and device for face liveness detection
</title>

<abstract>
A method for face liveness detection and a device for face liveness detection. The method for face liveness detection includes: performing an illumination liveness detection and obtaining an illumination liveness detection result; and determining whether or not a face to be verified passes the face liveness detection at least according to the illumination liveness detection result. Performing of the illumination liveness detection and obtaining of the illumination liveness detection result includes: acquiring a plurality of illumination images of the face to be verified, in which the plurality of illumination images are captured in a process of dynamically changing mode of illumination light irradiated on the face to be verified and are respectively corresponding to various modes of the illumination light; and obtaining the illumination liveness detection result according to a light reflection characteristic of the face to be verified in the plurality of illumination images.
</abstract>

<claims>
1. A method for face liveness detection, comprising: performing an illumination liveness detection and obtaining an illumination liveness detection result; and determining whether or not a face to be verified passes the face liveness detection at least according to the illumination liveness detection result; wherein performing of the illumination liveness detection and obtaining of the illumination liveness detection result comprise: acquiring a plurality of illumination images of the face to be verified, wherein the plurality of illumination images are captured in a process of dynamically changing mode of illumination light irradiated on the face to be verified and are respectively corresponding to various modes of the illumination light; and obtaining the illumination liveness detection result according to a light reflection characteristic of the face to be verified in the plurality of illumination images, wherein the method further comprises: performing an action liveness detection before determining whether or not the face to be verified passes the face liveness detection; wherein performing of the action liveness detection comprises: outputting an action instruction used for notifying the face to be verified to execute an action corresponding to the action instruction; acquiring an action image of the face to be verified; detecting the action executed by the face to be verified on the basis of the action image, so as to obtain an action detection result; and obtaining an action liveness detection result according to the action detection result and the action instruction; and determining of whether or not the face to be verified passes the face liveness detection at least according to the illumination liveness detection result comprises: determining whether or not the face to be verified passes the face liveness detection according to both of the illumination liveness detection result and the action liveness detection result.
2. The method for face liveness detection according to claim 1, wherein acquiring of the plurality of illumination images of the face to be verified comprises: dynamically changing the mode of the illumination light irradiated on the face to be verified, and capturing the plurality of illumination images, which are respectively corresponding to the various modes of the illumination light, of the face to be verified; obtaining of the illumination liveness detection result according to the light reflection characteristic of the face to be verified in the plurality of illumination images comprises: analyzing the plurality of illumination images, acquiring the light reflection characteristic of the face to be verified in the plurality of illumination images, and obtaining the illumination liveness detection result according to the light reflection characteristic; and dynamically changing the mode of the illumination light irradiated on the face to be verified comprises: dynamically changing color and/or position of the illumination light.
3. The method for face liveness detection according to claim 2, wherein light emitted from a display screen is used as the illumination light irradiated on the face to be verified; and a mode of the light emitted from the display screen is dynamically changed by changing contents displayed on the display screen, so that the mode of the illumination light irradiated on the face to be verified is dynamically changed.
4. The method for face liveness detection according to claim 1, wherein number of times for performing the action liveness detection is increased by one for each performance of the action liveness detection, so as to obtain the number of times for performing the action liveness detection; and after the action liveness detection result is obtained and in a case that the action liveness detection result indicates that the face to be verified fails to pass the action liveness detection, the method further comprises: outputting first error information used for notifying a failure of the action liveness detection; determining whether or not the number of times for performing the action liveness detection is greater than a first counting threshold; and determining whether or not the face to be verified passes the face liveness detection at least according to the illumination liveness detection result in a case that the number of times for performing the action liveness detection is greater than the first counting threshold, and performing the action liveness detection again in a case that the number of times for performing the action liveness detection is not greater than the first counting threshold, or performing the illumination liveness detection again in a case that the illumination liveness detection is performed before the action liveness detection and the number of times for performing the action liveness detection is not greater than the first counting threshold.
5. The method for face liveness detection according to claim 1, further comprising: determining whether or not a preset requirement of an image acquisition condition of the face to be verified is satisfied before performing the illumination liveness detection, so as to perform the illumination liveness detection in a case that the preset requirement of the image acquisition condition is satisfied, wherein the image acquisition condition at least comprises one or more selected from a position of the face to be verified, a pose of the face to be verified and a size of the face to be verified in a real-time image acquired by an image acquisition device.
6. The method for face liveness detection according to claim 5, wherein the image acquisition condition further comprises a blurriness of the real-time image and a shielding state of the face to be verified in the real-time image.
7. The method for face liveness detection according to claim 5, wherein determining of whether or not the preset requirement of the image acquisition condition of the face to be verified is satisfied comprises: adopting the image acquisition device to acquire the real-time image of the face to be verified; displaying a reference part of the face to be verified in the real-time image and a reference region in real time; and determining whether or not the preset requirement of the image acquisition condition is satisfied at least according to whether or not the reference part of the face to be verified in the real-time image falls within the reference region.
8. The method for face liveness detection according to claim 7, wherein the reference part of the face to be verified in the real-time image and the reference region are respectively the face to be verified in the real-time image and a face preview region; or the reference part of the face to be verified in the real-time image and the reference region are respectively a specific facial part of the face to be verified in the real-time image and a targeted part region.
9. The method for face liveness detection according to claim 7, wherein determining of whether or not the preset requirement of the image acquisition condition is satisfied at least according to whether or not the reference part of the face to be verified in the real-time image falls within the reference region comprises: determining that the preset requirement of the image acquisition condition is satisfied in a case that the reference part of the face to be verified in the real-time image falls within the reference region; and determining that the preset requirement of the image acquisition condition is not satisfied in a case that the reference part of the face to be verified in the real-time image fails to fall within the reference region.
10. The method for face liveness detection according to claim 7, wherein determining of whether or not the preset requirement of the image acquisition condition is satisfied at least according to whether or not the reference part of the face to be verified in the real-time image falls within the reference region comprises: determining that the preset requirement of the image acquisition condition is satisfied in a case that the reference part of the face to be verified in the real-time image falls within the reference region and a ratio of a size of the reference part of the face to be verified to a size of the real-time image is greater than a ratio threshold; and determining that the preset requirement of the image acquisition condition is not satisfied in a case that the reference part of the face to be verified in the real-time image fails to fall within the reference region or the ratio of the size of the reference part of the face to be verified to the size of the real-time image is less than or equal to the ratio threshold.
11. The method for face liveness detection according to claim 7, wherein determining of whether or not the preset requirement of the image acquisition condition of the face to be verified is satisfied further comprises: acquiring posture information of the image acquisition device; determining whether or not the image acquisition device is vertically placed according to the posture information; and determining that the preset requirement of the image acquisition condition is not satisfied in a case that the image acquisition device is not vertically placed.
12. The method for face liveness detection according to claim 7, further comprising: outputting first prompt information during and/or before acquiring the real-time image of the face to be verified with the image acquisition device, wherein the first prompt information is used for notifying the face to be verified to be directly opposite to the image acquisition device and to be closer to the image acquisition device.
13. The method for face liveness detection according to claim 5, further comprising: outputting adjustment prompt information in a case that the preset requirement of the image acquisition condition is not satisfied, wherein the adjustment prompt information is used for notifying the face to be verified to make adjustment allowing the preset requirement of the image acquisition condition to be satisfied.
14. The method for face liveness detection according to claim 13, wherein outputting of the adjustment prompt information in the case that the preset requirement of the image acquisition condition is not satisfied comprises: outputting the adjustment prompt information in a case that there is no face to be verified in the real-time image, so as to notify a person having the face to be verified to move toward a direction allowing the face to be verified to be in the real-time image; outputting the adjustment prompt information in a case that the position of the face to be verified in the real-time image is deviated from a face preview region, so as to notify the person having the face to be verified to move towards a direction opposite to a deviation direction; outputting the adjustment prompt information in a case that a blurriness of the real-time image exceeds a preset blurriness threshold, so as to notify user to clean the image acquisition device; outputting the adjustment prompt information in a case that the pose of the face to be verified in the real-time image is in a face upward state, so as to notify the person having the face to be verified to lower his/her head; outputting the adjustment prompt information in a case that the pose of the face to be verified in the real-time image is in a face downward state, so as to notify the person having the face to be verified to raise his/her head; outputting the adjustment prompt information in a case that the pose of the face to be verified in the real-time image is tilting to the left or the right, so as to notify the person having the face to be verified to look straight ahead; outputting the adjustment prompt information in a case that the size of the face to be verified in the real-time image is less than a first threshold, so as to notify the person having the face to be verified to be closer to the image acquisition device; outputting the adjustment prompt information in a case that the size of the face to be verified in the real-time image is greater than a second threshold, so as to notify the person having the face to be verified to be away from the image acquisition device; and outputting the adjustment prompt information in a case that a specific facial part of the face to be verified in the real-time image is shielded by an occlusion, so as to notify the person having the face to be verified to remove the occlusion and to expose the specific facial part.
15. The method for face liveness detection according to claim 5, wherein determining of whether or not the preset requirement of the image acquisition condition of the face to be verified is satisfied comprises: adopting the image acquisition device to acquire the real-time image of the face to be verified; displaying a simulated face region changing along with the face to be verified in real time according to the image acquisition condition, wherein the face to be verified is displayed in the simulated face region; displaying in real time a targeted face region, which is used for indicating an alignment of the face to be verified; and determining whether or not the simulated face region is aligned with the targeted face region, wherein it is determined that the preset requirement of the image acquisition condition of the face to be verified is satisfied in a case that the simulated face region is aligned with the targeted face region, and it is determined that the preset requirement of the image acquisition condition of the face to be verified is not satisfied in a case that the simulated face region is not aligned with the targeted face region.
16. The method for face liveness detection according to claim 15, wherein determining of whether or not the simulated face region is aligned with the targeted face region comprises: determining that the simulated face region is aligned with the targeted face region in a case that the simulated face region is within the targeted face region and a ratio of a size of the simulated face region to a size of the real-time image is greater than a first preset ratio; and determining that the simulated face region is not aligned with the targeted face region in a case that the simulated face region is not within the targeted face region or the ratio of the size of the simulated face region to the size of the real-time image is less than or equal to the first preset ratio.
17. The method for face liveness detection according to claim 15, wherein determining of whether or not the simulated face region is aligned with the targeted face region comprises: determining that the simulated face region is aligned with the targeted face region in a case that the simulated face region is within the targeted face region and a ratio of a size of the simulated face region to a size of the targeted face region is greater than a second preset ratio; and determining that the simulated face region is not aligned with the targeted face region in a case that the simulated face region is not within the targeted face region or the ratio of the size of the simulated face region to the size of the targeted face region is less than or equal to the second preset ratio.
18. The method for face liveness detection according to claim 5, wherein determining whether or not the preset requirement of the image acquisition condition of the face to be verified is satisfied again in a case that the face to be verified moves during acquiring the illumination images and a moving distance is beyond an allowable range.
19. The method for face liveness detection according to claim 5, wherein number of times for performing the illumination liveness detection is increased by one for each performance of the illumination liveness detection, so as to obtain the number of times for performing the illumination liveness detection; and after the illumination liveness detection result is obtained, and in a case that the illumination liveness detection result indicates that the face to be verified fails to pass the illumination liveness detection, the method further comprises: outputting second error information used for notifying a failure of the illumination liveness detection; determining whether or not the number of times for performing the illumination liveness detection is greater than a second counting threshold; and determining whether or not the face to be verified passes the face liveness detection at least according to the illumination liveness detection result in a case that the number of times for performing the illumination liveness detection is greater than the second counting threshold, and determining whether or not the preset requirement of the image acquisition condition of the face to be verified is satisfied or performing the illumination liveness detection again in a case that the number of times for performing the illumination liveness detection is not greater than the second counting threshold.
20. The method for face liveness detection according to claim 1, further comprising: outputting second prompt information during and/or before acquiring the illumination images, wherein the second prompt information is used for notifying the face to be verified to keep still within a preset time period of the illumination liveness detection.
21. A device for face liveness detection, comprising: a processor, a memory and computer program instructions stored in the memory; wherein upon the processor running the computer program instructions, the device for face liveness detection performs a following method comprising: acquiring a plurality of illumination images of a face to be verified, wherein the plurality of illumination images are captured in a process of dynamically changing mode of illumination light irradiated on the face to be verified and are respectively corresponding to various modes of the illumination light; obtaining an illumination liveness detection result according to a light reflection characteristic of the face to be verified in the plurality of illumination images; and determining whether or not the face to be verified passes the face liveness detection at least according to the illumination liveness detection result, wherein the method performed by the device for face liveness detection further comprises: performing an action liveness detection before determining whether or not the face to be verified passes the face liveness detection; wherein performing of the action liveness detection comprises: outputting an action instruction used for notifying the face to be verified to execute an action corresponding to the action instruction; acquiring an action image of the face to be verified; detecting the action executed by the face to be verified on the basis of the action image, so as to obtain an action detection result; and obtaining an action liveness detection result according to the action detection result and the action instruction; and determining of whether or not the face to be verified passes the face liveness detection at least according to the illumination liveness detection result comprises: determining whether or not the face to be verified passes the face liveness detection according to both of the illumination liveness detection result and the action liveness detection result.
22. A device for face liveness detection, comprising: a light source, an image acquisition device, a processing device and an output device, wherein the light source is configured to dynamically change mode of illumination light irradiated on a face to be verified; the image acquisition device is configured to acquire a plurality of illumination images, which are respectively corresponding to various modes of the illumination light, of the face to be verified; the processing device is configured to obtain an illumination liveness detection result according to a light reflection characteristic of the face to be verified in the plurality of illumination images, and is further configured to determine whether or not the face to be verified passes the face liveness detection at least according to the illumination liveness detection result; and the output device is configured to output an action instruction, wherein the action instruction is used for notifying the face to be verified to execute an action corresponding to the action instruction; the image acquisition device is further configured to acquire an action image of the face to be verified; the processing device is further configured to obtain an action detection result by detecting the action executed by the face to be verified on the basis of the action image, and obtain an action liveness detection result according to the action detection result and the action instruction; and the processing device is further configured to determine whether or not the face to be verified passes the face liveness detection according to both of the illumination liveness detection result and the action liveness detection result.
23. The device for face liveness detection according to claim 22, further comprising: a condition determination device, wherein the image acquisition device is further configured to acquire a real-time image; the condition determination device is configured to determine whether or not an preset requirement of the image acquisition condition of the face to be verified is satisfied before acquiring the illumination images; and the image acquisition condition at least comprises one or more selected from a position of the face to be verified, a pose of the face to be verified and a size of the face to be verified, in the real-time image acquired by the image acquisition device.
</claims>
</document>
