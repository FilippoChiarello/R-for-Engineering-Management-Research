<document>

<filing_date>
2018-12-10
</filing_date>

<publication_date>
2020-12-01
</publication_date>

<priority_date>
2018-12-10
</priority_date>

<ipc_classes>
H01Q21/28,H01Q21/29,H01Q25/00,H04B17/327,H04B7/06
</ipc_classes>

<assignee>
AMAZON TECHNOLOGIES
</assignee>

<inventors>
EDARA, KIRAN KUMAR
LEE, TZUNG-I
SHUKLA, ASHISH KUMAR
TSAI, KUN TING
ZAKARIA, OMAR FAWAZHASHIM
MIRKAMALI, ALI
Wagholikar, Sarang
</inventors>

<docdb_family_id>
73554790
</docdb_family_id>

<title>
Hybrid directional antenna system
</title>

<abstract>
A wireless device includes a radio, a first directional antenna, a second directional antenna, an omnidirectional antenna, and a switch selectively coupled between the radio and the first directional antenna, the second directional antenna, and the omnidirectional antenna. A processor is coupled to the switch and to, for a frame: determine, based on an arbitration table, a destination medium access control address of a client wireless device and identifiers of antennas for transmitting the frame and receiving acknowledgement data; cause the switch to couple the radio to the first directional antenna; transmit the frame to the client wireless device via the first directional antenna, wherein the first client wireless device is located along a first direction with respect to the wireless device; cause the switch to couple the radio to the omnidirectional antenna; and receive an acknowledgment, corresponding to the frame, from the client wireless device via the omnidirectional antenna.
</abstract>

<claims>
1. A wireless device comprising: a radio; a first directional antenna; a second directional antenna; an omnidirectional antenna; a switch selectively coupled between the radio and the first directional antenna, the second directional antenna, and the omnidirectional antenna; and a processor coupled to the switch, wherein the processor is to, for a first frame of a plurality of frames: determine, based on an arbitration table, a first destination medium access control (MAC) address of a first client wireless device, wherein the arbitration table includes for each frame of the plurality of frames: (a) a frame identifier, (b) destination MAC address for the frame, (c) identifier of an antenna for transmitting the frame, and (d) identifier of an antenna for receiving acknowledgement data for the frame; add, to the first frame, metadata comprising the first destination MAC address, an identifier of the first directional antenna, and an identifier of the omnidirectional antenna retrieved from the arbitration table; cause, using the metadata in the first frame, the switch to couple the radio to the first directional antenna; transmit the first frame to the first client wireless device via the first directional antenna, wherein the first client wireless device is located along a first direction with respect to the wireless device; cause, using the metadata in the first frame, the switch to couple the radio to the omnidirectional antenna; and receive a first acknowledgment, corresponding to the first frame, from the first client wireless device via the omnidirectional antenna.
2. The wireless device of claim 1, wherein the processor is further to, for a second frame of the plurality of frames: determine a second destination MAC address of a second client wireless device; cause the switch to couple the radio to the second directional antenna; transmit the second frame to the second client wireless device via the second directional antenna concurrently with transmission of the first frame via the first directional antenna, wherein the second client wireless device is located along a second direction with respect to the wireless device; and receive a second acknowledgement, corresponding to the second frame, from the second client wireless device via the second directional antenna.
3. The wireless device of claim 1, further comprising a third directional antenna selectively coupled to the radio and to the switch and configured to radiate radio frequency energy in a third direction, wherein the processor is further to: transmit a probing signal via the first directional antenna, the second directional antenna, and the third directional antenna; receive, from the first client wireless device in response to the probing signal, a first signal strength value via the first directional antenna, a second signal strength value via the second directional antenna, and a third signal strength value via the third directional antenna; determine that the third signal strength value is greater than the first and the second signal strength values; and transmit a subsequent frame of the plurality of frames to the first client wireless device via the third directional antenna, wherein the first client wireless device has moved from being located along the first direction to being located along the third direction.
4. The wireless device of claim 1, further comprising a third directional antenna selectively coupled to the radio and to the switch, wherein the processor is further to: receive, for the first client wireless device, signal quality information and criteria data, the criteria data comprising at least one of bandwidth requirements, traffic patterns, supported modes, or application level priority for the first client wireless device; and transmit, based on the signal quality information and the criteria data, a subsequent frame of the plurality of frames to the first client wireless device via one of the second directional antenna, the third directional antenna, or the omnidirectional antenna.
5. The wireless device of claim 1, further comprising: a third directional antenna selectively coupled to the radio and to the switch; and a baseband channel estimator coupled to the processor and to the radio, wherein the baseband channel estimator is to detect receipt of channel properties information that represent wireless signal propagation characteristics of wireless signals received from the first client wireless device; and wherein the processor is further to: determine, from the channel properties information, received signal quality information; and transmit, based on the received signal quality information, a subsequent frame of the plurality of frames to the first client wireless device via one of the second directional antenna, the third directional antenna, or the omnidirectional antenna.
6. The wireless device of claim 1, further comprising an integrated system-on-a-chip (SoC) that comprises the radio and a general purpose input/output (GPIO) multiplexer coupled to the radio, the GPIO multiplexer to selectively control the switch, which is located outside of the integrated SoC.
7. The wireless device of claim 1, wherein the first acknowledgment from the first client wireless device further includes data comprising at least one of location data, received signal strength information (RSSI), physical layer (PHY) rate, or channel state information (CSI) of the first client wireless device.
8. The wireless device of claim 1, wherein the processor is further to: retrieve, from the arbitration table for a second frame of the plurality of frames, a second destination MAC address of a second client wireless device and the identifier of the omnidirectional antenna; cause the switch to couple the radio to the omnidirectional antenna; transmit the second frame to the second client wireless device via the omnidirectional antenna; receive, from the second client wireless device, information about a weak hidden node interrupting transmission by the omnidirectional antenna; and transmit, based on the information about the weak hidden node, a subsequent frame of the plurality of frames associated with the second destination MAC address via one of the first directional antenna or the second directional antenna.
9. The wireless device of claim 1, wherein the processor is further to: retrieve, from the arbitration table for a second frame of the plurality of frames, a second destination MAC address of a second client wireless device, the identifier of the second directional antenna, and the identifier of the omnidirectional antenna; cause the switch to couple the radio to the second directional antenna; transmit the second frame to the second client wireless device via the second directional antenna; receive, from the second client wireless device, information about detection of a strong hidden node interrupting transmission by the second directional antenna; and transmit, based on the information about the strong hidden node, a subsequent frame of the plurality of frames associated with the second destination MAC address via the omnidirectional antenna.
10. A method comprising: operating a wireless access point (AP) device, wherein the wireless AP device comprises a radio, a first directional antenna, a second directional antenna, an omnidirectional antenna, and a switch selectively coupled between the radio and the first directional antenna, the second directional antenna, and the omnidirectional antenna, wherein operating the wireless AP device comprises: determining, based on an arbitration table for a first frame of a plurality of frames, a first destination medium access control (MAC) address of a first client wireless device, wherein the arbitration table includes for each frame of the plurality of frames: (a) a frame identifier, (b) destination MAC address for the frame, (c) identifier of an antenna for transmitting the frame, and (d) identifier of an antenna for receiving acknowledgement data for the frame; adding, to the first frame, metadata comprising the first destination MAC address, an identifier of the first directional antenna, and an identifier of the omnidirectional antenna retrieved from the arbitration table; causing, by a processor of the wireless AP device, using the metadata in the first frame, the switch to couple the radio to the first directional antenna; transmitting the first frame to the first client wireless device via the first directional antenna, wherein the first client wireless device is located along a first direction with respect to the AP wireless device; causing, by the processor using the metadata in the first frame, the switch to couple the radio to the omnidirectional antenna; and receiving a first acknowledgment, corresponding to the first frame, from the first client wireless device via the omnidirectional antenna.
11. The method of claim 10, wherein operating the wireless AP device further comprises: receiving a location of the first client wireless device by detecting received signal strength information (RSSI) back from the first client wireless device via at least one of the first directional antenna or the second directional antenna; and transmitting, based on the RSSI, a subsequent frame of the plurality of frames to the first client wireless device via one of the second directional antenna, a third directional antenna, or the omnidirectional antenna.
12. The method of claim 10, wherein operating the wireless AP device further comprises: downloading, from a server, an arbitration map comprising locations of a plurality of client wireless devices and, for each location, an identifier of a transmit antenna and of a receive antenna, wherein each identifier identifies one of the first directional antenna, the second directional antenna, or the omnidirectional antenna; downloading, from the server, application level priority assignments for respective frames of the plurality of frames of a data stream; and programming, by a processor of the wireless AP device, the transmit antenna and the receive antenna associated with the plurality of frames within the arbitration table using the application level priority assignments, the locations and corresponding ones of the identifiers from the arbitration map, wherein each of the plurality of frames is associated with a destination MAC address corresponding to one of the plurality of client wireless devices.
13. The method of claim 12, wherein a second client wireless device is located along a second direction with respect to the AP wireless device, and wherein operating the wireless AP device further comprises: determining, from one of the arbitration map or signal probing, a first location of the first client wireless device located along the first direction; and determining, from one of the arbitration map or signal probing, a second location of the second client wireless device located along the second direction; and wherein the programming comprises: assigning the first directional antenna to be the transmit antenna for first frames of the plurality of frames comprising the first destination MAC address of the first client wireless device; and assigning the second directional antenna to be the transmit antenna for second frames of the plurality of frames comprising a second destination MAC address of the second client wireless device.
14. The method of claim 10, wherein operating the wireless AP device further comprises: receiving, from a server, a report comprising historical values for at least one of location data, received signal strength information (RSSI), physical layer (PHY) rate, or channel state information (CSI) of a plurality of client wireless devices; performing active probing of the plurality of client wireless devices, to generate updated values for the least one of the location data, the RSSI, the PHY rate, or the CSI of the plurality of client wireless devices; and reporting, to the server and based on the updated values, changes between the historical values and the updated values.
15. The method of claim 10, wherein operating the wireless AP device further comprises: receiving, from the first client wireless device with the first acknowledgment, signal quality information and location data associated with a location of the first client wireless device, wherein the signal quality information includes at least one of received signal strength information (RSSI), channel state information (CSI), or physical layer (PHY) rate; and transmitting, based on the signal quality information and the location data, a subsequent frame of the plurality of frames to the first client wireless device via one of the second directional antenna, a third directional antenna, or the omnidirectional antenna.
16. A wireless device comprising: a radio; a first directional antenna; a second directional antenna; an omnidirectional antenna; a switch selectively coupled between the radio and the first directional antenna, the second directional antenna, and the omnidirectional antenna; and a processor coupled to the switch, wherein the processor is to, for a second frame of a plurality of frames: determine, based on an arbitration table, a second destination medium access control (MAC) address of a second client wireless device, wherein the arbitration table includes for each frame of the plurality of frames: (a) a frame identifier, (b) destination MAC address for the frame, (c) identifier of an antenna for transmitting the frame, and (d) identifier of an antenna for receiving acknowledgement data for the frame; add, to the second frame, metadata comprising the second destination MAC address and an identifier of the second directional antenna for both (c) and (d) retrieved from the arbitration table; cause, using the metadata in the second frame, the switch to couple the radio to the second directional antenna; transmit the second frame to the second client wireless device via the second directional antenna, wherein the second client wireless device is located along a second direction with respect to the wireless device; cause, using the metadata in the second frame, the switch to retain the radio coupled to the second directional antenna; and receive a second acknowledgment, corresponding to the second frame, from the second client wireless device via the second directional antenna.
17. The wireless device of claim 16, further comprising a third directional antenna selectively coupled to the radio and to the switch and configured to radiate radio frequency energy in a third direction, wherein the processor is further to: transmit a probing signal via the first directional antenna, the second directional antenna, and the third directional antenna; receive, from the second client wireless device in response to the probing signal, a first signal strength value via the first directional antenna, a second signal strength value via the second directional antenna, and a third signal strength value via the third directional antenna; determine that the third signal strength value is greater than the first and the second signal strength values; and transmit a subsequent frame of the plurality of frames to the second client wireless device via the third directional antenna, wherein the second client wireless device has moved from being located along the second direction to being located along the third direction.
18. The wireless device of claim 16, further comprising a third directional antenna selectively coupled to the radio and to the switch, wherein the processor is further to: receive, for the second client wireless device, signal quality information and criteria data, the criteria data comprising at least one of bandwidth requirements, traffic patterns, supported modes, or application level priority for the second client wireless device; and transmit, based on the signal quality information and the criteria data, a subsequent frame of the plurality of frames to the second client wireless device via one of the second directional antenna, the third directional antenna, or the omnidirectional antenna.
19. The wireless device of claim 16, wherein the processor is further to: retrieve, from the arbitration table for a third frame of the plurality of frames, a third destination MAC address of a third client wireless device and the identifier of the omnidirectional antenna; cause the switch to couple the radio to the omnidirectional antenna; transmit the third frame to the third client wireless device via the omnidirectional antenna; receive, from the third client wireless device, information about a weak hidden node interrupting transmission by the omnidirectional antenna; and transmit, based on the information about the weak hidden node, a subsequent frame of the plurality of frames associated with the third destination MAC address via one of the first directional antenna or the second directional antenna.
20. The wireless device of claim 16, wherein the processor is further to: retrieve, from the arbitration table for a third frame of the plurality of frames, a third destination MAC address of a third client wireless device, the identifier of the second directional antenna, and the identifier of the omnidirectional antenna; cause the switch to couple the radio to the second directional antenna; transmit the third frame to the third client wireless device via the second directional antenna; receive, from the third client wireless device, information about detection of a strong hidden node interrupting transmission by the second directional antenna; and transmit, based on the information about the strong hidden node, a subsequent frame of the plurality of frames associated with the third destination MAC address via the omnidirectional antenna.
</claims>
</document>
