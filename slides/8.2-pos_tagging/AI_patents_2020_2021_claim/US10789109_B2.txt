<document>

<filing_date>
2019-02-27
</filing_date>

<publication_date>
2020-09-29
</publication_date>

<priority_date>
2016-11-23
</priority_date>

<ipc_classes>
G06F11/34,G06F9/48,G06F9/54,G06Q10/06
</ipc_classes>

<assignee>
TENCENT TECHNOLOGY (SHENZHEN) COMPANY
</assignee>

<inventors>
HUANG MING
MA, SHUJING
SONG, WENJUN
</inventors>

<docdb_family_id>
62170899
</docdb_family_id>

<title>
Information processing method and device and computer storage medium
</title>

<abstract>
The present disclosure provides technical solutions for managing different types of workflow, including preconfiguring a dispatcher, a waiting queue, an event handler, a delivery queue, and a submitter for each type of workflow; receiving a workflow request including workflow information based on user's activities; determining a type of the received workflow request; in accordance with a determination that the received workflow request is not a type of manual workflow request: generating key information including one or more parameters; writing the key information into a first waiting queue using a first dispatcher; reading the key information from the first waiting queue in sequence using a first event handler; generating a workflow instance based on the key information; writing the workflow instance into a first delivery queue; reading the workflow instance from the first delivery queue using a first submitter; and sending the workflow instance to a corresponding execution node to execute the workflow instance.
</abstract>

<claims>
1. An information processing method, comprising: preconfiguring, for each of a plurality of types of workflow requests, a distinct dispatcher, a distinct waiting queue, a distinct event handler, a distinct delivery queue, and a distinct submitter, further including preconfiguring, for a first type of workflow request, a first dispatcher, a first waiting queue, a first event handler, a first delivery queue, and a first submitter; receiving a sequence of workflow requests, each workflow request including respective workflow information based on user's activities associated with the workflow request; organizing the sequence of workflow requests into a plurality of queues of workflow requests according to the plurality of types of workflow requests; for each received workflow request in a respective queue of workflow requests: determining a type of the received workflow request based on the workflow information; and in accordance with a determination that the received workflow request is the first type of workflow request that is not a type of manual workflow request, wherein the first type of workflow requests is one selected from: (1) a type of timed system workflow request, (2) a type of calculating history rata workflow request or re-performing timed workflow request, and (3) a type of workflow with user-defined parameters and executed by background API: generating key information including one or more parameters corresponding to the workflow request information; and writing the key information into the first waiting queue using the first dispatcher; and processing the plurality of queues of workflow requests in parallel, including for the first waiting queue corresponding to the first type of workflow request: reading the key information from the first waiting queue in sequence using the first event handler; generating, by the first event handler, a workflow instance based on the key information; writing, by the first event handler, the workflow instance into the first delivery queue; reading the workflow instance from the first delivery queue using the first submitter; and sending, by the first submitter, the workflow instance to a corresponding execution node to execute the workflow instance.
2. The method according to claim 1, further comprising: while writing the key information into the first waiting queue by the first dispatcher, increasing a waiting counter corresponding to the first waiting queue by one.
3. The method according to claim 2, further comprising: while reading the key information from the first waiting queue in sequence using the first event handler, decreasing, by the first event handler, the waiting counter by one; and while writing the workflow instance into the first delivery queue, increasing, by the first event handler, an active counter corresponding to the first delivery queue by one.
4. The method according to claim 3, further comprising: while reading the workflow instance from the first delivery queue using the first submitter decreasing, by the first submitter, the active counter corresponding to the first delivery queue by one; and while reading the workflow instance, and sending the workflow instance to a corresponding execution node increasing, by the first submitter, a running counter corresponding to the execution node by one.
5. The method according to claim 1, wherein respective key information of a plurality of workflow requests in the first waiting queue are sorted based on rules comprising: sorting key information corresponding to the workflow requests generated by different users in order of generation time of the key information from the corresponding workflow request information; sorting key information corresponding to the workflow requests generated by a same user in different batches in order of generation time of the key information from the corresponding workflow request information; and for key information corresponding to workflow requests generated by a same user in a same batch: when the first type of workflow request is a type of calculating history data workflow request or re-performing timed workflow request, sorting the key information in order of service time corresponding to the workflow requests or when the first type of workflow request is another type different from the type of calculating history data workflow request or re-performing timed workflow request, sorting the key information in order of generation time of the key information from the corresponding workflow request information.
6. The method according to claim 1, wherein generating the key information corresponding to the workflow request information, and writing the key information into the first waiting queue using the first dispatcher comprises: identifying a workflow comprised in the workflow request information, obtaining an identifier and the one or more parameters of the workflow, using the identifier and the one or more parameters of the workflow as the key information, and writing the key information into the first waiting queue using the first dispatcher.
7. The method according to claim 1, further comprising: in accordance with a determination that the received workflow request is the type of manual workflow request: directly dispatching the workflow request information using a second dispatcher; and directly generating a workflow instance based on the workflow request information using a second submitter, and sending the generated workflow instance to a corresponding execution node to execute the workflow instance, wherein the second dispatcher and the second submitter are pre-configured for the type of manual workflow request.
8. An electronic device, comprising: one or more processors; and memory comprising instructions, which when executed by the one or more processors, cause the processors to perform operations comprising: preconfiguring, for each of a plurality of types of workflow requests, a distinct dispatcher, a distinct waiting queue, a distinct event handler, a distinct delivery queue, and a distinct submitter, further including preconfiguring, for a first type of workflow request, a first dispatcher, a first waiting queue, a first event handler, a first delivery queue, and a first submitter; receiving a sequence of workflow requests, each workflow request including respective workflow information based on user's activities associated with the workflow request; organizing the sequence of workflow requests into a plurality of queues of workflow requests according to the plurality of types of workflow requests; for each received workflow request in a respective queue of workflow requests: determining a type of the received workflow request based on the workflow information; and in accordance with a determination that the received workflow request is the first type of workflow request that is not a type of manual workflow request, wherein the first type of workflow requests is one selected from: (1) a type of timed system workflow request, (2) a type of calculating history data workflow request or re-performing timed workflow request, and (3) a type of workflow with user-defined parameters and executed by background API: generating key information including one or more parameters corresponding to the workflow request information; and writing the key information into the first waiting queue using the first dispatcher; and processing the plurality of queues of workflow requests in parallel, including for the first waiting queue corresponding to the first type of workflow request: reading the key information from the first waiting queue in sequence using the first event handler; generating, by the first event handler, a workflow instance based on the key information; writing, by the first event handler, the workflow instance into the first delivery queue; reading the workflow instance from the first delivery queue using the first submitter; and sending, by the first submitter, the workflow instance to a corresponding execution node to execute the workflow instance.
9. The electronic device according to claim 8, wherein the operations further comprise: while writing the key information into the first waiting queue by the first dispatcher, increasing a waiting counter corresponding to the first waiting queue by one.
10. The electronic device according to claim 9, wherein the operations further comprise: while reading the key information from the first waiting queue in sequence using the first event handler, decreasing, by the first event handler, the waiting counter by one; and while writing the workflow instance into the first delivery queue, increasing, by the first event handler, an active counter corresponding to the first delivery queue by one.
11. The electronic device according to claim 10, wherein the operations further comprise: while reading the workflow instance from the first delivery queue using the first submitter decreasing, by the first submitter, the active counter corresponding to the first delivery queue by one; and while reading the workflow instance, and sending the workflow instance to a corresponding execution node increasing, by the first submitter, a running counter corresponding to the execution node by one.
12. The electronic device according to claim 8, wherein respective key information of a plurality of workflow requests in the first waiting queue are sorted based on rules comprising: sorting key information corresponding to the workflow requests generated by different users in order of generation time of the key information from the corresponding workflow request information; sorting key information corresponding to the workflow requests generated by a same user in different batches in order of generation time of the key information from the corresponding workflow request information; and for key information corresponding to workflow requests generated by a same user in a same batch: when the first type of workflow request is a type of calculating history data workflow request or re-performing timed workflow request, sorting the key information in order of service time corresponding to the workflow requests or when the first type of workflow request is another type different from the type of calculating history data workflow request or re-performing timed workflow request, sorting the key information in order of generation time of the key information from the corresponding workflow request information.
13. The electronic device according to claim 8, wherein generating the key information corresponding to the workflow request information, and writing the key information into the first waiting queue using the first dispatcher comprises: identifying a workflow comprised in the workflow request information; obtaining an identifier and the one or more parameters of the workflow; using the identifier and the one or more parameters of the workflow as the key information; and writing the key information into the first waiting queue using the first dispatcher.
14. The electronic device according to claim 8, wherein the operations further comprise: in accordance with a determination that the received workflow request is the type of manual workflow request: directly dispatching the workflow request information using a second dispatcher; directly generating a workflow instance based on the workflow request information using a second submitter; and sending the generated workflow instance to a corresponding execution node to execute the workflow instance, wherein the second dispatcher and the second submitter are pre-configured for the type of manual workflow request.
15. A non-transitory computer-readable storage medium storing instructions, the instructions, when executed by one or more processors of an electronic device, cause the processors to perform operations comprising: preconfiguring, for each of a plurality of types of workflow requests, a distinct dispatcher, a distinct waiting queue, a distinct event handler, a distinct delivery queue, and a distinct submitter, further including preconfiguring, for a first type of workflow request, a first dispatcher, a first waiting queue, a first event handler, a first delivery queue, and a first submitter; receiving a sequence of workflow requests, each workflow request including respective workflow information based on user's activities associated with the workflow request; organizing the sequence of workflow requests into a plurality of queues of workflow requests according to the plurality of types of workflow requests; for each received workflow request in a respective queue of workflow requests: determining a type of the received workflow request based on the workflow information; and in accordance with a determination that the received workflow request is the first type of workflow request that is not a type of manual workflow request, wherein the first type of workflow requests is one selected from: (1) a type of timed system workflow request, (2) a type of calculating history data workflow request or re-performing timed workflow request, and (3) a type of workflow with user-defined parameters and executed by background API: generating key information including one or more parameters corresponding to the workflow request information; and writing the key information into the first waiting queue using the first dispatcher; and processing the plurality of queues of workflow requests in parallel, including for the first waiting queue corresponding to the first type of workflow request: reading the key information from the first waiting queue in sequence using the first event handler; generating, by the first event handler, a workflow instance based on the key information; writing, by the first event handler, the workflow instance into the first delivery queue; reading the workflow instance from the first delivery queue using the first submitter; and sending, by the first submitter, the workflow instance to a corresponding execution node to execute the workflow instance.
16. The non-transitory computer-readable storage medium according to claim 15, wherein the operations further comprise: while writing the key information into the first waiting queue by the first dispatcher, increasing a waiting counter corresponding to the first waiting queue by one.
17. The non-transitory computer-readable storage medium according to claim 16, wherein the operations further comprise: while reading the key information from the first waiting queue in sequence using the first event handler, decreasing, by the first event handler, the waiting counter by one; and while writing the workflow instance into the first delivery queue, increasing, by the first event handler, an active counter corresponding to the first delivery queue by one.
18. The non-transitory computer-readable storage medium according to claim 17, wherein the operations further comprise: while reading the workflow instance from the first delivery queue using the first submitter decreasing, by the first submitter, the active counter corresponding to the first delivery queue by one; and while reading the workflow instance, and sending the workflow instance to a corresponding execution note increasing, by the first submitter, a running counter corresponding to the execution node by one.
19. The non-transitory computer-readable storage medium according to claim 15, wherein respective key information of a plurality of workflow requests in the first waiting queue are sorted based on rules comprising: sorting key information corresponding to the workflow requests generated by different users in order of generation time of the key information from the corresponding workflow request information; sorting key information corresponding to the workflow requests generated by a same user in different batches in order of generation time of the key information from the corresponding workflow request information; and for key information corresponding to workflow requests generated by a same user in a same batch: when the first type of workflow request is a type of calculating history data workflow request or re-performing timed workflow request, sorting the key information in order of service time corresponding to the workflow requests or when the first type of workflow request is another type different from the type of calculating history data workflow request or re-performing timed workflow request, sorting the key information in order of generation time of the key information from the corresponding workflow request information.
20. The non-transitory computer-readable storage medium according to claim 15, wherein the operations further comprise: in accordance with a determination that the received workflow request is the type of manual workflow request: directly dispatching the workflow request information using a second dispatcher; directly generating a workflow instance based on the workflow request information using a second submitter; and sending the generated workflow instance to a corresponding execution node to execute the workflow instance, wherein the second dispatcher and the second submitter are pre-configured for the type of manual workflow request.
</claims>
</document>
