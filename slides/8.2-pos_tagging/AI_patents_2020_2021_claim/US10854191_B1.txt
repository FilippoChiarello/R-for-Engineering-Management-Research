<document>

<filing_date>
2017-09-20
</filing_date>

<publication_date>
2020-12-01
</publication_date>

<priority_date>
2017-09-20
</priority_date>

<ipc_classes>
G10L15/01,G10L15/16,G10L15/22
</ipc_classes>

<assignee>
AMAZON TECHNOLOGIES
</assignee>

<inventors>
GERAMIFARD, ALBORZ
SARIKAYA, RUHI
Roy, Shiladitya
</inventors>

<docdb_family_id>
73554959
</docdb_family_id>

<title>
Machine learning models for data driven dialog management
</title>

<abstract>
Techniques for optimizing a system to improve an overall user satisfaction in a speech controlled system are described. A user speaks an utterance and the system compares an expected sum of user satisfaction values for each action to make a decision as to how best to process the utterance. As a result, the system may make a decision that decreases user satisfaction in the short term but increases user satisfaction in the long term. The system may estimate a user satisfaction value and associate the estimated user satisfaction value with a current dialog state. By tracking user satisfaction values over time, the system may train machine learning models to optimize the expected sum of user satisfaction values. This improves how the system selects an action or application to which to dispatch the dialog state and how a specific application selects an action or intent corresponding to the command.
</abstract>

<claims>
1. A computer-implemented method comprising: receiving, from a device, input audio data corresponding to an utterance; performing speech recognition on the input audio data to generate first input data and a first confidence value that the first input data represents the utterance; determining, by a first component using the first input data, intent data indicating a first intent and a second confidence value that the first intent represents the utterance; determining, using a first model, first output model data representing a first estimate of user satisfaction; determining, by at least a second component that is different than the first component, using dialog data, a first action corresponding to the first intent, wherein the dialog data includes at least the first input data, the first confidence value, the first intent, and the second confidence value; determining, by at least the second component using the dialog data, a second action corresponding to the first intent; determining, using a second model, a first probability value that the first action corresponds to the utterance; determining, using the second model, a second probability value that the second action corresponds to the utterance; determining that the second probability value is higher than the first probability value; determining that the second action corresponds to an application; performing the second action, wherein the performing the second action comprises sending the dialog data to the application; determining, by the application, a first command corresponding to the utterance, the first command executable by the application; determining, by the application, a second command corresponding to the utterance, the second command executable by the application; determining that the second command more closely corresponds to the utterance than the first command; generating, using the application, second output data corresponding to the second command; determining, using the first model, second output model data representing a second estimate of user satisfaction; determining a difference between the second estimate of user satisfaction and the first estimate of user satisfaction; and associating the difference with the second action.
2. The computer-implemented method of claim 1, wherein determining the first output model data further comprises: determining audio property data representing at least one of a frequency or an amplitude associated with the input audio data; determining sentiment data associated with the first input data, the sentiment data corresponding to at least one of a positive indication, a neutral indication, or a negative indication; receiving user feedback data, the user feedback data corresponding to input indicating a positive or negative response; determining an estimated error rate associated with the first input data; receiving context data including information about at least a location of the device when the device captured the input audio data; and determining the first estimate of user satisfaction based on at least one of the audio property data, the first input data, the sentiment data, the user feedback data, the estimated error rate, or the context data.
3. The computer-implemented method of claim 1, further comprising: generating a third model using the second model, the difference and the second action.
4. A computer-implemented method, comprising: receiving first input data corresponding to an input request; performing, by a first component, natural language understanding (NLU) on the first input data to determine NLU result data, the NLU result data including at least first intent data; determining dialog data representing at least the first input data, the first intent data, and first history data, the first history data including first output model data that corresponds to previous actions; sending, to at least one first model that is different than the first component, the dialog data; determining, by the at least one first model using the dialog data: a first action potentially corresponding to the input request, a second action potentially corresponding to the input request, second output model data representing a likelihood that a user will be satisfied with the first action, and third output model data representing a likelihood that the user will be satisfied with the second action; and based at least in part on the second output model data and the third output model data, performing the second action.
5. The computer-implemented method of claim 4, further comprising: determining that the second action corresponds to a request to an application; sending the dialog data to the application; determining, by the application, a first command corresponding to the input request; determining, by the application, a second command corresponding to the input request; determining a first probability value that the first command is responsive to the input request; determining a second probability value that the second command is responsive to the input request; determining that the second probability value is greater than the first probability value; and generating output data corresponding to the second command.
6. The computer-implemented method of claim 4, further comprising: determining, by the at least one first model after performing the second action, fourth output model data representing a first estimate of user satisfaction; generating second history data that includes the fourth output model data and the first output model data; and generating a second model using the at least one first model and the second history data as inputs.
7. The computer-implemented method of claim 4, further comprising: determining, by the at least one first model prior to performing the second action, fourth output model data representing a first estimate of user satisfaction; determining, by the at least one first model after performing the second action, fifth output model data representing a second estimate of user satisfaction; determining a difference between the second estimate of user satisfaction and the first estimate of user satisfaction; associating the difference with the second action; and generating a second model using the at least one first model, the difference, and the second action.
8. The computer-implemented method of claim 4, further comprising: determining a first sequence of events associated with the first action; determining a first expected sum of user satisfaction values for the first sequence of events; determining a second sequence of events associated with the second action; determining a second expected sum of user satisfaction values for the second sequence of events; determining that the second expected sum is higher than the first expected sum; and generating a second model using the at least one first model, the first expected sum, the second expected sum, and the second action, the second model configured to select the second action.
9. The computer-implemented method of claim 4, further comprising: receiving input audio data corresponding to the input request; performing speech recognition processing to generate the first input data and a first confidence value that the first input data represents the input request; performing speech recognition processing to generate second input data and a second confidence value that the second input data represents the input request; determining, using the first input data, the first intent data, the first intent data indicating a first intent and a third confidence value that the first intent is responsive to the input request; receiving context data including information about at least a location of a device that captured the input audio data; receiving the first history data including information about at least one of previous actions and previous user satisfaction values; and determining the dialog data, the dialog data including at least three of the first input data, the first confidence value, the second input data, the second confidence value, the first intent data, the context data, or the first history data.
10. The computer-implemented method of claim 4, further comprising: receiving input audio data corresponding to the input request; determining audio property data representing at least one of a frequency or an amplitude associated with the input audio data; determining sentiment data associated with the first input data, the sentiment data corresponding to at least one of a positive indication, a neutral indication, or a negative indication; receiving user feedback data, the user feedback data corresponding to input indicating a positive or negative response; determining an estimated error rate associated with the first input data; receiving context data including information about at least a location of a device that captured the input audio data; and determining a first estimate of user satisfaction based on at least one of the audio property data, the first input data, the sentiment data, the user feedback data, the estimated error rate, or the context data.
11. The computer-implemented method of claim 4, further comprising: determining, based on the dialog data, that the first action corresponds to the input request using a rule-based candidate generator; determining, based on the dialog data, that the second action corresponds to the input request using a second model; applying a rule-based selector to select between the first action and the second action; determining that the rule-based selector does not include an applicable rule associated with the first action or the second action; determining a first probability value that the first action is responsive to the input request; determining a second probability value that the second action is responsive to the input request; and determining, based on the first probability value and the second probability value, to perform the second action.
12. The computer-implemented method of claim 4, further comprising, prior to receiving the first input data: receiving second dialog data corresponding to a second input request, the second dialog data including second intent data associated with the second input request; determining a third action that corresponds to the second intent data; determining a first probability value that the third action is responsive to the second input request; determining that the first probability value is below a threshold value; determining to request additional information; generating a prompt requesting the additional information; and generating output audio data corresponding to the prompt.
13. The computer-implemented method of claim 4, wherein performing the second action further comprises at least one of: sending the dialog data to an application associated with the second action; generating a dialog request requesting additional information; or generating output data associated with the second action.
14. A system comprising: at least one processor; and memory including instructions operable to be executed by the at least one processor to cause the system to: receive first input data corresponding to an input request; perform, by a first component, natural language understanding (NLU) on the first input data to determine NLU result data, the NLU result data including at least first intent data; determine, by at least one first model that is different than the first component: a first action potentially corresponding to the input request, a second action potentially corresponding to the input request, first output model data representing a likelihood that a user will be satisfied with the first action, and second output model data representing a likelihood that the user will be satisfied with the second action; determining that the second action corresponds to a first request to an application; based at least in part on the first output model data and the second output model data, sending dialog data to the application, the dialog data including at least the first input data, the first intent data, and history data; determine, by the application, a first command corresponding to the input request; determine, by the application, a second command corresponding to the input request; determine that the second command more closely corresponds to the input request than the first command; and generate output data corresponding to the second command.
15. The system of claim 14, wherein the memory further comprises instructions that, when executed by the at least one processor, further cause the system to: determine, by the at least one first model prior to performing the second action, third output model data representing a first estimate of user satisfaction; generate second dialog data that includes the third output model data; determine, by the at least one first model after performing the second action, fourth output model data representing a second estimate of user satisfaction; determine a difference between the second estimate of user satisfaction and the first estimate of user satisfaction; associate the difference with the second action; and generate a second model using the at least one first model, the difference, and the second action as inputs.
16. The system of claim 14, wherein the memory further comprises instructions that, when executed by the at least one processor, further cause the system to: determine a first sequence of events associated with the first action; determine a first expected sum of user satisfaction values for the first sequence of events; determine a second sequence of events associated with the second action; determine a second expected sum of user satisfaction values for the second sequence of events; determine that the second expected sum is higher than the first expected sum; and generate a second model using the at least one first model, the first expected sum, the second expected sum, and the second action, the second model configured to select the second action.
17. The system of claim 14, wherein the memory further comprises instructions that, when executed by the at least one processor, further cause the system to: determine, based on the dialog data, that the first action corresponds to the input request using a rule-based candidate generator; determine, based on the dialog data, that the second action corresponds to the input request using a second model; apply a rule-based selector to select between the first action and the second action; determine that the rule-based selector does not include an applicable rule associated with the first action or the second action; determine a first probability value that the first action is responsive to the input request; determine a second probability that the second action is responsive to the input request; and determine, based on the first probability value and the second probability value, to perform the second action.
18. The system of claim 14, wherein the memory further comprises instructions that, when executed by the at least one processor, further cause the system to: receive second dialog data corresponding to a second input request, the second dialog data including second intent data associated with the second input request; determine a third action that corresponds to the second intent data; determine a probability value that the third action is responsive to the second input request; determine that the probability value is below a threshold value; determine to request additional information; generate a prompt requesting the additional information; and generate output audio data corresponding to the prompt.
19. A computer-implemented method, comprising: receiving first input data corresponding to an input request; performing, by a first component, natural language understanding (NLU) on the first input data to determine NLU result data, the NLU result data including at least first intent data; determining, by a first model, first output model data representing a first estimate of user satisfaction; determining dialog data representing at least the first input data, the first intent data, and first history data, the first history data including the first output model data and second output model data that corresponds to previous actions; sending, to at least one other component that is different than the first component, the dialog data; determining, by the at least one other component, using the dialog data: a first action corresponding to the first intent data, a second action corresponding to the first intent data, using a second model, a first probability value that the first action is responsive to the input request, and using the second model, a second probability value that the second action is responsive to the input request; determining that the second probability value is greater than the first probability value; performing the second action; determining, by the first model, second output model data representing a second estimate of user satisfaction; determining a difference between the second estimate of user satisfaction and the first estimate of user satisfaction; and associating the difference with the second action.
20. The computer-implemented method of claim 4, further comprising: determining, by the at least one first model prior to receiving the first input data, fourth output model data representing a first estimate of user satisfaction; and determining, by the at least one first model after performing the second action, fifth output model data representing a second estimate of user satisfaction.
</claims>
</document>
