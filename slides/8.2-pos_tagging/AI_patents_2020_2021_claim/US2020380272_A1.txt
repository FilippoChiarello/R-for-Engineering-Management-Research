<document>

<filing_date>
2020-08-19
</filing_date>

<publication_date>
2020-12-03
</publication_date>

<priority_date>
2018-05-07
</priority_date>

<ipc_classes>
G06K9/00,G06T7/50,G09B29/00
</ipc_classes>

<assignee>
TENCENT TECHNOLOGY (SHENZHEN) COMPANY
</assignee>

<inventors>
SHU, Mao
</inventors>

<docdb_family_id>
63538161
</docdb_family_id>

<title>
GROUND MARK EXTRACTION METHOD, MODEL TRAINING METHOD, DEVICE AND STORAGE MEDIUM
</title>

<abstract>
A ground mark determining method and apparatus are provided. The method includes: obtaining, by the computer device, a point cloud grayscale image, the point cloud grayscale image comprising a road segment map; obtaining, by the computer device, ground mark information from the road segment map and running a mark-extraction network model to extract ground marks in the road segment map, the ground mark information comprising information about the ground marks extracted by the mark-extraction network model, and the ground marks indicating driving information marked on a road segment surface; and determining, by the computer device, a target ground mark from the ground marks according to the ground mark information.
</abstract>

<claims>
1. A ground mark determining method, performed by a computer device, the method comprising: obtaining, by the computer device, a point cloud grayscale image, the point cloud grayscale image comprising a road segment map; obtaining, by the computer device, ground mark information from the road segment map and running a mark-extraction network model to extract ground marks in the road segment map, the ground mark information comprising information about the ground marks extracted by the mark-extraction network model, and the ground marks indicating driving information marked on a road segment surface; and determining, by the computer device, a target ground mark from the ground marks according to the ground mark information.
2. The method according to claim 1, wherein the ground mark information comprises attribute information and confidence levels of the ground marks; and wherein the determining the target ground mark from the ground marks according to the ground mark information comprises: removing, by the computer device, unqualified ground marks from the ground marks based on the confidence levels and the attribute information of the ground marks to obtain the target ground mark in a two-dimensional form; and converting, by the computer device, the target ground mark in the two-dimensional form into a target ground mark in a three-dimensional form.
3. The method according to claim 2, wherein the attribute information comprises position information and shape information; and wherein the removing the unqualified ground marks from the ground marks based on the confidence levels and the attribute information of the ground marks to obtain the target ground mark in the two-dimensional form comprises: removing, by the computer device, ground marks having confidence levels lower than a confidence level threshold according to the confidence levels of the ground marks; and performing, by the computer device, for ground marks having confidence levels higher than the confidence level threshold, a deduplication on at least two ground marks comprising the same position information and the same shape information to obtain the target ground mark in the two-dimensional form.
4. The method according to claim 3, wherein the performing, by the computer device, the deduplication on the at least two ground marks comprising the same position information and shape information comprises: calculating, by the computer device, for the at least two ground marks comprising the same position information, a confidence level difference between the at least two ground marks; deleting, by the computer device, for the at least two ground marks having the confidence level difference greater than a preset value, one of the at least two ground marks having a lower confidence level; deleting, by the computer device, for the at least two ground marks having the confidence level difference less than the preset value, one of the at least two ground marks having a similarity to a standard shape that is less than a preset threshold based on the shape information of the one of the at least two ground marks; and performing, by the computer device, a combination of the at least two ground marks based on determining that the similarity between shapes of the at least two ground marks and the standard shape are both greater than the preset threshold.
5. The method according to claim 1, wherein the obtaining the ground mark information from the road segment map and running the mark-extraction network model further comprises: running, by the computer device, the mark-extraction network model to divide the road segment map into a plurality of road segment sub-maps; performing, by the computer device, a convolution and a pooling on each of the plurality of road segment sub-maps to obtain a plurality of feature maps corresponding to each of the plurality of road segment sub-maps; and extracting, by the computer device, the ground mark information in the plurality of feature maps corresponding to each of the road segment sub-maps.
6. The method according to claim 1, wherein the obtaining the point cloud grayscale image comprises: obtaining, by the computer device, a three-dimensional laser point cloud map; and performing, by the computer device, a coordinate transformation according to a yaw of a vehicle based on the three-dimensional laser point cloud map, performing an orthographic projection on the transformed three-dimensional laser point cloud map, and normalizing reflectance values of laser points in the three-dimensional laser point cloud map into grayscale values to obtain a two-dimensional point cloud grayscale image.
7. The method according to claim 1, the method further comprising: training the mark-extraction network model; wherein the training the mark-extraction network model comprises: obtaining, by the computer device, a plurality of sample grayscale images, each of the plurality of sample grayscale images comprising a sample road segment map including sample ground marks; performing, by the computer device, a convolution and a pooling on each of a plurality of sample road segment maps to obtain a sample feature map of each of the plurality of sample road segment maps; and training, by the computer device, an initial network model until the initial network model converges, according to the sample ground marks in the sample feature map of each of the plurality of sample road segment maps to obtain the mark-extraction network model for recognizing the ground marks.
8. The method according to claim 7, wherein the performing the convolution and the pooling on each of the plurality of sample road segment maps to obtain the sample feature map of each of the plurality of sample road segment maps further comprises: dividing, by the computer device, each of the plurality of sample road segment maps into a plurality of sample road segment sub-maps; and performing, by the computer device, the convolution and the pooling on each of the plurality of road segment sub-maps to obtain the plurality of sample feature maps corresponding to each of the plurality of sample road segment sub-maps, and wherein the training the initial network model until the initial network model converges further comprises: training, by the computer device, the initial network model until the initial network model converges, according to the sample ground marks in the sample feature map corresponding to each of the plurality of sample road segment sub-maps to obtain the mark-extraction network model for recognizing the ground marks.
9. A ground mark determining apparatus, comprising: at least one memory storing computer program code; and at least one processor configured to access the at least one memory and operate as instructed by the computer program code, the computer program code comprising: first obtaining code configured to cause the at least one processor to obtain a point cloud grayscale image, the point cloud grayscale image comprising a road segment map; second obtaining code configured to cause the at least one processor to obtain ground mark information from the road segment map and run a mark-extraction network model to extract ground marks in the road segment map, the ground mark information comprising information about the ground marks extracted by the mark-extraction network model, and the ground marks indicating driving information marked on a road segment surface; and determining code configured to cause the at least one processor to determine a target ground mark from the ground marks according to the ground mark information.
10. The apparatus according to claim 9, wherein the ground mark information comprises attribute information and confidence levels of the ground marks, and wherein the determining code is further configured to cause the at least one processor to: remove unqualified ground marks from the ground marks based on the confidence levels and the attribute information of the ground marks to obtain the target ground mark in a two-dimensional form; and convert the target ground mark in the two-dimensional form into a target ground mark in a three-dimensional form.
11. The apparatus according to claim 10, wherein the attribute information comprises position information and shape information, and wherein the determining code is further configured to cause the at least one processor to: remove ground marks having confidence levels lower than a confidence level threshold according to the confidence levels of the ground marks; and perform, for ground marks having confidence levels higher than the confidence level threshold, a deduplication on at least two ground marks comprising the same position information and the same shape information to obtain the target ground mark in the two-dimensional form.
12. The apparatus according to claim 11, wherein the determining code is further configured to cause the at least one processor to: calculate, for the at least two ground marks comprising the same position information, a confidence level difference between the at least two ground marks; delete, for the at least two ground marks having the confidence level difference greater than a preset value, one of the at least two ground marks having a lower confidence level; delete, for the at least two ground marks having the confidence level difference less than the preset value, one of the at least two ground marks having a similarity to a standard shape that is less than a preset threshold based on the shape information of the one of the at least two ground marks; and perform a combination of the at least two ground marks based on determining that the similarity between shapes of the at least two ground marks and the standard shape are both greater than the preset threshold.
13. The apparatus according to claim 9, wherein the second obtaining code is further configured to cause the at least one processor to: run the mark-extraction network model to divide the road segment map into a plurality of road segment sub-maps; perform a convolution and a pooling on each of the plurality of road segment sub-maps to obtain a plurality of feature maps corresponding to each of the plurality of road segment sub-maps; and extract the ground mark information in the plurality of feature maps corresponding to each of the road segment sub-maps.
14. The apparatus according to claim 9, wherein the first obtaining code is further configured to cause the at least one processor to: obtain a three-dimensional laser point cloud map; and perform a coordinate transformation according to a yaw of a vehicle based on the three-dimensional laser point cloud map, perform an orthographic projection on the transformed three-dimensional laser point cloud map, and normalize reflectance values of laser points in the three-dimensional laser point cloud map into grayscale values to obtain a two-dimensional point cloud grayscale image.
15. The apparatus according to claim 9, further comprising: obtaining code configured to cause the at least one processor to obtain a plurality of sample grayscale images, each of the plurality of sample grayscale images comprising a sample road segment map including sample ground marks; processing code configured to cause the at least one processor to perform a convolution and a pooling on each of a plurality of sample road segment maps to obtain a sample feature map of each of the plurality of sample road segment maps; and model training code configured to cause the at least one processor to train an initial network model until the initial network model converges, according to the sample ground marks in the sample map of each of the plurality of sample road segment maps to obtain the mark-extraction network model for recognizing the ground marks.
16. The apparatus according to claim 15, wherein the processing code is further configured to cause the at least one processor to: divide each of the plurality of sample road segment maps into a plurality of sample road segment sub-maps; and perform the convolution and the pooling on each of the plurality of road segment sub-maps to obtain the plurality of sample feature maps corresponding to each of the plurality of sample road segment sub-maps, and wherein the model training code is further configured to cause the at least one processor to train the initial network model until the initial network model converges, according to the sample ground marks in the sample feature map corresponding to each of the plurality of sample road segment sub-maps to obtain the mark-extraction network model for recognizing the ground marks.
17. A non-transitory computer-readable storage medium storing computer program code configured to cause at least one computer processor to: obtain a point cloud grayscale image, the point cloud grayscale image comprising a road segment map; obtain ground mark information from the road segment map and run a mark-extraction network model to extract ground marks in the road segment map, the ground mark information comprising information about the ground marks extracted by the mark-extraction network model, and the ground marks indicating driving information marked on a road segment surface; and determine a target ground mark from the ground marks according to the ground mark information.
18. The non-transitory computer-readable storage medium according to claim 17, wherein the ground mark information comprises attribute information and confidence levels of the ground marks, and wherein the computer program code is configured to cause the at least one processor to: remove unqualified ground marks from the ground marks based on the confidence levels and the attribute information of the ground marks to obtain the target ground mark in a two-dimensional form; and convert the target ground mark in the two-dimensional form into a target ground mark in a three-dimensional form.
19. The non-transitory computer-readable storage medium according to claim 18, wherein the attribute information comprises position information and shape information, and wherein the computer program code is configured to cause the at least one processor to: remove ground marks having confidence levels lower than a confidence level threshold according to the confidence levels of the ground marks; and perform, for ground marks having confidence levels higher than the confidence level threshold, a deduplication on at least two ground marks comprising the same position information and the same shape information to obtain the target ground mark in the two-dimensional form.
20. The non-transitory computer-readable storage medium according to claim 19, wherein the computer program code is configured to cause the at least one processor to: calculate, for the at least two ground marks comprising the same position information, a confidence level difference between the at least two ground marks; delete, for the at least two ground marks having the confidence level difference greater than a preset value, one of the at least two ground marks having a lower confidence level; delete, for the at least two ground marks having the confidence level difference less than the preset value, one of the at least two ground marks having a similarity to a standard shape that is less than a preset threshold based on the shape information of the one of the at least two ground marks; and perform a combination of the at least two ground marks based on determining that the similarity between shapes of the at least two ground marks and the standard shape are both greater than the preset threshold.
</claims>
</document>
