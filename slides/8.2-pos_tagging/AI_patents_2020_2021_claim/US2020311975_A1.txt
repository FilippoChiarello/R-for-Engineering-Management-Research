<document>

<filing_date>
2020-06-16
</filing_date>

<publication_date>
2020-10-01
</publication_date>

<priority_date>
2017-12-27
</priority_date>

<ipc_classes>
A61B6/00,G06K9/00,G06T3/40,G06T7/73
</ipc_classes>

<assignee>
CANON
</assignee>

<inventors>
MATSUURA, TOMOHIKO
</inventors>

<docdb_family_id>
67067004
</docdb_family_id>

<title>
IMAGE PROCESSING APPARATUS, IMAGE DETERMINATION METHOD AND NON-TRANSITORY COMPUTER-READABLE STORAGE MEDIUM
</title>

<abstract>
An image processing apparatus obtains a plurality of radiation images generated by causing a plurality of radiation detectors to detect radiation with which a subject is irradiated, and generates an elongated image by synthesizing the plurality of radiation images. The image processing apparatus estimates a direction of the subject in each of the plurality of radiation images, and determines a direction of the subject in the elongated image based on a direction estimation result on each of the plurality of radiation images.
</abstract>

<claims>
1. An image processing apparatus comprising: an obtaining unit configured to obtain a plurality of radiation images generated by causing a plurality of radiation detectors to detect radiation with which a subject is irradiated; a synthesizing unit configured to generate an elongated image by synthesizing the plurality of radiation images; an estimation unit configured to estimate a direction of the subject in each of the plurality of radiation images; and a determination unit configured to determine a direction of the subject in the elongated image based on a direction estimation result obtained by the estimation unit on each of the plurality of radiation images.
2. The image processing apparatus according to claim 1, wherein the determination unit determines a direction from a head side to a foot side of the subject in the elongated image.
3. The image processing apparatus according to claim 1, wherein the estimation unit estimates a direction from a head side to a foot side of a subject with respect to each of the plurality of radiation images.
4. The image processing apparatus according to claim 1, wherein the estimation unit estimates a first possibility indicating a possibility of a direction of a head side of a subject in a radiation image being a first direction along a longitudinal direction of the elongated image and a second possibility indicating a possibility of the direction of the head side being a second direction opposite to the first direction, and the determination unit determines a direction of a subject in the elongated image based on the first possibility and the second possibility estimated with respect to each of the plurality of radiation images.
5. The image processing apparatus according to claim 4, wherein the determination unit determines a direction of a subject in the elongated image based on a result of integrating the first possibilities generated concerning the plurality of radiation images and a result of integrating the second possibilities generated concerning the plurality of radiation images.
6. The image processing apparatus according to claim 1, wherein the estimation unit estimates a direction of a subject in the elongated image generated by the synthesizing unit, and the determination unit determines a direction of a subject in the elongated image based on estimation results obtained by the estimation unit concerning the plurality of radiation images and the elongated image.
7. The image processing apparatus according to claim 6, wherein the estimation unit estimates first possibilities indicating possibilities of a direction of a head side of a subject being a first direction along a longitudinal direction of the elongated image with respect to the plurality of radiation images and the elongated image and second possibilities indicating possibilities of the direction of the head side being a second direction opposite to the first direction, and the determination unit determines a direction of a subject in the elongated image based on the first possibilities and the second possibilities estimated concerning the plurality of radiation images and the elongated image.
8. The image processing apparatus according to claim 4, wherein the estimation unit estimates the first possibilities and the second possibilities by comparing a feature amount of a radiation image with feature amounts of a plurality of reference images in which a direction of a head side of a subject is known.
9. The image processing apparatus according to claim 8, wherein the estimation unit divides the radiation image into a plurality of blocks and compares a feature amount of each of the plurality of blocks with a feature amount of a corresponding block of a reference image.
10. The image processing apparatus according to claim 8, further comprising a detection unit configured to detect a region of the radiation image which is not irradiated with radiation, wherein that the estimation unit performs the comparison upon removal of a region detected by the detection unit.
11. The image processing apparatus according to claim 8, wherein the estimation unit uses, for the comparison, a reference image, of a plurality of reference images, which exhibits a matching degree not less than a predetermined value with respect to the radiation image.
12. The image processing apparatus according to claim 1, wherein the estimation unit detects anatomical regions from a radiation image and estimates a direction of the subject based on likelihoods of detected anatomical regions and shapes of the detected anatomical regions or a relative positional relationship between the detected anatomical regions.
13. The image processing apparatus according to claim 1, wherein the estimation unit includes a determination device constructed by machine learning using a plurality of teacher images in which a direction of a subject is known.
14. The image processing apparatus according to claim 1, wherein the determination unit determines a direction of the subject by applying a weight to an estimation result by the estimation unit based on a relative positional relationship between the plurality of radiation detectors that have obtained the plurality of radiation images.
15. The image processing apparatus according to claim 1, further comprising a detection unit configured to detect a region of a radiation image which is not irradiated with radiation, wherein the determination unit determines a direction of a subject in the elongated image upon reducing a weight to be applied to an estimation result concerning a radiation image with an increase in a region of the radiation image which is detected by the detection unit.
16. The image processing apparatus according to claim 1, wherein the determination unit determines a direction of a subject in the elongated image upon increasing a weight to be applied to an estimation result concerning a radiation image with an increase in the number of feature amounts extracted from the radiation image.
17. The image processing apparatus according to claim 1, wherein the determination unit determines a region of a subject in a radiation image and determines a direction of a subject in the elongated image by applying a weight corresponding to the determined region to an estimation result on each of the plurality of radiation images.
18. The image processing apparatus according to claim 1, further comprising a display control unit configured to display the elongated image on a display unit based on a direction of a subject determined by the determination unit.
19. An image determination method comprising: obtaining a plurality of radiation images by detecting radiation with which a subject is irradiated; generating an elongated image by synthesizing the plurality of radiation images; estimating a direction of the subject in each of the plurality of radiation images; and determining a direction of the subject in the elongated image based on a direction estimation result obtained in the estimating on each of the plurality of radiation images.
20. A non-transitory computer-readable storage medium storing a program for causing a computer to execute an image determination method comprising: obtaining a plurality of radiation images by detecting radiation with which a subject is irradiated; generating an elongated image by synthesizing the plurality of radiation images; estimating a direction of the subject in each of the plurality of radiation images; and determining a direction of the subject in the elongated image based on a direction estimation result obtained in the estimating on each of the plurality of radiation images.
</claims>
</document>
