<document>

<filing_date>
2018-07-30
</filing_date>

<publication_date>
2020-12-01
</publication_date>

<priority_date>
2015-12-28
</priority_date>

<ipc_classes>
G06F9/455,G06F9/50
</ipc_classes>

<assignee>
AMAZON TECHNOLOGIES
</assignee>

<inventors>
THOMAS, NATHAN BARTHOLOMEW
PARACHA, SALMAN AFTAB
VERMA, VARUN
</inventors>

<docdb_family_id>
57799878
</docdb_family_id>

<title>
Management of virtual desktop instance pools
</title>

<abstract>
Methods, systems, and computer-readable media for management of virtual desktop instance pools are disclosed. A plurality of virtual desktop instances are provisioned in a pool for a client organization. The number of virtual desktop instances does not exceed a number of virtual desktop slots for the client organization. To a first client device associated with a first user, access is provided to a particular virtual desktop instance based (at least in part) on a determination that a current number of connected virtual desktop instances is less than the number. To a second client device associated with a second user, access is denied to the plurality of virtual desktop instances based (at least in part) on a determination that a current number of connected virtual desktop instances meets the number.
</abstract>

<claims>
1. A system, comprising: a plurality of computing nodes in a provider network that collectively provide a virtual desktop service to a plurality of client organizations, wherein each of the computing nodes comprises at least one processor and a memory; wherein the virtual desktop service is configured to: determine a fixed number of virtual desktop slots; provision a plurality of virtual desktop instances in a pool, wherein the virtual desktop instances are implemented using resources of the provider network, and wherein the pool of virtual desktop instances comprises a plurality of connected virtual desktop instances that are running and connected to users of a client organization of the plurality of client organizations, along with a plurality of disconnected virtual desktop instances that are running but not connected to any users of the client organization; determine an anticipated rate of the fixed number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool; and reclaim one or more of the plurality of disconnected virtual desktop instances in the pool based at least in part on the anticipated rate, wherein one or more reclaimed virtual desktop instances are available for new connection requests.
2. The system as recited in claim 1, wherein to determine the fixed number of virtual desktop slots further comprises to determine the fixed number of virtual desktop slots for the client organization; and wherein access to the pool of virtual desktop instances is provided to the client organization.
3. The system as recited in claim 1, wherein after determining the anticipated rate of the fixed number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool, the virtual desktop service is further figured to: determine, based on the anticipated rate, whether the virtual desktop slots are approaching full use by the connected virtual desktop instances; wherein reclaiming the one or more disconnected virtual desktop instances in the pool based at least in part on the anticipated rate further comprises reclaiming the one or more disconnected virtual desktop instances in the pool based at least in part on the anticipated rate and the determination of whether the virtual desktop slots are approaching full use.
4. The system as recited in claim 1, wherein reclaiming the one or more disconnected virtual desktop instances in the pool comprises: restarting one or more of the one or more disconnected virtual desktop instances with a fresh root drive, or replacing one or more of the one or more disconnected virtual desktop instances with a fresh virtual desktop instance.
5. A method, comprising: performing, by one or more computing devices of a provider network that collectively implement a virtual desktop service: reserving a plurality of virtual desktop instances in a pool of virtual desktop instances for a client organization, wherein the virtual desktop instances are implemented using resources of the provider network, and wherein the pool of virtual desktop instances comprises a plurality of connected virtual desktop instances that are running and connected to users of the client organization, along with a plurality of disconnected virtual desktop instances that are running but not connected to any users of the client organization; determining an anticipated rate of a number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool; and reclaiming one or more of the plurality of disconnected virtual desktop instances in the pool based at least in part on the anticipated rate, wherein one or more reclaimed virtual desktop instances are available for new connection requests.
6. The method as recited in claim 5, further comprising: selecting the one or more disconnected virtual desktop instances for reclamation based at least in part on durations that the respective one or more disconnected virtual desktop instances have been idle.
7. The method as recited in claim 5, further comprising: selecting the one or more disconnected virtual desktop instances for reclamation based at least in part on anticipated durations that the respective one or more disconnected virtual desktop instances require for restart.
8. The method as recited in claim 5, further comprising: selecting the one or more disconnected virtual desktop instances for reclamation based at least in part on a user characteristic.
9. The method as recited in claim 5, wherein after determining the anticipated rate of the number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool, the method further comprises: determining, based on the anticipated rate, whether the virtual desktop slots are approaching full use by the connected virtual desktop instances; and wherein reclaiming the one or more disconnected virtual desktop instances in the pool based at least in part on the anticipated rate further comprises: reclaiming the one or more disconnected virtual desktop instances in the pool based at least in part on the anticipated rate and the determination of whether the virtual desktop slots are approaching full use.
10. The method as recited in claim 5, wherein the number of virtual desktop instances in the pool of virtual desktop instances does not exceed the number of virtual desktop slots.
11. The method as recited in claim 5, further comprising: determining that a user has disconnected from the particular virtual desktop instance; and reclaiming the particular virtual desktop instance, comprising: restarting the particular virtual desktop instances with a fresh root drive, or replacing the particular virtual desktop instance with a fresh virtual desktop instance.
12. The method as recited in claim 5, further comprising: determining a fixed number of virtual desktop slots for the client organization; and providing access to the pool of virtual desktop instances to the client organization; wherein the one or more computing nodes of the provider network collectively implement the virtual desktop service for the client organization; and wherein determining the anticipated rate of the number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool further comprises: determining the anticipated rate of the fixed number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool.
13. The method as recited in claim 12, further comprising: determining that a particular virtual desktop instance is running but not connected to any users of the client organization; and returning the particular disconnected virtual desktop instance to a set of available instances, wherein the set of available instances is accessible to the client organization and to one or more other client organizations.
14. One or more non-transitory computer-readable storage media storing program instructions that when executed by or across one or more processors of a provider network that collectively implement a virtual desktop service, cause the one or more processors to: provisioning a pool of virtual desktop instances for a client organization comprising a plurality of virtual desktop instances, wherein the pool of virtual desktop instances comprises a plurality of connected virtual desktop instances that are running and connected to users of the client organization, along with a plurality of disconnected virtual desktop instances that are running but not connected to any users of the client organization; determining an anticipated rate of a number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool of virtual desktop instances; and reclaiming one or more of the plurality of disconnected virtual desktop instances in the pool of virtual desktop instances based at least in part on the anticipated rate, wherein one or more reclaimed virtual desktop instances are available for new connection requests.
15. The one or more non-transitory computer-readable storage media as recited in claim 14, wherein the program instructions cause the one or more processors to further perform: selecting the one or more disconnected virtual desktop instances for reclamation based at least in part on durations that the respective one or more disconnected virtual desktop instances have been idle.
16. The one or more non-transitory computer-readable storage media as recited in claim 14, wherein the program instructions cause the one or more processors to further perform: selecting the one or more disconnected virtual desktop instances for reclamation based at least in part on anticipated durations that the respective one or more disconnected virtual desktop instances require for restart.
17. The one or more non-transitory computer-readable storage media as recited in claim 14, wherein the program instructions cause the one or more processors to further perform: selecting the one or more disconnected virtual desktop instances for reclamation based at least in part on a user characteristic.
18. The one or more non-transitory computer-readable storage media as recited in claim 14, wherein the program instructions cause the one or more processors to further perform: determining a fixed number of virtual desktop slots for the client organization; and providing access to the pool of virtual desktop instances to the client organization; wherein the one or more processors of the provider network collectively implement the virtual desktop service for the client organization; and wherein determining the anticipated rate of the number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool further comprises: determining the anticipated rate of the fixed number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool.
19. The one or more non-transitory computer-readable storage media as recited in claim 18, wherein each of the virtual desktop slots for the client organization comprises either a connected virtual desktop instance that is running and connected to a user of the client organization, or a disconnected virtual desktop instance that is running but not connected to any users of the client organization, or an empty slot in which no virtual desktop instance is running, either connected or disconnected; wherein the virtual desktop slots are initialized with all the slots being empty slots; and wherein a virtual desktop instance consumes a virtual desktop slot when the virtual desktop instance is connected to a user of the client organization.
20. The one or more non-transitory computer-readable storage media as recited in claim 14, wherein after determining the anticipated rate of the number of virtual desktop slots being consumed by the plurality of connected virtual desktop instances in the pool, the program instructions cause the one or more processors to further perform: determining, based on the anticipated rate, whether the virtual desktop slots are approaching full use by the connected virtual desktop instances; and wherein reclaiming the one or more disconnected virtual desktop instances in the pool based at least in part on the anticipated rate further comprises: reclaiming the one or more disconnected virtual desktop instances in the pool based at least in part on the anticipated rate and the determination of whether the virtual desktop slots are approaching full use.
</claims>
</document>
