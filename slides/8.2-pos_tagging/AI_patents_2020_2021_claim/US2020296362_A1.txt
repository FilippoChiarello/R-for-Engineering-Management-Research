<document>

<filing_date>
2020-03-16
</filing_date>

<publication_date>
2020-09-17
</publication_date>

<priority_date>
2019-03-15
</priority_date>

<ipc_classes>
G06K9/00,G06K9/62,H04N19/115,H04N19/139,H04N19/14,H04N19/177
</ipc_classes>

<assignee>
MUX
</assignee>

<inventors>
BROWN, ADAM
DAHL, JON
CHADWICK, NICK
Dodson, Ben
Hasan, Masroor
</inventors>

<docdb_family_id>
72422545
</docdb_family_id>

<title>
METHOD FOR GENERATING VIDEO- AND AUDIENCE-SPECIFIC ENCODING LADDERS
</title>

<abstract>
A method including: extracting a set of video features representing properties of a video segment; generating a set of bitrate-resolution pairs based on the set of video features, each bitrate-resolution pair in the set of bitrate-resolution pairs defining a bitrate and defining a resolution estimated to maximize a quality score characterizing the video segment encoded at the bitrate; accessing a distribution of audience bandwidths; selecting a top bitrate-resolution pair in the set of bitrate-resolution pairs; selecting a bottom bitrate-resolution pair in the set of bitrate-resolution pairs; selecting a subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths, the subset of bitrate-resolution pairs defining bitrates less than the top bitrate and greater than the bottom bitrate; and generating an encoding ladder for the video segment comprising the top bitrate-resolution pair, the bottom bitrate-resolution pair, and the subset of bitrate-resolution pairs.
</abstract>

<claims>
I claim:
1. A method for generating an encoding ladder comprising: extracting a set of video features representing properties of a video segment; generating a set of bitrate-resolution pairs based on the set of video features, each bitrate-resolution pair in the set of bitrate-resolution pairs: defining a bitrate; and defining a resolution predicted to yield a quality score, approximating a maximum quality score, characterizing the video segment encoded at the bitrate and the resolution; accessing a distribution of audience bandwidths representative of likely viewers of the video segment; selecting a highest bitrate-resolution pair for the encoding ladder from the set of bitrate-resolution pairs, the highest bitrate-resolution pair defining a highest bitrate; selecting a lowest bitrate-resolution pair for the encoding ladder from the set of bitrate-resolution pairs, the lowest bitrate-resolution pair defining a lowest bitrate; selecting a subset of bitrate-resolution pairs from the set of bitrate-resolution pairs based on the distribution of audience bandwidths, the subset of bitrate-resolution pairs defining bitrates less than the highest bitrate and greater than the lowest bitrate; and generating the encoding ladder, for the video segment, comprising the highest bitrate-resolution pair, the lowest bitrate-resolution pair, and the subset of bitrate-resolution pairs.
2. The method of claim 1, further comprising: encoding a set of renditions of the video segment, each rendition comprising an encoding of the video segment characterized by a bitrate and a resolution of a bitrate-resolution pair in the encoding ladder; and publishing a manifest file representing the encoding ladder for an internet stream.
3. The method of claim 1, wherein generating the set of bitrate-resolution pairs based on the set of video features comprises: generating a feature vector for the video segment based on the set of video features; and passing the feature vector into a convex hull estimation model to generate the set of bitrate-resolution pairs.
4. The method of claim 3, further comprising: accessing a set of training video segments; for each training video segment in the set of training video segments: extracting a set of training video features representing properties of the training video segment; generating a training feature vector for the training video segment based on the set of training video features; encoding a set of trial encodes of the training video segment, the trial encodes spanning a set of encoding bitrates; calculating a quality score of each trial encode in the set of trial encodes according to a quality metric to generate a set of quality scores; for each encoding bitrate in the set of encoding bitrates: identifying a subset of trial encodes characterized by the encoding bitrate; and selecting a trial encode for a convex hull of the training video from the subset of trial encodes, the trial encode characterized by a maximum quality score relative to the subset of trial encodes; generating a training example comprising the training feature vector and the convex hull of the training video segment; and storing the training example in a set of training examples; and training the convex hull estimation model based on the set of training examples.
5. The method of claim 1, wherein selecting the highest bitrate-resolution pair in the set of bitrate-resolution pairs comprises: for each bitrate-resolution pair in the set of bitrate-resolution pairs, predicting a quality score characterizing the bitrate-resolution pair according to a quality metric; identifying, in the set of bitrate-resolution pairs, a set of high-quality bitrate-resolution pairs characterized by quality scores greater than a threshold quality score; and selecting the highest bitrate-resolution pair from the set of high-quality bitrate-resolution pairs, the highest bitrate-resolution pair defining a minimum bitrate in the set of high-quality bitrate resolution pairs.
6. The method of claim 1, wherein selecting the lowest bitrate-resolution pair in the set of bitrate-resolution pairs comprises: identifying a threshold percentile bandwidth in the distribution of audience bandwidths; and selecting a first bitrate-resolution pair defining a bitrate greater than the threshold percentile bandwidth as the lowest bitrate-resolution pair.
7. The method of claim 1, wherein selecting the subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths comprises selecting the subset of bitrate resolution pairs predicted to yield an aggregate quality score approximating a maximum aggregate quality score of the video segment viewed according to the distribution of audience bandwidths.
8. A method for generating an encoding ladder comprising: extracting a set of video features representing properties of the video segment based on the sequence of frames, the set of video features comprising: a set of motion features; a set of visual complexity features; and a set of content features; generating a set of bitrate-resolution pairs based on the set of video features, each bitrate-resolution pair in the set of bitrate-resolution pairs: defining a bitrate; and defining a resolution predicted to yield a quality score, approximating a maximum quality score, characterizing the video segment encoded at the bitrate and the resolution; accessing a distribution of audience bandwidths representative of likely viewers of the video segment; selecting a subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths; and generating an encoding ladder for the video segment comprising the subset of bitrate-resolution pairs.
9. The method of claim 8: further comprising, selecting a highest bitrate-resolution pair in the set of bitrate-resolution pairs, the highest bitrate-resolution pair defining a highest bitrate; and wherein selecting the subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths comprises selecting the subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths, the subset of bitrate-resolution pairs defining bitrates less than the highest bitrate.
10. The method of claim 8: selecting a lowest bitrate-resolution pair in the set of bitrate-resolution pairs, the lowest bitrate-resolution pair defining a lowest bitrate; and wherein selecting the subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths comprises selecting the subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths, the subset of bitrate-resolution pairs defining bitrates greater than the lowest bitrate.
11. The method of claim 8, wherein extracting a set of video features representing properties of the video segment based on the sequence of frames comprises: calculating the set of motion features based on consecutive frames in the sequence of frames; for each frame in the sequence of frames: calculating a set of frame-level visual complexity features for the frame; storing the frame-level visual complexity feature for the frame in the set of visual complexity features; passing the sequence of frames into a video classification model; and extracting an intermediate layer activation of the video classification model executing on the sequence of frames to generate the set of content features, the set of content features representing a content classification of the video segment.
12. The method of claim 8, further comprising: identifying a set of groups-of-pictures in the video segment; and extracting an I-frame from each group-of-pictures in the video segment.
13. The method of claim 8, wherein selecting the subset of bitrate-resolution pairs in the set of bitrate-resolution pairs based on the distribution of audience bandwidths comprises selecting the subset of bitrate resolution pairs predicted to yield an aggregate quality score approximating a maximum aggregate quality score of the video segment viewed according to the distribution of audience bandwidths.
14. A method comprising: extracting a set of video features representing properties of a video segment; generating a set of bitrate-resolution pairs based on the set of video features, each bitrate-resolution pair in the set of bitrate-resolution pairs: defining a bitrate; and defining a resolution predicted to yield a quality score, approximating a maximum quality score, characterizing the video segment encoded at the bitrate and the resolution; accessing a distribution of audience bandwidths representative of likely viewers of the video segment; and appending successive bitrate-resolution pairs in the set of bitrate resolution pairs to an encoding ladder for the video segment based on a marginal quality-per-cost score of each bitrate-resolution pair in the set of bitrate-resolution pairs, the marginal quality-per-cost score based on the distribution of audience bandwidths and a current set of bitrate-resolution pairs in the encoding ladder.
15. The method of claim 14, wherein appending successive bitrate-resolution pairs in the set of bitrate resolution pairs to the encoding ladder for the video segment comprises: for each bitrate-resolution pair in the set of bitrate-resolution pairs: calculating a rendition cost of the bitrate-resolution pair, the rendition cost representing a cost of a rendition of the video segment corresponding to the bitrate-resolution pair; calculating a marginal quality score of the bitrate-resolution pair based on the distribution of audience bandwidths and the current set of bitrate-resolution pairs in the encoding ladder, the marginal quality score representing an aggregate improvement in viewing quality according to the audience bandwidth distribution in response to an addition of the bitrate-resolution pair to the encoding ladder; and calculating a marginal quality-per-cost score of the bitrate-resolution pair based on the marginal quality score of the bitrate-resolution-pair and the rendition cost of the bitrate-resolution pair; in response to a quality-per-cost score of at least one bitrate-resolution pair in the set of bitrate-resolution pairs exceeding a threshold quality-per-cost score: selecting a first successive bitrate-resolution pair in the set of bitrate-resolution pairs, the first successive bitrate resolution pair characterized by a maximum quality-per-cost score; removing the successive bitrate-resolution pair from the set of bitrate-resolution pairs; and appending the successive bitrate-resolution pair to the encoding ladder.
16. The method of claim 15, wherein calculating the rendition cost for the bitrate resolution-pair for each bitrate-resolution pair in the set of bitrate-resolution pairs comprises, for each bitrate-resolution pair in the set of bitrate-resolution pairs: calculating an encoding cost of a rendition corresponding to the bitrate-resolution pair; calculating a storage cost of the rendition corresponding to the bitrate-resolution pair; calculating a distribution cost of the rendition corresponding to the bitrate-resolution pair; and combining the encoding cost, the storage costs, and the distribution cost to calculate the rendition cost.
17. The method of claim 15, wherein calculating the marginal quality score of the bitrate-resolution pair for each bitrate-resolution pair in the set of bitrate-resolution pairs comprises, for each bitrate-resolution pair in the set of bitrate-resolution pairs: identifying a lower adjacent bitrate-resolution pair in the encoding ladder relative to the bitrate-resolution pair; identifying a higher adjacent bitrate-resolution pair in the encoding ladder relative to the bitrate-resolution pair; calculating a first predicted quality score of the bitrate-resolution pair estimating a viewing quality of a first rendition of the video segment corresponding to the bitrate-resolution pair; combining the first quality score with a bandwidth segment in the audience bandwidth distribution to generate an improved aggregate quality score, the bandwidth segment extending from a lower bandwidth defined by the bitrate-resolution pair to a higher bandwidth defined by the higher adjacent bitrate-resolution pair; calculating a second quality score of the lower adjacent bitrate-resolution pair estimating a viewing quality of a second rendition of the video segment corresponding to the lower adjacent bitrate-resolution pair; combining the second quality score with the bandwidth segment in the audience bandwidth distribution to generate a status quo aggregate quality score; and subtracting the status quo aggregate quality score from the improved aggregate quality score to calculate the marginal quality score of the bitrate-resolution pair.
18. The method of claim 17, wherein calculating the marginal quality-per-cost score of the bitrate-resolution pair based on the marginal quality score of the bitrate-resolution-pair and the rendition cost of the bitrate-resolution pair for each bitrate-resolution pair in the set of bitrate-resolution pairs comprises, for each bitrate-resolution pair in the set of bitrate-resolution pairs: estimating an increase in revenue based on the marginal quality score; and dividing the increase in revenue by the rendition cost of the bitrate-resolution pair.
19. The method of claim 14: wherein generating the set of bitrate-resolution pairs based on the set of video features comprises generating the set of bitrate-resolution pairs based on the set of video features, each bitrate-resolution pair in the set of bitrate-resolution pairs: defining a bitrate; defining a resolution predicted to yield the quality score, approximating a maximum quality score, characterizing the video segment encoded at the bitrate and the resolution; and defining the quality score of a rendition of the video segment corresponding to the bitrate-resolution pair; and wherein appending successive bitrate-resolution pairs in the set of bitrate resolution pairs to the encoding ladder comprises appending successive bitrate-resolution pairs in the set of bitrate resolution pairs to the encoding ladder based on the marginal quality-per-cost score of each bitrate-resolution pair in the set of bitrate-resolution pairs, wherein the marginal quality-per-cost score based on the distribution of audience bandwidths, the current set of bitrate-resolution pairs in the encoding ladder, and the quality score of the bitrate resolution pair.
20. The method of claim 14: wherein generating the set of bitrate-resolution pairs based on the set of video features comprises: for each viewing condition in a set of viewing conditions, generating a viewing-condition-specific set of bitrate-resolution pairs based on the set of video features, each bitrate-resolution pair in the viewing-condition-specific set of bitrate-resolution pairs: defining a bitrate; and defining a resolution predicted to yield a quality score, approximating a maximum quality score, characterizing the video segment encoded at the bitrate and the resolution and viewed according to the viewing condition; and compiling each viewing-condition specific set of bitrate-resolution pairs into the set of bitrate-resolution pairs wherein accessing the distribution of audience bandwidths representative of likely viewers of the video segment comprises: for each viewing condition in the set of viewing conditions, accessing a viewing-condition-specific distribution of audience bandwidths representative of likely viewers of the video segment satisfying the viewing condition; and compiling each viewing-condition-specific distribution of audience bandwidths into a set of distributions of audience bandwidths; and wherein appending successive bitrate-resolution pairs in the set of bitrate resolution pairs to the encoding ladder comprises appending successive bitrate-resolution pairs in the set of bitrate resolution pairs to the encoding ladder for the video segment based on the marginal quality-per-cost score of each bitrate-resolution pair in the set of bitrate-resolution pairs, the marginal quality-per-cost score based on the set of distributions of audience bandwidths and the current set of bitrate-resolution pairs in the encoding ladder.
</claims>
</document>
