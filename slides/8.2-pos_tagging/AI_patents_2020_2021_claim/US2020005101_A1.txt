<document>

<filing_date>
2019-06-28
</filing_date>

<publication_date>
2020-01-02
</publication_date>

<priority_date>
2018-07-02
</priority_date>

<ipc_classes>
G06K9/00,G06K9/62,G06K9/68,G06T7/11
</ipc_classes>

<assignee>
CANON
</assignee>

<inventors>
TSUJI, RYOSUKE
</inventors>

<docdb_family_id>
69054686
</docdb_family_id>

<title>
IMAGE PROCESSING APPARATUS, IMAGE PROCESSING METHOD, AND STORAGE MEDIUM
</title>

<abstract>
An image processing apparatus comprises a detection circuit that, by referencing dictionary data acquired by machine learning corresponding to a target photographic subject to be detected in an obtained image, detects the target photographic subject; a selection unit that selects one of a plurality of dictionary data items corresponding to the target photographic subject; and a control circuit that, in a case where a detection evaluation value in a case where the photographic subject is detected by using the dictionary data selected by the selection unit is lower than a predetermined value, controls the detection circuit to detect the target photographic subject by using the selected dictionary data and dictionary data different to the selected dictionary data.
</abstract>

<claims>
1. An image processing apparatus comprising: at least one processor or circuit configured to function as the following units: an analysis unit configured to select one among a plurality of dictionary data items, and by using the selected dictionary data, to perform analysis of an obtained image, wherein the plurality of dictionary data items includes at least first dictionary data and second dictionary data, and the analysis unit, even in a case where a detection score for the photographic subject obtained using the first dictionary data is lower than a threshold or the photographic subject cannot be detected using the first dictionary data, performs image analysis again by using the first dictionary data, and in a case where a detection score for the photographic subject obtained using the second dictionary data is lower than a threshold or the photographic subject cannot be detected using the second dictionary data, performs image analysis again by using dictionary data different to the second dictionary data.
2. The image processing apparatus according to claim 1, wherein the dictionary data different to the second dictionary data is the first dictionary data.
3. The image processing apparatus according to claim 1, wherein the analysis unit, by using set dictionary data, detects a photographic subject included in the obtained image.
4. The image processing apparatus according to claim 1, wherein the selection unit, based on an instruction by a user, selects one dictionary data item.
5. The image processing apparatus according to claim 1, wherein the analysis unit in a case where a detection score for the photographic subject obtained using the second dictionary data is lower than a threshold or the photographic subject cannot be detected using the second dictionary data, performs image analysis again by using the dictionary data different to the second dictionary data and the second dictionary data.
6. The image processing apparatus according to claim 1, wherein the dictionary data different to the second dictionary data is the first dictionary data.
7. The image processing apparatus according to claim 1, wherein the dictionary data is dictionary data acquired by machine learning.
8. An image processing apparatus comprising: at least one processor or circuit configured to function as the following units: a detection unit configured to, by referencing dictionary data acquired by machine learning corresponding to a target photographic subject to be detected in an obtained image, detect the target photographic subject; a selection unit configured to select one of a plurality of dictionary data items corresponding to the target photographic subject; and a control unit configured to, in a case where a detection evaluation value in a case where the photographic subject is detected by using the dictionary data selected by the selection unit is lower than a predetermined value, control the detection unit to detect the target photographic subject by using the selected dictionary data and dictionary data different to the selected dictionary data, wherein the plurality of dictionary data items include general purpose dictionary data and a plurality of dedicated dictionary data items, and each of the plurality of dedicated dictionary data items are dictionary data for which, in a case where the target photographic subject is in a condition respectively corresponding to the dedicated dictionary data, a probability that it is possible to detect the target photographic subject is higher than with the general purpose dictionary data, and the general purpose dictionary data is dictionary data by which it is possible to detect the target photographic subject in more conditions than with each of the plurality of dedicated dictionary data items.
9. The image processing apparatus according to claim 8, wherein the dictionary data is data that defines a detection processing parameter acquired by machine learning.
10. The image processing apparatus according to claim 8, wherein the selection unit selects one of the plurality of dedicated dictionary data items.
11. The image processing apparatus according to claim 10, wherein the control unit, in a case where the detection evaluation value in the case where the photographic subject is detected by using the one of the plurality of dedicated dictionary data items selected by the selection unit is lower than a predetermined value, controls the detection unit to detect the target photographic subject by using the selected dedicated dictionary data and the general purpose dictionary data.
12. The image processing apparatus according to claim 11, wherein the control unit controls the detection unit so use the selected dedicated dictionary data and general purpose dictionary data alternatingly for each one frame.
13. The image processing apparatus according to claim 11, wherein the control unit, in a case where the detection evaluation value in a case where the photographic subject is detected by using the general purpose dictionary data is less than a predetermined value, controls the detection unit to detect the target photographic subject without using any of the plurality of dedicated dictionary data items, and by using the general purpose dictionary data.
14. The image processing apparatus according to claim 8, wherein the dedicated dictionary data is dictionary data that is divided by at least one of a posture of a photographic subject, a number of photographic subjects, overlapping of photographic subjects, and the existence/absence or type of a decoration corresponding to a photographic subject.
15. The image processing apparatus according to claim 8, wherein the control unit, in a case where a detection evaluation value in a case where the photographic subject is detected by using dictionary data selected by the selection unit is greater than or equal to a predetermined value, controls the detection unit to detect the target photographic subject by using the selected dictionary data.
16. An image processing method comprising: selecting one among a plurality of dictionary data items, and by using the selected dictionary data, performing analysis of an obtained image, wherein the plurality of dictionary data items includes at least first dictionary data and second dictionary data, and even in a case where a detection score for the photographic subject obtained using the first dictionary data is lower than a threshold or the photographic subject cannot be detected using the first dictionary data, image analysis is performed again by using the first dictionary data, and in a case where a detection score for the photographic subject obtained using the second dictionary data is lower than a threshold or the photographic subject cannot be detected using the second dictionary data, image analysis is performed again by using dictionary data different to the second dictionary data.
17. An image processing method comprising: by referencing dictionary data acquired by machine learning corresponding to a target photographic subject to be detected in an obtained image, detecting the target photographic subject; selecting one of a plurality of dictionary data items corresponding to the target photographic subject; and in a case where a detection evaluation value in a case where the photographic subject is detected by using the dictionary data selected by the selecting is lower than a predetermined value, controlling the detecting to detect the target photographic subject by using the selected dictionary data and dictionary data different to the selected dictionary data, wherein the plurality of dictionary data items include general purpose dictionary data and a plurality of dedicated dictionary data items, and each of the plurality of dedicated dictionary data items is dictionary data for which, in a case where the target photographic subject is in a condition respectively corresponding to the dedicated dictionary data, a probability that it is possible to detect the target photographic subject is higher than with the general purpose dictionary data, and the general purpose dictionary data is dictionary data by which it is possible to detect the target photographic subject in more conditions than with each of the plurality of dedicated dictionary data items.
18. A non-transitory computer-readable storage medium on which a program for enabling a computer to function as each unit of an image processing apparatus is stored, the image processing apparatus comprising: at least one processor or circuit configured to function as the following units: an analysis unit configured to select one among a plurality of dictionary data items, and by using the selected dictionary data, to perform analysis of an obtained image, wherein the plurality of dictionary data items includes at least first dictionary data and second dictionary data, and the analysis unit, even in a case where a detection score for the photographic subject obtained using the first dictionary data is lower than a threshold or the photographic subject cannot be detected using the first dictionary data, performs image analysis again by using the first dictionary data, and in a case where a detection score for the photographic subject obtained using the second dictionary data is lower than a threshold or the photographic subject cannot be detected using the second dictionary data, performs image analysis again by using dictionary data different to the second dictionary data.
19. A non-transitory computer-readable storage medium on which a program for enabling a computer to function as each unit of an image processing apparatus is stored, the image processing apparatus comprising: at least one processor or circuit configured to function as the following units: a detection unit configured to, by referencing dictionary data acquired by machine learning corresponding to a target photographic subject to be detected in an obtained image, detect the target photographic subject; a selection unit configured to select one of a plurality of dictionary data items corresponding to the target photographic subject; and a control unit configured to, in a case where a detection evaluation value in a case where the photographic subject is detected by using the dictionary data selected by the selection unit is lower than a predetermined value, control the detection unit to detect the target photographic subject by using the selected dictionary data and dictionary data different to the selected dictionary data, wherein the plurality of dictionary data items include general purpose dictionary data and a plurality of dedicated dictionary data items, and each of the plurality of dedicated dictionary data items are dictionary data for which, in a case where the target photographic subject is in a condition respectively corresponding to the dedicated dictionary data, a probability that it is possible to detect the target photographic subject is higher than with the general purpose dictionary data, and the general purpose dictionary data is dictionary data by which it is possible to detect the target photographic subject in more conditions than with each of the plurality of dedicated dictionary data items.
</claims>
</document>
