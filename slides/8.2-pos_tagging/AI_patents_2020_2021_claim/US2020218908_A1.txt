<document>

<filing_date>
2020-01-02
</filing_date>

<publication_date>
2020-07-09
</publication_date>

<priority_date>
2019-01-04
</priority_date>

<ipc_classes>
G06K9/00,G06K9/46,G06K9/62
</ipc_classes>

<assignee>
QUALCOMM
</assignee>

<inventors>
BAIK, YOUNG-KI
KIM, DUCK HOON
YOO, SEUNGWOO
LEE, JEONG-KYUN
</inventors>

<docdb_family_id>
71403921
</docdb_family_id>

<title>
REAL-TIME SIMULTANEOUS DETECTION OF LANE MARKER AND RAISED PAVEMENT MARKER FOR OPTIMAL ESTIMATION OF MULTIPLE LANE BOUNDARIES
</title>

<abstract>
Disclosed are techniques for estimating multiple lane boundaries through simultaneous detection of lane markers (LM) and raised pavement markers (RPM). Conventional techniques for lane marker detection (LMD) comprises extracting and clustering line segments from a camera image, fitting the clustered lines to a geometric model, and selecting the multiple lanes using heuristic approaches. Unfortunately, in the conventional technique, an error from each step is sequentially propagated to the next step. Also there are no techniques to estimate both LMs and RPMs. A technique to simultaneously detect in real time both LM and RPMs is proposed. This enables optimal estimation of multiple lane boundaries.
</abstract>

<claims>
1. A method of estimating lanes, the method comprising: generating a lane marker (LM) response map from a first camera frame, the LM response map indicating presence of one or more LMs within the first camera frame; generating a raised pavement marker (RPM) response map from a second camera frame, the RPM response map indicating presence of one or more RPMs within the second camera frame; and estimating the lanes based on the LM response map and the RPM response map.
2. The method of claim 1, wherein generating the LM response map comprises: generating a first luminance map from the first camera frame; and filtering the first luminance map through a 1-D filter.
3. The method of claim 1, wherein generating the RPM response map comprises: generating a second luminance map from the second camera frame; and filtering the second luminance map through a 2-D filter.
4. The method of claim 1, wherein estimating the lanes comprises: rejecting LM outliers from the LM response map; rejecting RPM outliers from the RPM response map; and estimating lane boundaries of the lanes based on the LM and RPM response maps with the LM and/or RPM outliers rejected.
5. The method of claim 4, wherein rejecting the LM outliers comprises: deriving an LM confidence map comprising one or more LM confidence regions corresponding to one or more regions of the first camera frame, each LM confidence region having an associated LM confidence level indicating a probability that at least one LM will be within the corresponding region of the first camera frame; and rejecting LM outliers based on the LM confidence map, the LM outliers comprising one or more LMs within the LM response map corresponding to at least one LM confidence region of the LM confidence map whose associated confidence level is less than an LM confidence threshold, and wherein rejecting the RPM outliers comprises: deriving an RPM confidence map comprising one or more RPM confidence regions corresponding to one or more regions of the second camera frame, each RPM confidence region having an associated RPM confidence level indicating a probability that at least one RPM will be within the corresponding region of the second camera frame; and rejecting RPM outliers based on the RPM confidence map, the RPM outliers comprising one or more RPMs within the RPM response map corresponding to at least one RPM confidence region of the RPM confidence map whose associated confidence level is less than an RPM confidence threshold.
6. The method of claim 5, further comprising: transforming the LM confidence map and the LM response map respectively into a transformed LM confidence map and a transformed LM response map such that a spatial domain of the transformed LM confidence map is the same as a spatial domain of the transformed LM response map; and/or transforming the RPM confidence map and the RPM response map respectively into a transformed RPM confidence map and a transformed RPM response map such that a spatial domain of the transformed RPM confidence map is the same as a spatial domain of the transformed RPM response map, wherein rejecting the LM outliers comprises masking the transformed LM response map with the transformed LM confidence map, and/or wherein rejecting the RPM outliers comprises masking the transformed RPM response map with the transformed RPM confidence map.
7. The method of claim 6, wherein transforming the LM confidence map comprises applying an inverse perspective mapping (IPM) transform on the LM confidence map, wherein transforming the LM response map comprises applying the IPM transform on the LM response map, wherein transforming the RPM confidence map comprises applying the IPM transform on the RPM confidence map, and wherein transforming the RPM response map comprises: extracting RPM candidate points from the RPM response map, each RPM candidate point indicating a location of a RPM; applying the IPM transform on coordinates of the extracted RPM candidate points; and assigning an RPM detection value to the transformed coordinates in the transformed RPM response map, the RPM detection value indicating RPM detection at the transformed coordinate.
8. The method of claim 7, wherein extracting the RPM candidate points from the RPM response map comprises: matching the RPM response map with one or more RPM templates, each RPM template defining a RPM shape; and/or processing the RPM response map through a support vector machine (SVM) classifier that has been trained based on histogram of oriented gradients (HOG) features.
9. The method of claim 5, wherein the first and second frames are a same camera frame and the LM and RPM confidence maps are a same confidence map, and wherein estimating the lane boundaries comprises: dividing the camera frame into one or more frame sections; determining an LM cost volume comprising one or more LM costs associated with the one or more frame sections such that the one or more associated LM costs indicate correlations between one or more sections of the LM response map corresponding to the one or more frame sections and a plurality of model boundary trajectories; determining an RPM cost volume comprising one or more RPM costs associated with the one or more frame sections such that the one or more associated RPM costs indicate correlations between one or more sections of the RPM response map corresponding to the one or more frame sections and the plurality of model boundary trajectories; determining a confidence cost volume comprising one or more confidence costs associated with the one or more frame sections such that the one or more associated confidence costs indicate confidence levels of one or more sections of the confidence map corresponding to the one or more frame sections; determining an entire cost volume comprising an aggregation of the LM cost volume, the RPM cost volume, and the confidence cost volume; and estimating the lane boundaries based on the entire cost volume.
10. The method of claim 9, wherein the LM response map with the LM outliers removed is used when determining the LM cost volume, and/or wherein the RPM response map with the RPM outliers removed is used when determining the RPM cost volume.
11. The method of claim 9, further comprising: transforming the confidence map into a transformed confidence map; transforming the LM response map into a transformed LM response map; and transforming the RPM response map into a transformed RPM response map, wherein the transformed confidence map, the transformed LM response map, and the transformed RPM response map are all transformed to have a common spatial domain, and wherein the LM cost volume is determined based on the transformed LM response map, the RPM cost volume is determined based on the transformed RPM response map, and the confidence cost volume is determined based on the transformed confidence map.
12. The method of claim 11, wherein the plurality of model boundary trajectories comprises a plurality of line models, each line model having a size n x m and representing a slope, wherein each LM cost indicates a correlation between the section of the transformed LM response map corresponding to one of the plurality of sections and the slope of a line model of the plurality of line models, and/or wherein each RPM cost indicates a correlation between the section of the transformed RPM response map corresponding to one of the plurality of sections and the slope of a line model of the plurality of line models.
13. The method of claim 11, wherein estimating the lane boundaries comprises: determining one or more LM trajectories and one or more RPM trajectories based on the entire cost volume.
14. An apparatus, comprising: a memory; and a processor communicatively coupled to the memory, wherein the memory and/or the processor are configured to: generate a lane marker (LM) response map from a first camera frame, the LM response map indicating presence of one or more LMs within the first camera frame; generate a raised pavement marker (RPM) response map from a second camera frame, the RPM response map indicating presence of one or more RPMs within the second camera frame; and estimate the lanes based on the LM response map and the RPM response map.
15. The apparatus of claim 14, wherein in generating the LM response map, the memory and/or the processor are configured to: generate a first luminance map from the first camera frame; and filter the first luminance map through a 1-D filter.
16. The apparatus of claim 14, wherein in generating the RPM response map, the memory and/or the processor are configured to: generate a second luminance map from the second camera frame; and filter the second luminance map through a 2-D filter.
17. The apparatus of claim 14, wherein in estimating the lanes, the memory and/or the processor are configured to: reject LM outliers from the LM response map; reject RPM outliers from the RPM response map; and estimate lane boundaries of the lanes based on the LM and RPM response maps with the LM and/or RPM outliers rejected.
18. The apparatus of claim 14, wherein in rejecting the LM outliers, the memory and/or the processor are configured to: derive an LM confidence map comprising one or more LM confidence regions corresponding to one or more regions of the first camera frame, each LM confidence region having an associated LM confidence level indicating a probability that at least one LM will be within the corresponding region of the first camera frame; and reject LM outliers based on the LM confidence map, the LM outliers comprising one or more LMs within the LM response map corresponding to at least one LM confidence region of the LM confidence map whose associated confidence level is less than an LM confidence threshold, and wherein in rejecting the RPM outliers, the memory and/or the processor are configured to: derive an RPM confidence map comprising one or more RPM confidence regions corresponding to one or more regions of the second camera frame, each RPM confidence region having an associated RPM confidence level indicating a probability that at least one RPM will be within the corresponding region of the second camera frame; and reject RPM outliers based on the RPM confidence map, the RPM outliers comprising one or more RPMs within the RPM response map corresponding to at least one RPM confidence region of the RPM confidence map whose associated confidence level is less than an RPM confidence threshold.
19. The apparatus of claim 18, wherein the memory and/or the process are further configured to: transform the LM confidence map and the LM response map respectively into a transformed LM confidence map and a transformed LM response map such that a spatial domain of the transformed LM confidence map is the same as a spatial domain of the transformed LM response map; and/or transform the RPM confidence map and the RPM response map respectively into a transformed RPM confidence map and a transformed RPM response map such that a spatial domain of the transformed RPM confidence map is the same as a spatial domain of the transformed RPM response map, wherein in rejecting the LM outliers, the memory and/or the processor are configured to mask the transformed LM response map with the transformed LM confidence map, and/or wherein in rejecting the RPM outliers, the memory and/or the processor are configured to mask the transformed RPM response map with the transformed RPM confidence map.
20. The apparatus of claim 19, wherein the memory and/or the processor are configured to transform the LM confidence map, the LM response map, and the RPM confidence map by applying an inverse perspective mapping (IPM) transform respectively on the LM confidence map, the LM response map, and the RPM confidence map, and wherein in transforming the RPM response map, the memory and/or the processor are configured to: extract RPM candidate points from the RPM response map, each RPM candidate point indicating a location of a RPM; apply the IPM transform on coordinates of the extracted RPM candidate points; and assign an RPM detection value to the transformed coordinates in the transformed RPM response map, the RPM detection value indicating RPM detection at the transformed coordinate.
21. The apparatus of claim 20, wherein in extracting the RPM candidate points from the RPM response map, the memory and/or the processor are configured to: match the RPM response map with one or more RPM templates, each RPM template defining a RPM shape; and/or process the RPM response map through a support vector machine (SVM) classifier that has been trained based on histogram of oriented gradients (HOG) features.
22. The apparatus of claim 18, wherein the first and second frames are a same camera frame and the LM and RPM confidence maps are a same confidence map, and wherein in estimating the lane boundaries, the memory and/or the processor are configured to: dividing the camera frame into one or more frame sections; determining an LM cost volume comprising one or more LM costs associated with the one or more frame sections such that the one or more associated LM costs indicate correlations between one or more sections of the LM response map corresponding to the one or more frame sections and a plurality of model boundary trajectories; determining an RPM cost volume comprising one or more RPM costs associated with the one or more frame sections such that the one or more associated RPM costs indicate correlations between one or more sections of the RPM response map corresponding to the one or more frame sections and the plurality of model boundary trajectories; determining a confidence cost volume comprising one or more confidence costs associated with the one or more frame sections such that the one or more associated confidence costs indicate confidence levels of one or more sections of the confidence map corresponding to the one or more frame sections; determining an entire cost volume comprising an aggregation of the LM cost volume, the RPM cost volume, and the confidence cost volume; and estimating the lane boundaries based on the entire cost volume.
23. The apparatus of claim 22, wherein the memory and/or the processor are configured to: use the LM response map with the LM outliers removed when determining the LM cost volume, and/or use the RPM response map with the RPM outliers removed when determining the RPM cost volume.
24. The apparatus of claim 22 wherein the memory and/or the processor are further configured to: transform the confidence map into a transformed confidence map; transform the LM response map into a transformed LM response map; and transform the RPM response map into a transformed RPM response map, wherein the transformed confidence map, the transformed LM response map, and the transformed RPM response map are all transformed to have a common spatial domain, and wherein the memory and/or the processor are configured to: determine the LM cost volume based on the transformed LM response map; determine the RPM cost volume based on the transformed RPM response map; and determine the confidence cost volume based on the transformed confidence map.
25. The apparatus of claim 24, wherein the plurality of model boundary trajectories comprises a plurality of line models, each line model having a size n x m and representing a slope, wherein each LM cost indicates a correlation between the section of the transformed LM response map corresponding to one of the plurality of sections and the slope of a line model of the plurality of line models, and/or wherein each RPM cost indicates a correlation between the section of the transformed RPM response map corresponding to one of the plurality of sections and the slope of a line model of the plurality of line models.
26. The apparatus of claim 24, wherein in estimating the lane boundaries, the memory and/or the processor are configured to determine one or more LM trajectories and one or more RPM trajectories based on the entire cost volume.
27. An apparatus, comprising: means for generating a lane marker (LM) response map from a first camera frame, the LM response map indicating presence of one or more LMs within the first camera frame; means for generating a raised pavement marker (RPM) response map from a second camera frame, the RPM response map indicating presence of one or more RPMs within the second camera frame; and means for estimating the lanes based on the LM response map and the RPM response map.
28. The apparatus of claim 27, wherein the means for generating the LM response map generates a first luminance map from the first camera frame; and filters the first luminance map through a 1-D filter, and wherein the means for generating the RPM response map generates a second luminance map from the second camera frame; and filters the second luminance map through a 2-D filter.
29. The apparatus of claim 27, wherein the means for estimating the lanes rejects LM outliers from the LM response map; rejects RPM outliers from the RPM response map; and estimates lane boundaries of the lanes based on the LM and RPM response maps with the LM and/or RPM outliers rejected.
30. A non-transitory computer-readable medium storing computer-executable instructions for an apparatus, the computer-executable instructions comprising: one or more instructions causing the apparatus to generate a lane marker (LM) response map from a first camera frame, the LM response map indicating presence of one or more LMs within the first camera frame; one or more instructions causing the apparatus to generate a raised pavement marker (RPM) response map from a second camera frame, the RPM response map indicating presence of one or more RPMs within the second camera frame; and one or more instructions causing the apparatus to estimate the lanes based on the LM response map and the RPM response map.
</claims>
</document>
