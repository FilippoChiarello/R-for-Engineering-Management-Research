<document>

<filing_date>
2020-05-06
</filing_date>

<publication_date>
2020-11-26
</publication_date>

<priority_date>
2019-05-26
</priority_date>

<ipc_classes>
G06K9/62,G06N20/00,H04N19/137,H04N19/14,H04N19/147,H04N19/176,H04N19/42
</ipc_classes>

<assignee>
ALIBABA GROUP
</assignee>

<inventors>
ZHOU, QINGGANG
XU, LINGJIE
CHEN, Yen-kuang
CHEN, Ping
YU, Xinyang
QIN, Minghai
</inventors>

<docdb_family_id>
73456401
</docdb_family_id>

<title>
AI-ASSISTED PROGRAMMABLE HARDWARE VIDEO CODEC
</title>

<abstract>
AI-assisted programmable hardware video codec is disclosed. According to certain embodiments, a video processing apparatus includes a programmable hardware encoder configured to execute an encoding process on a plurality of input video frames. The video processing apparatus further includes a controller coupled with the programmable hardware encoder. The controller is configured to execute a set of instructions to cause the video processing apparatus to: determine first information of the plurality of input video frames, and adjust the encoding process based on the first information.
</abstract>

<claims>
1. A video processing apparatus, comprising: a programmable hardware encoder configured to execute an encoding process on a plurality of input video frames; and a controller coupled with the programmable hardware encoder, the controller being configured to execute a set of instructions to cause the video processing apparatus to: determine first information of the plurality of input video frames; and adjust the encoding process based on the first information.
2. The video processing apparatus according to claim 1, wherein the first information comprises non-pixel information of the plurality of input video frames.
3. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: determine an initial motion vector for a coding block; determine a search range for the motion vector; and send the initial motion vector and search range to the programmable hardware encoder, wherein the programmable hardware encoder is configured to execute the encoding process using the initial motion vector and search range.
4. The video processing apparatus according to claim 2, wherein the set of instructions comprises a machine-learning algorithm for determining the non-pixel information.
5. The video processing apparatus according to claim 1, wherein the first information comprises information of a Region of Interest (ROI) in an input video frame of the plurality of input video frames, and the controller is configured to execute the set of instruction to cause the video processing apparatus to: detect one or more Regions of Interest (ROIs) in the input video frame; and configure the programmable hardware encoder to encode ROIs using a first computational complexity and to encode non-ROIs using a second computational complexity different from the first computational complexity.
6. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: generate a segmentation of an input video frame of the plurality of input video frames; and send information of the segmentation to the programmable hardware encoder, wherein the programmable hardware encoder selects at least one of a partition size or a coding mode for a coding block, based on the segmentation.
7. The video processing apparatus according to claim 6, wherein the programmable hardware encoder is configured to use a first partition size at a boundary of a segment and to use a second partition size within the segment, the first partition size being smaller than the second partition size.
8. The video processing system according to claim 6, wherein the programmable hardware encoder is configured to determine a coding mode for a coding block within a segment, based on one or more coding modes used for other coding blocks within the same segment.
9. The video processing apparatus according to claim 1, wherein the plurality of input video frames are generated by a decoder during a video transcoding process, and the controller is configured to execute the set of instruction to cause the video processing apparatus to: receive, from the decoder, information indicating at least one of a number of bits or an average quantization parameter for an input video frame of the plurality of input video frames; determine a computational complexity for the input video frame, based on the at least one of the number of bits or the average quantization parameter; and adjust a bitrate of the encoding process based on the computational complexity.
10. The video processing apparatus according to claim 1, wherein the plurality of input video frames are generated by a decoder during a video transcoding process, and the controller is configured to execute the set of instruction to cause the video processing apparatus to: receive, from the decoder, information indicating at least one of an original motion vector or an original coding mode for an input video frame of the plurality of input video frames; determine at least one of a target motion vector or a target coding mode, based on the at least one of the original motion vector or the original coding mode, respectively; and perform the motion estimation and mode decision of the encoding process based on the at least one of the target motion vector or the target coding mode.
11. The video processing apparatus according to claim 1, wherein the programmable hardware encoder is a first encoder, and the controller is configured to execute the set of instruction to cause the video processing apparatus to: receive a coding parameter used by a second encoder for encoding one or more of the plurality of input video frames; and adjust the coding parameter and send the adjusted coding parameter to the programmable hardware encoder, wherein the programmable hardware encoder is configured to execute the encoding process based on the adjusted coding parameter.
12. The video processing apparatus according to claim 11, wherein the coding parameter comprises at least one of a motion vector or a coding mode.
13. The video processing apparatus according to claim 1, wherein the plurality of input video frames are generated by a decoder during a video transcoding process, and the controller is configured to execute the set of instruction to cause the video processing apparatus to: receive, from the decoder, information indicating a coding parameter used for an input video frame of the plurality of input video frames; detect an ROI in the input video frame, based on the coding parameter; and configure the programmable hardware encoder to enhance image quality in the ROI.
14. The video processing apparatus according to claim 13, wherein the coding parameter comprises at least one of a motion vector or a quantization parameter.
15. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: assign a weight to an input video frame of the plurality of input video frames, based on audio information associated with the input video frame; determine an image quality proportional to the weight; and configure the programmable hardware encoder to encode the input video frame according to the determined image quality.
16. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: receive at least one of a motion vector or an estimated rate-distortion information from the programmable hardware encoder; determine at least one of a coding mode or a motion vector based on the received motion vector or the estimated rate-distortion information; and send the at least one of the coding mode or the motion vector to the programmable hardware encoder, wherein the programmable hardware encoder is configured to execute the encoding process according to the at least one of the coding mode or the motion vector.
17. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: determine a coding-tree-unit (CTU) structure for an input video frame of the plurality of input video frames; and send, to the programmable hardware encoder, information indicating the CTU structure, wherein the programmable hardware encoder is configured to partition the input video frame according to the CTU structure.
18. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: determine a first un-coded I-frame in the plurality of input video frames; determine one or more additional un-coded I-frames in the plurality of input video frames; index the first and additional un-coded I-frames; determine a group of pictures (GOP) according to the indexes of the first and additional un-coded I-frames; and configure the programmable hardware encoder to encode the plurality of input video frames according to the determined GOP.
19. The video processing apparatus according to claim 18, wherein the plurality of input video frames are generated by a decoder during a video transcoding process, and the controller is configured to execute the set of instruction to cause the video processing apparatus to: receive, from the decoder, information indicating intra coding units (CUs) used for encoding the plurality of input video frames; and determine the first un-coded I-frame based on the intra CUs.
20. The video processing apparatus according to claim 18, wherein the set of instructions comprises a machine-learning algorithm for determining the first un-coded I-frame.
21. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: determine similarity of the plurality of input video frames; assign a bit budget to each of the plurality of input video frames, based on the similarity of the plurality of input video frames; and send the bit budgets to the programmable hardware encoder, wherein the programmable hardware encoder is configured to encode the plurality of input video frames according to the corresponding bit budgets.
22. The video processing apparatus according to claim 21, wherein the set of instructions comprises a reinforcement-learning algorithm for determining the similarity of the plurality of input video frames.
23. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: determine similarity of the plurality of input video frames; determine one or more reference frames, based on the similarity of the plurality of input video frames; and send information of the one or more reference frames to the programmable hardware encoder, wherein the programmable hardware encoder is configured to encode the plurality of input video frames using the one or more reference frames.
24. The video processing apparatus according to claim 23, wherein the set of instructions comprises a machine-learning algorithm for determining the similarity of the plurality of input video frames.
25. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: detect one or more ROIs in an input video frame of the plurality of input video frames; set at least one of a coding unit or a prediction unit based on the one or more ROIs; and send information of the at least one of the coding unit or the prediction unit to the programmable hardware encoder, wherein programmable hardware encoder is configured to execute the encoding processing using the at least one of the coding unit or the prediction unit.
26. The video processing apparatus according to claim 1, wherein the controller is configured to execute the set of instruction to cause the video processing apparatus to: generate a segmentation of an input video frame of the plurality of input video frames; set at least one of a coding unit or a prediction unit based on the segmentation of the input video frame; and send information of the at least one of the coding unit or the prediction unit to the programmable hardware encoder, wherein programmable hardware encoder is configured to execute the encoding processing using the at least one of the coding unit or the prediction unit.
27. A non-transitory computer-readable storage medium storing a set of instructions that are executable by one or more processors coupled with a programmable hardware encoder, wherein the execution of the set of instructions causes the programmable hardware encoder to: determine first information of a plurality of input video frames; and adjust, based on the first information, an encoding process performed by the programmable hardware encoder on the plurality of input video frames.
28. A computer-implemented method, comprising: executing, by a programmable hardware encoder, an encoding process on a plurality of input video frames; determine, by a controller coupled with the programmable hardware encoder, first information of the plurality of input video frames; and adjusting, by the controller, the encoding process based on the first information.
</claims>
</document>
