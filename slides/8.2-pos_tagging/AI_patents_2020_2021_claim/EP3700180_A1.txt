<document>

<filing_date>
2018-09-28
</filing_date>

<publication_date>
2020-08-26
</publication_date>

<priority_date>
2017-10-16
</priority_date>

<ipc_classes>
G06K9/00,G06T7/00,H04N5/14
</ipc_classes>

<assignee>
HANGZHOU HIKVISION DIGITAL TECHNOLOGY COMPANY
</assignee>

<inventors>
LU, HAIXIAN
</inventors>

<docdb_family_id>
66139242
</docdb_family_id>

<title>
VIDEO BLOCKING REGION SELECTION METHOD AND APPARATUS, ELECTRONIC DEVICE, AND SYSTEM
</title>

<abstract>
A method, apparatus, electronic device, and a system for selecting a to-be-masked region in a video are disclosed, which are of the technical field of computer vision. The method includes: obtaining a video to be detected; determining specified target sets in the video through a preset target detection algorithm, wherein each specified target set is a set of pixels of one specified target in video frames of the video; determining whether a specified target corresponding to each specified target set is a sensitive target respectively through a preset recognition algorithm; and using a specified target set as to-be-masked regions in the video when a specified target corresponding to this specified target set is determined as a sensitive target. In this method, specified targets are first determined, and then it is determined whether the specified targets are sensitive targets. By performing multiple such determinations, the accuracy of selecting the to-be-masked regions can be improved.
</abstract>

<claims>
1. A method for selecting a to-be-masked region in a video, comprising: obtaining a video to be detected; determining specified target sets in the video through a preset target detection algorithm, wherein each specified target set is a set of pixels of one specified target in video frames of the video; determining whether a specified target corresponding to each specified target set is a sensitive target respectively through a preset recognition algorithm; and using a specified target set as to-be-masked regions in the video when a specified target corresponding to this specified target set is determined as a sensitive target.
2. The method according to claim 1, wherein after using each specified target set as to-be-masked regions in the video when a specified target corresponding to this specified target set is determined as a sensitive target, the method further comprises:
masking the to-be-masked regions in the video frames of the video.
3. The method according to claim 1, wherein determining specified target sets in the video through a preset target detection algorithm comprises: detecting regions corresponding to all specified targets in each video frame of the video respectively through the preset target detection algorithm; for each of the specified targets, associating regions corresponding to the specified target in chronological order to obtain a trajectory of the specified target; and using the trajectories of the specified targets as the specified target sets for the specified targets in the video.
4. The method according to claim 3, wherein detecting regions corresponding to all specified targets in each video frame of the video respectively through the preset target detection algorithm comprises: partitioning each video frame of the video into a preset number of regions to obtain a plurality of pixel regions; extracting a feature of each pixel region respectively through a pre-trained convolutional neural network; determining whether each pixel region matches with any of the specified targets through a preset classifier according to the feature of the pixel region; and in response to a pixel region matching with a specified target, determining a region corresponding to the specified target through a bounding box regression algorithm based on all pixel regions matching with the specified target.
5. The method according to claim 3, wherein for each of the specified targets, associating regions corresponding to the specified target in chronological order to obtain a trajectory of the specified target comprises: extracting features of regions corresponding to all the specified targets in each video frame of the video to obtain region features; determining a set of region features corresponding to each specified target respectively from all the region features through a preset multi-target tracking algorithm; and associating regions corresponding to each set of region features in chronological order respectively to obtain a trajectory of each specified target.
6. The method according to claim 1, wherein determining whether a specified target corresponding to each specified target set is a sensitive target respectively through the preset recognition algorithm comprises: for each specified target set, selecting a preset number of specified target video frames from video frames corresponding to the specified target set according to a preset video frame extraction manner; recognizing the specified target in all specified target video frames through a preset recognition algorithm to obtain a target recognition result; determining that the specified target corresponding to the target recognition result is a sensitive target when the target recognition result meets a preset determination rule; or determining that the specified target corresponding to the target recognition result is not a sensitive target when the target recognition result does not meet the preset determination rule.
7. The method according to claim 6, wherein recognizing the specified target in all specified target video frames through a preset recognition algorithm to obtain a target recognition result comprises: extracting features of the specified targets in all the specified target video frames to obtain target features; recognizing sensitive features from the target features through a preset target classification algorithm or a recognition algorithm; and using a relation between the number of the sensitive features and the number of all the target features as the target recognition result.
8. An apparatus for selecting a to-be-masked region in a video, comprising: a video obtaining module, configured for obtaining a video to be detected; a specified set determining module, configured for determining specified target sets in the video through a preset target detection algorithm, wherein each specified target set is a set of pixels of one specified target in video frames of the video; a sensitive target determining module, configured for determining whether a specified target corresponding to each specified target set is a sensitive target respectively through a preset recognition algorithm; and a to-be-masked region selection module, configured for using a specified target set as to-be-masked regions in the video when a specified target corresponding to this specified target set is determined as a sensitive target.
9. The apparatus according to claim 8, further comprising:
a masking module, configured for masking the to-be-masked regions in the video frames of the video.
10. The apparatus according to claim 8, wherein the specified set determining module comprises: a target detection sub-module, configured for detecting regions corresponding to all specified targets in each video frame of the video respectively through the preset target detection algorithm; a target association sub-module, configured for, for each of the specified targets, associating regions corresponding to the specified target in chronological order to obtain a trajectory of the specified target; and a target set sub-module, configured for using the trajectories of the specified targets as the specified target sets for the specified targets in the video.
11. The apparatus according to claim 10, wherein the target detection sub-module comprises: a region partition unit, configured for partitioning each video frame of the video into a preset number of regions to obtain a plurality of pixel regions; a first feature obtaining unit, configured for extracting a feature of each pixel region respectively through a pre-trained convolutional neural network; a target matching unit, configured for determining whether each pixel region matches with any of the specified targets through a preset classifier according to the feature of the pixel region; and a region determining unit, configured for, in response to a pixel region matching with a specified target, determining a region corresponding to the specified target through a bounding box regression algorithm based on all pixel regions matching with the specified target.
12. The apparatus according to claim 10, wherein the target association sub-module comprises: a second feature obtaining unit, configured for extracting features of regions corresponding to all the specified targets in each video frame of the video to obtain region features; a set determining unit, configured for determining a set of region features corresponding to each specified target respectively from all the region features through a preset multi-target tracking algorithm; and a target trajectory determining unit, configured for associating regions corresponding to each set of region features in chronological order respectively to obtain a trajectory of each specified target.
13. The apparatus according to claim 8, wherein the sensitive target determining module comprises: a video frame selection sub-module, configured for, for each specified target set, selecting a preset number of specified target video frames from video frames corresponding to the specified target set according to a preset video frame extraction manner; a first determination sub-module, configured for recognizing the specified target in all specified target video frames through a preset recognition algorithm to obtain a target recognition result; and a second determination sub-module, configured for determining that the specified target corresponding to the target recognition result is a sensitive target when the target recognition result meets a preset determination rule; or determining that the specified target corresponding to the target recognition result is not a sensitive target when the target recognition result does not meet the preset determination rule.
14. The apparatus according to claim 13, wherein the first determination sub-module comprises: a third feature obtaining unit, configured for extracting features of the specified targets in all the specified target video frames to obtain target features; a sensitive feature recognition unit, configured for recognizing sensitive features from the target features through a preset target classification algorithm or a recognition algorithm; and a recognition result determining unit, configured for using a relation between the number of the sensitive features and the number of all the target features as the target recognition result.
15. An electronic device, comprising a processor and a memory, wherein
the memory is configured for storing a computer program; and
the processor is configured for executing the program stored in the memory to carry out operations comprising: obtaining a video to be detected; determining specified target sets in the video through a preset target detection algorithm, wherein each specified target set is a set of pixels of one specified target in video frames of the video; determining whether a specified target corresponding to each specified target set is a sensitive target respectively through a preset recognition algorithm; and using a specified target set as to-be-masked regions in the video when a specified target corresponding to this specified target set is determined as a sensitive target.
16. The electronic device according to claim 15, wherein the operations further comprising:
masking the to-be-masked regions in the video frames of the video.
17. The electronic device according to claim 15, wherein determining specified target sets in the video through a preset target detection algorithm comprises: detecting regions corresponding to all specified targets in each video frame of the video respectively through the preset target detection algorithm; for each of the specified targets, associating regions corresponding to the specified target in chronological order to obtain a trajectory of the specified target; and using the trajectories of the specified targets as the specified target sets for the specified targets in the video.
18. The electronic device according to claim 17, wherein detecting regions corresponding to all specified targets in each video frame of the video respectively through the preset target detection algorithm comprises: partitioning each video frame of the video into a preset number of regions to obtain a plurality of pixel regions; extracting a feature of each pixel region respectively through a pre-trained convolutional neural network; determining whether each pixel region matches with any of the specified targets through a preset classifier according to the feature of the pixel region; and in response to a pixel region matching with a specified target, determining a region corresponding to the specified target through a bounding box regression algorithm based on all pixel regions matching with the specified target.
19. The electronic device according to claim 17, wherein for each of the specified targets, associating regions corresponding to the specified target in chronological order to obtain a trajectory of the specified target comprises: extracting features of regions corresponding to all the specified targets in each video frame of the video to obtain region features; determining a set of region features corresponding to each specified target respectively from all the region features through a preset multi-target tracking algorithm; and associating regions corresponding to each set of region features in chronological order respectively to obtain a trajectory of each specified target.
20. The electronic device according to claim 15, wherein determining whether a specified target corresponding to each specified target set is a sensitive target respectively through the preset recognition algorithm comprises: for each specified target set, selecting a preset number of specified target video frames from video frames corresponding to the specified target set according to a preset video frame extraction manner; recognizing the specified target in all specified target video frames through a preset recognition algorithm to obtain a target recognition result; determining that the specified target corresponding to the target recognition result is a sensitive target when the target recognition result meets a preset determination rule; or determining that the specified target corresponding to the target recognition result is not a sensitive target when the target recognition result does not meet the preset determination rule.
21. The electronic device according to claim 20, wherein recognizing the specified target in all specified target video frames through a preset recognition algorithm to obtain a target recognition result comprises: extracting features of the specified targets in all the specified target video frames to obtain target features; recognizing sensitive features from the target features through a preset target classification algorithm or a recognition algorithm; and using a relation between the number of the sensitive features and the number of all the target features as the target recognition result.
22. A system for selecting a to-be-masked region in a video, comprising a video capturing device and a video processor; wherein
the video capturing module is configured for capturing a video to be detected; and
the video processor is configured for carrying out the method of any of claims 1 to 7.
</claims>
</document>
