<document>

<filing_date>
2020-07-09
</filing_date>

<publication_date>
2020-10-29
</publication_date>

<priority_date>
2015-11-12
</priority_date>

<ipc_classes>
G06F17/11,G06K9/00,G06K9/62,G06T7/20,G06T7/223
</ipc_classes>

<assignee>
ALIBABA GROUP
</assignee>

<inventors>
ZHANG YU
DU, ZHIJUN
WANG, NAN
</inventors>

<docdb_family_id>
58694441
</docdb_family_id>

<title>
FACE LOCATION TRACKING METHOD, APPARATUS, AND ELECTRONIC DEVICE
</title>

<abstract>
A first face region within a first image is determined. The first face region includes a location of a face within the first image. Based on the determined first face region within the first image, a predicted face region within a second image is determined. A first region of similarity within the predicted face region is determined. The first region of similarity has at least a predetermined degree of similarity to the first face region within the first image. Whether a second face region is present within the second image is determined. The location of the face within the second image is determined based on the first region of similarity, the determination of whether the second face region is present within the second image, and a face region selection rule.
</abstract>

<claims>
1. 1.-20. (canceled)
21. A computer-implemented method for tracking locations of a face across a plurality of images comprising a first image and a second image, the method comprising: determining a first face region within the first image, the first face region including a location of the face within the first image; based on the determined first face region within the first image, determining a predicted face region within the second image; setting a plurality of comparison regions within the predicted face region, each comparison region in the plurality of comparison regions being different; calculating, for each comparison region in the plurality of comparison regions, a degree of similarity between the respective comparison region and the first face region based on at least one of an image texture or an image gradient of the respective comparison region and the first face region; based on determining that a particular comparison region in the plurality of comparison regions has a higher degree of similarity to the first face region than corresponding degrees of similarity of the other comparison regions in the plurality of comparison regions and satisfies a predetermined degree of similarity to the first face region, selecting the particular comparison region among the plurality of comparison regions as a first region of similarity; determining whether a second face region is present within the second image; and determining the location of the face within the second image based on the first region of similarity, the determination of whether the second face region is present within the second image, and a face region selection rule.
22. The computer-implemented method of claim 21, wherein calculating, for each comparison region in the plurality of comparison regions, the degree of similarity between the respective comparison region and the first face region comprises performing calculations according to the following equations: wherein leftori, leftdes, topori, and topdes and respectively represent a left boundary location of the first face region, a left boundary location of the respective comparison region, an upper boundary location of the first face region, and an upper boundary location of the respective comparison region, wherein width represents a width of the first face region and height represents a height of the first face region, wherein f(i,j) represents a grayscale value of a pixel of the first image having coordinates (i,j) in the first face region of the first image and g(i,j) represents a grayscale value of a pixel of the second image having coordinates (i,j) in the respective comparison region of the second image, and wherein x represents a preset threshold and dis is the degree of similarity between the first face region and the respective comparison region.
23. The computer-implemented method of claim 21, wherein setting a plurality of comparison regions within the predicted face region comprises: setting a first comparison region within the predicted face region; and repeatedly translating from the first comparison region by a first step to generate the plurality of comparison regions.
24. The computer-implemented method of claim 23, wherein the first step is two or more pixels of the second image.
25. The computer-implemented method of claim 23, wherein the first step is equal to 1% to 10% of a width or a height of the second image.
26. The computer-implemented method of claim 21, wherein setting a plurality of comparison regions within the predicted face region comprises: setting a first comparison region within the predicted face region; and setting a second comparison region within the predicted face region by translating the first comparison region by a first step, the first step being two or more pixels of the second image.
27. The computer-implemented method of claim 26, wherein setting a plurality of comparison regions within the predicted face region comprises: setting a third comparison region within the predicted face region by translating the first region of similarity by a second step smaller than the first step.
28. The computer-implemented method of claim 21, wherein setting a plurality of comparison regions within the predicted face region comprises dividing the predicted face region into a preset number of comparison regions.
29. The computer-implemented method of claim 21, wherein the face region selection rule specifies criteria for determining the location of the face within the second image, including at least one of: when the second face region is not present within the second image, the location of the face is the first region of similarity; when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is 0, the location of the face is the first region of similarity; when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is less than a preset threshold, the location of the face is the first region of similarity; or when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is greater than or equal to the preset threshold, the location of the face is the second face region.
30. The computer-implemented method of claim 21, wherein determining a first face region within the first image comprises: determining that the first image comprises a plurality of faces; determining a plurality of face region areas; and determining a region comprising a face of the plurality of faces having the largest face region area to be the first face region.
31. A non-transitory, computer-readable medium storing one or more instructions executable by a computer system to perform operations comprising: determining a first face region within a first image, the first face region including a location of the face within the first image; based on the determined first face region within the first image, determining a predicted face region within a second image; setting a plurality of comparison regions within the predicted face region, each comparison region in the plurality of comparison regions being different; calculating, for each comparison region in the plurality of comparison regions, a degree of similarity between the respective comparison region and the first face region based on at least one of an image texture or an image gradient of the respective comparison region and the first face region; based on determining that a particular comparison region in the plurality of comparison regions has a higher degree of similarity to the first face region than corresponding degrees of similarity of the other comparison regions in the plurality of comparison regions and satisfies a predetermined degree of similarity to the first face region, selecting the particular comparison region among the plurality of comparison regions as a first region of similarity; determining whether a second face region is present within the second image; and determining the location of the face within the second image based on the first region of similarity, the determination of whether the second face region is present within the second image, and a face region selection rule.
32. The computer-readable medium of claim 31, wherein calculating, for each comparison region in the plurality of comparison regions, the degree of similarity between the respective comparison region and the first face region comprises performing calculations according to the following equations: wherein leftori, leftdes, topori, and topdes respectively represent a left boundary location of the first face region, a left boundary location of the respective comparison region, an upper boundary location of the first face region, and an upper boundary location of the respective comparison region, wherein width represents a width of the first face region and height represents a height of the first face region, wherein f(i,j) represents a grayscale value of a pixel of the first image having coordinates (i,j) in the first face region of the first image and g(i,j) represents a grayscale value of a pixel of the second image having coordinates (i,j) in the respective comparison region of the second image, and wherein x represents a preset threshold and dis is the degree of similarity between the first face region and the respective comparison region.
33. The computer-readable medium of claim 31, wherein setting a plurality of comparison regions within the predicted face region comprises: setting a first comparison region within the predicted face region; and repeatedly translating from the first comparison region by a first step to generate the plurality of comparison regions.
34. The computer-readable medium of claim 33, wherein the first step is two or more pixels of the second image.
35. The computer-readable medium of claim 31, wherein setting a plurality of comparison regions within the predicted face region comprises: setting a first comparison region within the predicted face region; and setting a second comparison region within the predicted face region by translating the first comparison region by a first step, the first step being two or more pixels of the second image.
36. The computer-readable medium of claim 35, wherein setting a plurality of comparison regions within the predicted face region comprises: setting a third comparison region within the predicted face region by translating the first region of similarity by a second step smaller than the first step.
37. The computer-readable medium of claim 31, wherein the face region selection rule specifies criteria for determining the location of the face within the second image, including at least one of: when the second face region is not present within the second image, the location of the face is the first region of similarity; when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is 0, the location of the face is the first region of similarity; when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is less than a preset threshold, the location of the face is the first region of similarity; or when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is greater than or equal to the preset threshold, the location of the face is the second face region.
38. The computer-readable medium of claim 31, wherein determining a first face region within the first image comprises: determining that the first image comprises a plurality of faces; determining a plurality of face region areas; and determining a region comprising a face of the plurality of faces having the largest face region area to be the first face region.
39. A computer-implemented system, comprising: one or more computers; and one or more computer memory devices interoperably coupled with the one or more computers and having tangible, non-transitory, machine-readable media storing one or more instructions that, when executed by the one or more computers, perform one or more operations comprising: determining a first face region within a first image, the first face region including a location of the face within the first image; based on the determined first face region within the first image, determining a predicted face region within a second image; setting a plurality of comparison regions within the predicted face region, each comparison region in the plurality of comparison regions being different; calculating, for each comparison region in the plurality of comparison regions, a degree of similarity between the respective comparison region and the first face region based on at least one of an image texture or an image gradient of the respective comparison region and the first face region; based on determining that a particular comparison region in the plurality of comparison regions has a higher degree of similarity to the first face region than corresponding degrees of similarity of the other comparison regions in the plurality of comparison regions and satisfies a predetermined degree of similarity to the first face region, selecting the particular comparison region among the plurality of comparison regions as a first region of similarity; determining whether a second face region is present within the second image; and determining the location of the face within the second image based on the first region of similarity, the determination of whether the second face region is present within the second image, and a face region selection rule.
40. A computer-implemented system of claim 39, wherein the face region selection rule specifies criteria for determining the location of the face within the second image, including at least one of: when the second face region is not present within the second image, the location of the face is the first region of similarity; when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is 0, the location of the face is the first region of similarity; when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is less than a preset threshold, the location of the face is the first region of similarity; or when the second face region is present within the second image, and a spatial overlap coefficient between the second face region and the first region of similarity is greater than or equal to the preset threshold, the location of the face is the second face region.
</claims>
</document>
