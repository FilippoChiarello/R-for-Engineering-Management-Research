<document>

<filing_date>
2019-12-16
</filing_date>

<publication_date>
2020-05-21
</publication_date>

<priority_date>
2018-02-13
</priority_date>

<ipc_classes>
G06F9/30,G06F9/38,G06N20/00,G06N3/063,G06N3/08
</ipc_classes>

<assignee>
SHANGHAI CAMBRICON INFORMATION TECHNOLOGY COMPANY
</assignee>

<inventors>
WANG, BINGRUI
ZHANG, YAO
</inventors>

<docdb_family_id>
70727683
</docdb_family_id>

<title>
COMPUTING DEVICE AND METHOD
</title>

<abstract>
The present disclosure provides a computation device. The computation device is configured to perform a machine learning computation, and includes an operation unit, a controller unit, and a conversion unit. The storage unit is configured to obtain input data and a computation instruction. The controller unit is configured to extract and parse the computation instruction from the storage unit to obtain one or more operation instructions, and to send the one or more operation instructions and the input data to the operation unit. The operation unit is configured to perform operations on the input data according to one or more operation instructions to obtain a computation result of the computation instruction. In the examples of the present disclosure, the input data involved in machine learning computations is represented by fixed-point data, thereby improving the processing speed and efficiency of training operations.
</abstract>

<claims>
1. A computation device configured to perform a network model computation, wherein the network model comprises: a neural network model and/or a non-neural network model; the computation device comprising: a computation unit, a controller unit and a storage unit, wherein the storage unit comprises a data input/output unit; wherein: the data input/output unit is configured to obtain at least one input data, one network model and one computation instruction, wherein the at least one input data is fixed-point data; the controller unit is configured to extract the computation instruction from the storage unit and decode the computation instruction to obtain one or more computation instructions; transmit the one or more computation instructions or the at least one input data to the computation unit; and the computation unit is configured to compute the at least one input data according to the one or more operation instructions to obtain a result of the computation instruction, wherein the results of computation instructions are floating-point data.
2. The computation device of claim 1, wherein the storage unit further includes: a storage medium configured to store the network model and the at least one input data, and a scalar data storage unit configured to store scalar data.
3. The computation device of claim 1, wherein the controller unit includes: an instruction cache unit configured to store a computation instruction associated with the network model, an instruction processing unit configured to decode the computation instruction to obtain the one or more operation instructions, and a storage queue unit configured to store an instruction queue, the instruction queue comprising one or more operation instructions or computation instructions, wherein the one or more operation instructions or computation instructions are to be executed in a sequence.
4. The computation device of claim 3, wherein the data input/output unit further obtains a data conversion instruction, and the data conversion instruction includes an opcode field and an opcode; and wherein: the opcode is configured to indicate information of a function of the data conversion instruction, and the opcode field of the data conversion instruction includes information of a decimal point position of input data and an identifier of data type conversion; the controller unit further includes a data conversion unit configured to convert the at least one input data into fixed-point data according to the decimal point position of input data and the identifier of data type conversion; and the instruction processing unit further configured to parse the data conversion instruction when the at least one input data is floating-point data to obtain the decimal point position of input data and the identifier of data type conversion.
5. The computation device of claim 3, wherein the computation unit includes: a dependency relationship processing unit configured to: determine whether there exists an associated relationship between a first operation instruction and a zeroth operation instruction before the first operation instruction, cache the first operation instruction in the instruction cache unit based on a determination that there exists an associated relationship between the first operation instruction and the zeroth operation instruction, and extract the first operation instruction from the instruction cache unit to the operation unit, when an execution of the zeroth operation instruction is completed, wherein determining whether there exists an associated relationship between a first operation instruction and a zeroth operation instruction before the first operation instruction by the dependency relationship processing unit includes: extracting a first storage address interval of data required in the first operation instruction according to the first operation instruction, extracting a zeroth storage address interval of data required in the zeroth operation instruction according to the zeroth operation instruction, determining that there exists an associated relationship between the first operation instruction and the zeroth operation instruction, when an overlapped region exists between the first storage address interval and the zeroth storage address interval, and determining that there does not exist an associated relationship between the first operation instruction and the zeroth operation instruction, when no overlapped region exists between the first storage address interval and the zeroth storage address interval, and wherein the first operation instruction and the zeroth operation instruction are any two of the plurality of operation instructions.
6. The computation device of claim 1, wherein the operation unit include a plurality of operation modules, the plurality of operation modules configured to execute n-stage pipeline computations, and wherein the operation unit specifically configured to execute a first-stage pipeline computation on the at least one input data to obtain a first intermediate result, input the first intermediate result to a second stage of the pipeline to execute a second-stage pipeline computation and obtain a second intermediate result, . . . , input the nâˆ’1th intermediate result to a nth stage of the pipeline to execute a nth-stage pipeline computation and obtain a nth intermediate result and input the nth intermediate result to the storage unit, wherein n is an integer greater than or equal to 3.
7. The computation device of claim 6, wherein the controller unit transmits a decimal point position of the at least one input data to the operation unit, and the operation unit further includes: a derivation unit configured to derive a decimal point position of one or more intermediate results according to the decimal point position of the at least one input data.
8. The computation device of claim 1, wherein the operation unit further includes: a data cache unit configured to cache one or more intermediate results.
9. The computation device of claim 1, wherein the operation unit includes a primary processing circuit, a branch processing circuit, and a plurality of secondary processing circuit, wherein: the primary processing circuit is configured to divide input data A into a plurality of data blocks, and transmit at least one of the plurality of data blocks and an operation instruction of which the input data A is involved in operation to the branch processing circuit, wherein the input data A is any one of the at least one input data, the branch processing circuit is configured to forward data transmitted between the primary processing circuit and the plurality of secondary processing circuits, the plurality of secondary processing circuits is configured to perform operations on the data blocks received according to the operation instruction to obtain at least one intermediate result, and to transmit the at least one intermediate result to the branch processing circuit, and the primary processing circuit is configured to process the at least one intermediate result transmitted by the branch processing circuit to obtain a result of the computation instruction, and transmit the result of the computation instruction to the controller unit, wherein the at least one intermediate result is floating-point data.
10. The computation device of claim 1, wherein the operation unit includes a primary circuit and a plurality of secondary processing circuits, wherein: the plurality of secondary processing circuits is distributed in an array, each secondary processing circuit is coupled with adjacent other secondary processing circuits, and the primary processing circuit is coupled with K secondary processing circuits of the plurality of secondary processing circuits, wherein the K secondary processing circuits include n secondary processing circuits in a first row, n secondary processing circuits in a mth row and m secondary processing circuits in a first column; the K secondary processing circuits are configured to forward data and instructions transmitted between the primary processing circuit and the plurality of secondary processing circuits; the primary processing circuit is configured to divide input data A into a plurality of data blocks, and transmit at least one of the plurality of data blocks and an operation instruction of which the input data A is involved in operation to the branch processing circuit, the input data A being any one of the at least one input data; the branch processing circuit is configured to forward data transmitted between the primary processing circuit and the plurality of secondary processing circuits; the plurality of secondary processing circuits is configured to perform operations on the data blocks received according to the operation instruction to obtain at least one intermediate result, and to transmit the at least one intermediate result to the branch processing circuit; and the primary processing circuit is configured to process the at least one intermediate result transmitted by the branch processing circuit to obtain a result of the computation instruction, and transmit the result of the computation instruction to the controller unit; wherein the at least one intermediate result is floating-point data.
11. The computation device of claim 9, wherein: the primary processing circuit is specifically configured to perform a combined ranking processing on the plurality of intermediate results received from the plurality of processing circuits to obtain a computation result of the computation instruction, or the primary processing circuit is configured to a combined ranking processing and an activation processing on the plurality of intermediate results received from the plurality of processing circuits to obtain the computation result of the computation instruction.
12. The computation device of claim 9, wherein the primary processing circuit includes one or any combination of a conversion processing circuit, an activation processing circuit, and an addition processing circuit, wherein: the conversion processing circuit is configured to perform a conversion operation between a first data structure and a second data structure on data blocks or intermediate results received by the primary processing circuit, or perform a conversion operation between a first data type and a second data type on data blocks or intermediate results received by the primary processing circuit, the activation processing circuit is configured to perform an activation operation on data in the primary processing circuit, and the addition processing circuit is configured to perform an addition operation or an accumulation operation.
13. The computation device of claim 9, wherein the plurality of secondary processing circuits includes: a multiplication processing circuit, wherein the multiplication processing circuit is configured to perform a multiplication operation on the data blocks received to obtain product results.
14. The computation device of claim 9, wherein the plurality of secondary processing circuit further includes: an accumulation processing circuit, and wherein the accumulation processing circuit is configured to perform an accumulation operation on the product results to obtain the intermediate results.
15. A neural network operation device, comprising one or more computation devices according to claim 1, wherein the at least one computation device is configured to obtain data to be processed and control information from other processing devices, to perform a specified machine learning computation, and to transmit an execution result to the other processing devices through I/O interfaces, wherein: when the neural network operation device includes a plurality of the computation devices, the plurality of computation devices is configured to couple and transmit data with each other through a specific structure, and the plurality of computation devices is configured to: interconnect and to transmit data through a fast external device interconnection PCIE (peripheral component interface express) bus to support larger-scale machine learning computations, share the same one control system or have respective control systems, share the same one memory or have respective memories, and deploy an interconnection manner of any arbitrary interconnection topology.
16. A combination processing device, comprising the neural network operation device of claim 15, universal interconnection interfaces, and other processing devices, wherein the neural network operation device is configured to interact with the other processing devices to jointly perform user-specified computing operations.
17. The combination processing device of claim 16, further comprising a storage device, wherein the storage device is configured to couple with the neural network operation device and the other processing devices respectively for storing data of the neural network operation device and the other processing devices.
18. A computation method configured to perform a network model computation, wherein the network model comprises: a neural network model and/or a non-neural network model, the method comprising: obtaining at least one input data, one network model and one computation instruction, the at least one input data being fixed-point data, decoding the computation instruction to obtain one or more computation instructions, and computing the at least one input data according to the one or more computation instructions to obtain results of computation instructions, the results of computation instructions being floating-point data.
19. The method of claim 18, wherein when the at least one input data is fixed-point data, the method may further include: obtaining a data conversion instruction, the data conversion instruction including an opcode field and an opcode, wherein the opcode is configured to indicate information of a function of the data conversion instruction, and the opcode field of the data conversion instruction includes information of a decimal point position of input data and an identifier of data type conversion, parsing the data conversion instruction to obtain the decimal point position of input data and the identifier of data type conversion, and converting the at least one input data into fixed-point data according to the decimal point position of input data and the identifier of data type conversion.
20. The method of claim 18, wherein computing the at least one input data according to the one or more computation instructions to obtain results of computation instructions includes: computing the second input data according to the one or more computation instructions to obtain one or more intermediate results, the last intermediate result of the one or more intermediate results being a result of the computation instruction, when the last intermediate result is fixed-point data, converting the last intermediate result into floating-point data according to the decimal point position of the last intermediate result.
21. The method of claim 20, further comprising: deriving a decimal point position of the one or more intermediate results according to the decimal point position of the at least one input data.
</claims>
</document>
