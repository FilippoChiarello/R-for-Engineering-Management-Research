<document>

<filing_date>
2020-03-18
</filing_date>

<publication_date>
2020-10-29
</publication_date>

<priority_date>
2019-04-24
</priority_date>

<ipc_classes>
G06T7/33
</ipc_classes>

<assignee>
BAIDU ON-LINE NETWORK TECHNOLOGY (BEIJING) COMPANY
</assignee>

<inventors>
BAI YU
LUO, PAN
MA, CHANGJIE
YAN, MIAO
ZHOU, Zixiang
SHE, Dangen
</inventors>

<docdb_family_id>
67416448
</docdb_family_id>

<title>
METHOD AND APPARATUS FOR POINT CLOUD REGISTRATION, AND COMPUTER READABLE MEDIUM
</title>

<abstract>
The present disclosure discloses a method and an apparatus for point cloud registration. The method includes: segmenting a source point cloud and a destination point cloud respectively into different categories of attribute features based on semantic; segmenting the source point cloud and the destination point cloud into a plurality of grids based on the attribute features; calculating a current similarity between the source point cloud and the destination point cloud based on the plurality of grids; determining whether the current similarity and a current iterative number satisfy a preset condition; when the current similarity and the current iterative number satisfy the preset condition, performing a registration on the source point cloud and the destination point cloud to obtain a registered result; and based on the registered result, adjusting a position of the source point cloud, updating the current iterative number.
</abstract>

<claims>
1. A method for point cloud registration, comprising: segmenting a source point cloud into different categories of attribute features based on semantic, and segmenting a destination point cloud into different categories of the attribute features based on semantic, the attribute features comprising a ground feature and a non-ground feature; segmenting the source point cloud and the destination point cloud into a plurality of grids based on the attribute features; calculating a current similarity between the source point cloud and the destination point cloud based on the plurality of grids; determining whether the current similarity and a current iterative number satisfy a preset condition; in response to determining that the current similarity and the current iterative number satisfy the preset condition, performing a registration on the source point cloud and the destination point cloud to obtain a registered result; and based on the registered result, adjusting a position of the source point cloud, updating the current iterative number, and calculating an updated similarity between the destination point cloud and the source point cloud after adjusting the position.
2. The method of claim 1, wherein determining whether the current similarity and the current iterative number satisfy the preset condition comprises: comparing the current similarity with a first preset threshold, and comparing the current iterative number with a second preset threshold; and comparing the current similarity with a previously calculated similarity when the current similarity is smaller than or equal to the first threshold, and the current iterative number is smaller than the second threshold; and wherein the preset condition comprises: the current similarity being greater than the previously calculated similarity.
3. The method of claim 2, further comprising: when the current similarity is smaller than or equal to the previously calculated similarity, setting back the position of the source point cloud, and performing the registration on the source point cloud and the destination point cloud.
4. The method of claim 2, further comprising: when the current similarity is greater than the first threshold, or the current iterative number is greater than or equal to the second threshold, decreasing a grid size of each of the plurality of grids according to a preset convergence step size; determining whether the grid size decreased is greater than a third preset threshold; and, in response to determining that the grid size decreased is greater than the third preset threshold, based on the grid size decreased, segmenting the source point cloud and the destination point cloud into a plurality of grids according to the attribute features.
5. The method of claim 1, wherein calculating the current similarity between the source point cloud and the destination point cloud based on the plurality of grids comprises: calculating the current similarity between the source point cloud and the destination point cloud based on the attribute features of the plurality of grids.
6. The method of claim 5, wherein calculating the current similarity between the source point cloud and the destination point cloud based on the attribute features of the plurality of grids comprises: for each grid in the source point cloud, selecting a grid closest the grid in the source point cloud from the destination point cloud; and calculating the current similarity between the source point cloud and the destination point cloud according to an attribute feature of each grid in the source point cloud.
7. The method of claim 1, wherein performing the registration on the source point cloud and the destination point cloud to obtain the registered result comprises: selecting a first grid to be matched from the source point cloud based on the attribute features; determining a second grid to be matched from the destination point cloud according to an attribute feature of the first grid to be matched; and matching the first grid to be matched with the second grid to be matched.
8. The method of claim 7, wherein determining the second grid to be matched in the destination point cloud according to the attribute feature of the first grid to be matched comprises: when the first grid to be matched comprises the ground feature only, selecting grids from the destination point cloud, a distance between each grid selected and the first grid to be matched being smaller than a preset fourth threshold value, calculating a matching degree between each grid selected and the first grid to be matched, and selecting a grid with the highest matching degree as the second grid to be matched; and when the first grid to be matched comprises the non-ground feature only, or the first grid to be matched comprises the ground feature and the non-ground feature, selecting grids from the destination point cloud, an attribute feature of each grid selected being the same as the attribute feature of the first gird to be matched, and a distance between the grid selected and the first grid to be matched being smaller than the fourth preset threshold, calculating a matching degree between each grid selected and the first grid to be matched, and selecting a grid with the highest matching degree as the second grid to be matched.
9. The method of claim 8, wherein when the first grid to be matched comprises the ground feature only, calculating the matching degree by a formula of: where, hs represents an average height of respective ground features in the first grid to be matched in the source point cloud, hd represents an average height of respective ground features in a set of grids in the destination point cloud, in which a distance between each of the set of grids and the first grid to be registered is smaller than the fourth preset threshold, and Δhthr represents a preset value; when the first grid to be matched comprises the non-ground feature only, calculating the matching degree by a formula of: where, xs represents an average value of x-axis coordinate values of respective non-ground features in the first grid to be matched, xd represents an average value of x-axis coordinate values of respective non-ground features in a set of grids in the destination point cloud, in which a distance between each of the set of grids and the first grid to be matched is smaller than the fourth preset threshold, ys represents an average value of y-axis coordinate values of respective non-ground features in the first grid to be matched, yd represents an average value of y-axis coordinate values of respective non-ground features in a set of grids in the destination point cloud, in which a distance between each of the set of grids and the first grid to be matched is smaller than the fourth preset threshold, hs represents an average height of respective ground features in the first grid to be matched in the source point cloud, hd represents an average height of respective ground features in a set of grids in the target point cloud, in which a distance between each of the set of grids and the first grid to be matched is smaller than the fourth preset threshold, and Δxthr, Δythr and Δhthr represent preset values; and when the first grid to be registered comprises the ground feature and the non-ground feature, calculating the matching degree by a formula of:
description="In-line Formulae" end="lead"?Sfh=Sh+Sf (3).description="In-line Formulae" end="tail"?
10. The method of claim 7, wherein the registered result comprises: a displacement to be moved; and matching the first grid to be matched with the second grid to be matched comprises: calculating a relative position between the second grid to be matched and the first grid to be matched; and calculating the displacement to be moved of the source point cloud according to the relative position, a matching degree corresponding to the second grid to be matched and a residual error equation.
11. An apparatus for point cloud registration, comprising: one or more processors; a memory storing instructions executable by the one or more processors; wherein the one or more processors are configured to: segment a source point cloud into different categories of attribute features based on semantic, and segment a destination point cloud into different categories of the attribute features based on semantic, the attribute features comprising a ground feature and a non-ground feature; segment the source point cloud and the destination point cloud into a plurality of grids based on the attribute features; calculate a current similarity between the source point cloud and the destination point cloud based on the plurality of grids; determine whether the current similarity and a current iterative number satisfy a preset condition; and perform a registration on the source point cloud and the destination point cloud to obtain a registered result when the determining module determines that the current similarity and the current iterative number satisfy the preset condition; and based on the registered result, adjust a position of the source point cloud, update the current iterative number, and calculate an updated similarity between the destination point cloud and the source point cloud after adjusting the position.
12. The apparatus of claim 11, wherein the one or more processors are configured to compare the current similarity with a first preset threshold, and to compare the current iterative number with a second preset threshold; and to compare the current similarity with a previously calculated similarity when the current similarity is smaller than or equal to the first threshold, and the current iterative number is smaller than the second threshold; and the preset condition comprises: the current similarity being greater than the previously calculated similarity.
13. The apparatus of claim 12, wherein the one or more processors are configured to set back the position of the source point cloud when the determining module determines that the current similarity is smaller than or equal to the previously calculated similarity, and the one or more processors are configured to register the source point cloud and the destination point cloud after the rollback module sets back the position of the source point cloud.
14. The apparatus of claim 12, wherein the one or more processors are configured to decrease a grid size of each of the plurality of grids according to a preset convergence step size when the determining module determines that the current similarity is greater than the first threshold, or that the current iterative number is greater than or equal to the second threshold; the one or more processors are further configured to determine whether the grid size decreased is greater than a third preset threshold after the grid size processing module decreases the grid size of each of the plurality of grids according to the preset convergence step size; and the one or more processors are further configured to, after the grid size processing module determines the grid size decreased is greater than the third preset threshold, based on the grid size decreased, segment the source point cloud and the destination point cloud into a plurality of grids according to the attribute features.
15. The apparatus of claim 11, wherein the one or more processors are configured to calculate the current similarity between the source point cloud and the destination point cloud based on the attribute features of the plurality of grids.
16. The apparatus of claim 15, wherein the one or more processors are configured to: for each grid in the source point cloud, select a grid closest the grid in the source point cloud from the destination point cloud; and calculate the current similarity between the source point cloud and the destination point cloud according to an attribute feature of each grid in the source point cloud.
17. The apparatus of claim 11, wherein the one or more processors are further configured to: select a first grid to be matched from the source point cloud based on the attribute features; determine a second grid to be matched from the destination point cloud according to an attribute feature of the first grid to be matched; and match the first grid to be matched with the second grid to be matched.
18. A computer readable medium having a computer program stored thereon, wherein a method for point cloud registration is implemented when being executed by the computer program, and the method comprises: segmenting a source point cloud into different categories of attribute features based on semantic, and segmenting a destination point cloud into different categories of the attribute features based on semantic, the attribute features comprising a ground feature and a non-ground feature; segmenting the source point cloud and the destination point cloud into a plurality of grids based on the attribute features; calculating a current similarity between the source point cloud and the destination point cloud based on the plurality of grids; determining whether the current similarity and a current iterative number satisfy a preset condition; in response to determining that the current similarity and the current iterative number satisfy the preset condition, performing a registration on the source point cloud and the destination point cloud to obtain a registered result; and based on the registered result, adjusting a position of the source point cloud, updating the current iterative number, and calculating an updated similarity between the destination point cloud and the source point cloud after adjusting the position.
</claims>
</document>
