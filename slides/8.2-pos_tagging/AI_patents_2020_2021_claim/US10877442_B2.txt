<document>

<filing_date>
2019-04-03
</filing_date>

<publication_date>
2020-12-29
</publication_date>

<priority_date>
2018-04-13
</priority_date>

<ipc_classes>
G05B13/02,G05B19/4063
</ipc_classes>

<assignee>
FANUC
</assignee>

<inventors>
SHINODA, SHOUGO
TSUNEKI, RYOUTAROU
</inventors>

<docdb_family_id>
68053035
</docdb_family_id>

<title>
Machine learning device, control device, and machine learning method
</title>

<abstract>
Provided is a machine learning device configured to perform machine learning related to optimization of a compensation value of a compensation generation unit with respect to a servo control device configured to control a servo motor configured to drive an axis of a machine tool, a robot, or an industrial machine, and that includes at least one feedback loop, a compensation generation unit configured to generate a compensation value to be applied to the feedback loop, and an abnormality detection unit configured to detect an abnormal operation of the servo motor, wherein, during a machine learning operation, when the abnormality detection unit detects an abnormality, the compensation from the compensation generation unit is stopped and the machine learning device continues optimization of the compensation value generated by the compensation generation unit.
</abstract>

<claims>
1. A control device comprising: a servo control device configured to control a servo motor configured to drive an axis of a machine tool, a robot, or an industrial machine, the servo control device including (i) at least one feedback loop, (ii) a compensation generation unit configured to generate a compensation value, the compensation value to be applied to the feedback loop, and (iii) an abnormality detection unit configured to detect an abnormal operation of the servo motor; and a machine learning device configured to perform machine learning related to optimization of the compensation value with respect to the servo control device, based on a command to the feedback loop and information in the feedback loop, wherein during a machine learning operation, when the abnormality detection unit detects an abnormality, the application of the compensation value to the feedback loop from the compensation generation unit is stopped and the machine learning device continues the machine learning related to optimization of the compensation value generated by the compensation generation unit.
2. The control device according to claim 1, wherein the servo control device includes a switch provided between the feedback loop and the inside of the compensation generation unit or a rear stage of the compensation generation unit, and when the abnormality detection unit detects an abnormal operation, the abnormality detection unit turns off the switch and notifies the machine learning device that the compensation to the feedback loop is stopped, and upon receiving the notification that the compensation to the feedback loop is stopped, the machine learning device applies the compensation value to the learning.
3. The control device according to claim 2, wherein the servo control device includes a low-pass filter provided at a rear stage of the switch, and passes the compensation value through the low-pass filter upon switching by the switch.
4. The control device according to claim 2, wherein the feedback loop includes a velocity control unit having an integrator configured to integrate a velocity error, and the integrator is rewritten upon switching by the switch.
5. The control device according to claim 1, wherein the machine learning device performs reinforcement learning as the machine learning, and when the compensation stop notification is received from the abnormality detection unit, the machine learning device offers a reward such that the compensation value with which an abnormal operation occurs would not be selected.
6. The control device according to claim 5, wherein the machine learning device updates a value function based on the reward, generates the optimal compensation value or adjustment information of compensation parameters based on the updated value function, and outputs to the compensation generation unit.
7. The control device according to claim 1, wherein the abnormality detection unit detects an abnormality when a position error or a torque command or both is equal to or larger than a predetermined threshold.
8. The control device according to claim 1, wherein the servo control device further includes an informing unit configured to inform of detection of an abnormality when an abnormality is detected by the abnormality detection unit.
9. The control device according to claim 1, wherein the at least one feedback loop includes at least one of a position feedback loop and a velocity feedback loop, and the compensation generation unit includes at least one of a position feedforward processing unit configured to add a position feedforward term to the position feedback loop and a velocity feedforward processing unit configured to add a velocity feedforward term to the velocity feedback loop.
10. The control device according to claim 1, wherein the at least one feedback loop is a position feedback loop, and the compensation generation unit generates compensation during reversal of the servo motor.
11. The control device according to claim 1, wherein the machine learning device is included in the servo control device.
12. A control method of a control device, the control device comprising: a servo control device configured to control a servo motor configured to drive an axis of a machine tool, a robot, or an industrial machine, the servo control device being configured to generate a compensation value, the compensation value to be applied to at least one feedback loop of the servo control device, and the servo control device being configured to detect an abnormal operation of the servo motor; and a machine learning device configured to perform machine learning related to optimization of the compensation value with respect to the servo control device, based on a command to the at least one feedback loop and information in the at least one feedback loop, wherein during a machine learning operation, when the servo control device detects an abnormality, the application of the compensation value to the at least one feedback loop is stopped, and the machine learning device continues the machine learning related to optimization of the compensation value.
</claims>
</document>
