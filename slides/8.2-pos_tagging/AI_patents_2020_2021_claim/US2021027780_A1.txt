<document>

<filing_date>
2020-10-08
</filing_date>

<publication_date>
2021-01-28
</publication_date>

<priority_date>
2018-03-26
</priority_date>

<ipc_classes>
G06F3/16,G06F40/30,G10L15/08,G10L15/22,G10L15/26,G10L25/78
</ipc_classes>

<assignee>
APPLE
</assignee>

<inventors>
PIERSOL, KURT
GARCIA, JUAN CARLOS
MCCARTHY, Paul S.
</inventors>

<docdb_family_id>
67983699
</docdb_family_id>

<title>
NATURAL ASSISTANT INTERACTION
</title>

<abstract>
Systems and processes for operating a virtual assistant to provide natural assistant interaction are provided. In accordance with one or more examples, a method includes, at an electronic device with one or more processors and memory: receiving a first audio stream including one or more utterances; determining whether the first audio stream includes a lexical trigger; generating one or more candidate text representations of the one or more utterances; determining whether at least one candidate text representation of the one or more candidate text representations is to be disregarded by the virtual assistant. If at least one candidate text representation is to be disregarded, one or more candidate intents are generated based on candidate text representations of the one or more candidate text representations other than the to be disregarded at least one candidate text representation.
</abstract>

<claims>
1. An electronic device, comprising: one or more processors; a microphone; and memory storing one or more programs configured to be executed by the one or more processors, the one or more programs including instructions for: receiving, via the microphone, a first audio stream including one or more utterances; determining whether the first audio stream includes a lexical trigger; in accordance with a determination that the first audio stream includes the lexical trigger, generating one or more candidate text representations of the one or more utterances; determining whether at least one candidate text representation of the one or more candidate text representations is to be disregarded by the virtual assistant based on sensory data obtained from one or more sensors of the electronic device; in accordance with a determination that at least one candidate text representation is to be disregarded by the virtual assistant, generating one or more candidate intents based on candidate text representations of the one or more candidate text representations other than the to be disregarded at least one candidate text representation; determining whether the one or more candidate intents include at least one actionable intent; in accordance with a determination that the one or more candidate intents include at least one actionable intent, executing the at least one actionable intent; outputting a result of the execution of the at least one actionable intent.
2. The electronic device of claim 1, wherein the lexical trigger is a single-word lexical trigger.
3. The electronic device of claim 2, wherein the first audio stream includes a first utterance, and wherein the single-word lexical trigger is positioned in a portion of the first utterance other than the beginning portion of the first utterance.
4. The electronic device of claim 1, wherein determining whether the first audio stream includes a lexical trigger comprises: detecting a beginning point of the first audio stream; detecting an end point of the first audio stream; and determining whether a lexical trigger is included between the beginning point and the end point of the first audio stream.
5. The electronic device of claim 4, wherein detecting the beginning point of the first audio stream comprises: detecting, via the microphone, an absence of voice activity before receiving the first audio stream; determining whether the absence of voice activity before receiving the first audio stream exceeds a first threshold period of time; and in accordance with a determination that the absence of voice activity exceeds the first threshold period of time, determining the beginning point of the first audio stream based on the absence of voice activity before receiving the first audio stream.
6. The electronic device of claim 4, wherein detecting the end point of the first audio stream comprises: detecting, via the microphone, an absence of voice activity after receiving the one or more utterances of the first audio stream; determining whether the absence of voice activity after receiving the one or more utterances of the first audio stream exceeds a second threshold period of time; and in accordance with a determination that the absence of voice activity after receiving the one or more utterances of the first audio stream exceeds the second threshold period of time, determining the end point of the first audio stream based on the absence of voice activity after receiving the one or more utterances of the first audio stream.
7. The electronic device of claim 4, wherein detecting the end point of the first audio stream comprises: obtaining a pre-configured duration that the electronic device is configured to receive the first audio stream; and determining the end point of the first audio stream based on the detected beginning point of the first audio stream and the pre-configured duration.
8. The electronic device of claim 4, wherein detecting the end point of the first audio stream comprises: determining a size of an audio file representing the received one or more utterances of the first audio stream; comparing the size of the audio file with a capacity of a buffer storing the audio file; and determining the end point of the first audio stream based on a result of comparing the size of the audio file with the capacity of the buffer storing the audio file.
9. The electronic device of claim 1, wherein the one or more utterances of the first audio stream include at least one utterance that is not directed to the virtual assistant.
10. The electronic device of claim 1, wherein generating one or more candidate text representations of the one or more utterances comprises: performing speech-to-text conversion of each of the one or more utterances of the first audio stream to generate the one or more candidate text representations; and determining confidence levels corresponding to the one or more candidate text representations.
11. The electronic device of claim 1, wherein determining whether the at least one candidate text representation of the one or more candidate text representations is to be disregarded by the virtual assistant comprises: determining whether the at least one candidate text representation includes the lexical trigger; and in accordance with a determination that the at least one candidate text representation does not include the lexical trigger, estimating a likelihood that the utterance corresponding to the at least one candidate text representation is not directed to the virtual assistant; and determining, based on the estimated likelihood, whether the at least one candidate text representation of the one or more candidate text representations is to be disregarded by the virtual assistant.
12. The electronic device of claim 11, wherein estimating the likelihood that the utterance corresponding to the at least one candidate text representation is not directed to the virtual assistant comprises: obtaining context information associated with a usage pattern of the virtual assistant; and estimating, based on the context information associated with the usage pattern of the virtual assistant, the likelihood that the utterance corresponding to the at least one candidate text representation is not directed to the virtual assistant.
13. The electronic device of claim 11, wherein estimating the likelihood that the utterance corresponding to the at least one candidate text representation is not directed to the virtual assistant comprises: estimating, based on the sensory data, the likelihood that the utterance corresponding to the at least one candidate text representation is not directed to the virtual assistant.
14. The electronic device of claim 1, wherein generating the one or more candidate intents based on the candidate text representations of the one or more candidate text representations other than the to be disregarded at least one candidate text representation comprises: obtaining one or more pre-mitigation intents corresponding to the one or more candidate text representations of the one or more utterances; and selecting, from the one or more pre-mitigation intents, the one or more candidate intents corresponding to the one or more candidate text representations other than the to be disregarded at least one candidate text representation.
15. The electronic device of claim 1, wherein determining whether the one or more candidate intents include at least one actionable intent comprises: determining, for each of the one or more candidate intents, whether a task can be performed; and in accordance with a determination that the task can be performed, determining that the one or more candidate intents include at least one actionable intent.
16. The electronic device of claim 15, wherein determining whether the task can be performed comprises: obtaining context information associated with a usage pattern of the virtual assistant; and determining, based on the context information associated with the usage pattern of the virtual assistant, whether the task can be performed.
17. The electronic device of claim 15, wherein determining whether the task can be performed comprises: obtaining context information associated with a previous task performed by the virtual assistant; and determining, based on the context information associated with the previous task performed by the virtual assistant, whether the task can be performed.
18. The electronic device of claim 15, wherein determining whether the task can be performed comprises: determining one or more relations among the one or more candidate text representations; determining whether the task can be performed based on the one or more relations among the one or more candidate text representations.
19. The electronic device of claim 15, wherein determining whether the task can be performed comprises: obtaining sensory data from one or more sensors communicatively coupled to the electronic device; and determining whether the task can be performed based on the sensory data.
20. The electronic device of claim 15, wherein determining whether the task can be performed comprises: estimating a confidence level associated with performing the task; determining whether the confidence level associated with performing the task satisfies a threshold confidence level; and in accordance with a determination that the confidence level associated with performing the task satisfies the threshold confidence level, determining that the task can be performed.
21. The electronic device of claim 1, wherein executing the at least one actionable intent comprises: performing one or more tasks according to the at least one actionable intent.
22. The electronic device of claim 1, wherein the one or more candidate intents includes a plurality of actionable intents, and where executing the at least one actionable intent comprises: selecting, from a plurality of tasks associated with the plurality of actionable intents, a first task for execution; and performing the selected first task.
23. The electronic device of claim 22, wherein selecting, from the plurality of tasks associated with the plurality of actionable intents, the first task for execution comprises: obtaining context information associated with a most-recent task initiated by the virtual assistant; and selecting the first task based on the context information associated with a previous task performed by the virtual assistant.
24. The electronic device of claim 22, wherein selecting, from the plurality of tasks associated with the plurality of actionable intents, the first task for execution comprises: outputting a plurality of task options corresponding to the plurality of tasks associated with the plurality of actionable intents; receiving a user selection from the plurality of task options; and selecting the first task based on the user selection.
25. The electronic device of claim 22, wherein selecting, from the plurality of tasks associated with the plurality of actionable intents, the first task for execution comprises: determining a priority associated with each of the plurality of tasks; and selecting the first task for execution based on the priority associated with each of the plurality of tasks.
26. The electronic device of claim 1, wherein the one or more programs comprise further instructions for: upon executing the at least one actionable intent, receiving, via the microphone, a second audio stream; generating one or more second candidate text representations to represent the second audio stream; determining, based on the one or more second candidate text representations, whether the second audio stream is a part of an audio session that includes the first audio stream; in accordance with a determination that the second audio stream is a part of the audio session that includes the first audio stream, generating, based on the one or more second candidate text representations, one or more second candidate intents; determining whether the one or more second candidate intents include at least one second actionable intent; in accordance with a determination that the one or more second candidate intents include at least one second actionable intent, executing the at least one second actionable intent; and outputting a result of the execution of the at least one second actionable intent.
27. The electronic device of claim 26, wherein determining whether the second audio stream is a part of the audio session that includes the first audio stream comprises: obtaining context information associated with executing the at least one actionable intent; and determining, based on the context information associated with executing the at least one actionable intent, whether the second audio stream is a part of the audio session that includes the first audio stream.
28. The electronic device of claim 26, wherein determining whether the second audio stream is a part of the audio session that includes the first audio stream comprises: determining a relation among respective candidate text representations of the first audio stream and the second audio stream; and determining, based on the relation among respective candidate text representations of the first audio stream and the second audio stream, whether the second audio stream is a part of the audio session that includes the first audio stream.
29. A method for providing natural language interaction by a virtual assistant, the method comprising: at an electronic device with one or more processors, memory, and a microphone: receiving, via a microphone, a first audio stream including one or more utterances; determining whether the first audio stream includes a lexical trigger; in accordance with a determination that the first audio stream includes the lexical trigger, generating one or more candidate text representations of the one or more utterances; determining whether at least one candidate text representation of the one or more candidate text representations is to be disregarded by the virtual assistant based on sensory data obtained from one or more sensors of the electronic device; in accordance with a determination that at least one candidate text representation is to be disregarded by the virtual assistant, generating one or more candidate intents based on candidate text representations of the one or more candidate text representations other than the to be disregarded at least one candidate text representation, wherein generating the one or more candidate intents comprises; determining whether the one or more candidate intents include at least one actionable intent; in accordance with a determination that the one or more candidate intents include at least one actionable intent, executing the at least one actionable intent; outputting a result of the execution of the at least one actionable intent.
30. A non-transitory computer-readable storage medium storing one or more programs configured to be executed by one or more processors of an electronic device, the one or more programs including instructions for: receiving, via a microphone, a first audio stream including one or more utterances; determining whether the first audio stream includes a lexical trigger; in accordance with a determination that the first audio stream includes the lexical trigger, generating one or more candidate text representations of the one or more utterances; determining whether at least one candidate text representation of the one or more candidate text representations is to be disregarded by the virtual assistant based on sensory data obtained from one or more sensors of the electronic device; in accordance with a determination that at least one candidate text representation is to be disregarded by the virtual assistant, generating one or more candidate intents based on candidate text representations of the one or more candidate text representations other than the to be disregarded at least one candidate text representation; determining whether the one or more candidate intents include at least one actionable intent; in accordance with a determination that the one or more candidate intents include at least one actionable intent, executing the at least one actionable intent; outputting a result of the execution of the at least one actionable intent.
</claims>
</document>
