<document>

<filing_date>
2019-02-01
</filing_date>

<publication_date>
2020-12-22
</publication_date>

<priority_date>
2018-02-06
</priority_date>

<ipc_classes>
G06F11/34,G06F11/36,G06F17/11,G06F17/18
</ipc_classes>

<assignee>
SPLUNK
</assignee>

<inventors>
ROSS, JOSEPH ARI
</inventors>

<docdb_family_id>
67475660
</docdb_family_id>

<title>
Processing data streams received from instrumented software in real time using incremental-decremental implementation of the KPSS stationarity statistic
</title>

<abstract>
An analysis system receives a time series. The data values of the time series correspond to a metric describing a characteristic of the computing system that changes over time. The analysis system stores a statistic value that represents the stationarity of the time series. In response to receiving a most recent value, the analysis system assigns the most recent value as the leading value in a window before retrieving the trailing value of the window. The analysis system updates the statistic value to add an influence of the most recent value and remove an influence of the trailing value. If the statistic value is less than a threshold, the analysis system determines that the time series is stationary. In response to determining the time series is stationary, the analysis system assigns an alert to the metric. The analysis system detects an anomaly in the metric based on the assigned alert.
</abstract>

<claims>
1. A method for detecting an anomaly in a metric for a computing system, the method comprising: receiving a time series comprising a plurality of data values from an instance of instrumented software executing on an external computing system, each of the plurality of data values corresponding to a metric describing a characteristic of the computing system that changes over time; storing a statistic value representing a current stationarity of the time series based on data values of the plurality of data values for the time series in a window, the window having a leading value and a trailing value, wherein the statistic value is computed based on normalized partial sums of residual values; in response to receiving a most recent value of the plurality of data values in the time series: assigning the most recent value as the leading value in the window; retrieving the trailing value of the window; and updating the statistic value to add an influence of the most recent value and remove an influence of the trailing value; in response to the statistic value being less than a threshold, determining that the time series is stationary; in response to determining that the time series is stationary, assigning an alert for a stationary data stream to the metric; and detecting an anomaly in the metric based on the assigned alert, wherein the statistic value represents a normalized series of partial sums of residual values in a series of residual values, the residual values is a difference of the mean and each data value of the time series, and each partial sum of the series of partial sums is a summation of a corresponding residual value and residual values that occur before the corresponding residual value in the series of residual values.
2. The method of claim 1, further comprising: storing a plurality of tracked values determined based on data values in the window; and in response to receiving the most recent value of the plurality of data values in the time series, updating the plurality of tracked values to add an influence of the most recent value and remove an influence of the trailing value, wherein updating the statistic value to add an influence of the most recent value and remove an influence of the trailing value comprises determining the statistic value based on the plurality of tracked values.
3. The method of claim 2, wherein the plurality of tracked values comprise a count value, a sum value, a sum squares value, a weighted sum value, a sum sizes value, and a sum squared size value.
4. The method of claim 3, wherein determining the statistic value based on the plurality of tracked values comprises: determining a sum squared sums value, a sum count sums value, and a sum squared counts value based on the plurality of tracked values; determining a numerator of the statistic value based on the sum squared sums value, the sum value, the sum count sums value, the count value, and the sum squared counts value; determining a denominator of the statistic value based on the count value, the sum squares value, and the sum value.
5. The method of claim 1, wherein the statistic value being greater than a second threshold indicates that the time series is not stationary, and the statistic value being greater than the threshold but less than the second threshold indicates that the stationarity of the time series is ambiguous.
6. The method of claim 1, further comprising, during a priming phase: adding data values to the time series, the number of added data values the same as the length of the window; and updating the statistic value to add influences of the added data values without removing influences of data values in the time series.
7. The method of claim 1, wherein the statistic value represents whether the time series is level stationary, wherein the time series is level stationary if the time series is stationary around a mean of the time series.
8. The method of claim 1, wherein the statistic value represents whether the time series is trend stationary, wherein the time series is trend stationary if the time series is stationary around a linear trend.
9. The method of claim 8, wherein determining the statistic value based on the plurality of tracked values comprises: determining a plurality of tracked values comprising a count value, a sum squared sums value, a sum count sums value, a sum squared counts value, a sum squared sum sizes value, a sum sum by sum sizes value, a sum count by sum sizes value, and sum squared residual values from the tracked values; determining an intercept and a slope for the linear trend based on the count value, the weighted sum value, the sum sizes value, the sum value, and the sum squared size value; determining sum squared residual values based on the intercept, the slope, the sum sizes value, the sum squared size value, the sum value, the weighted sum value, and the sum squares value; determining a numerator of the statistic value based on the sum squared sums value, the sum value, the sum sum by sum sizes value, the sum squared counts value, the sum count by sum sizes value, the sum squared sum sizes value, the intercept, and the slope; determining a denominator of the statistic value based on the count value and the sum squared residual values.
10. A non-transitory computer-readable storage medium comprising instructions executable by a processor, the instructions comprising: instructions for receiving a time series comprising a plurality of data values from an instance of instrumented software executing on an external computing system, each of the plurality of data values corresponding to a metric describing a characteristic of the computing system that changes over time; instructions for storing a statistic value representing a current stationarity of the time series based on data values of the plurality of data values for the time series in a window, the window having a leading value and a trailing value, wherein the statistic value is computed based on normalized partial sums of residual values; in response to receiving a most recent value of the plurality of data values in the time series, instructions for: assigning the most recent value as the leading value in the window; retrieving the trailing value of the window; and updating the statistic value to add an influence of the most recent value and remove an influence of the trailing value; in response to the statistic value being less than a threshold, instructions for determining that the time series is stationary; in response to determining that the time series is stationary, instructions for assigning an alert for a stationary data stream to the metric; and instructions for detecting an anomaly in the metric based on the assigned alert, wherein the statistic value represents a normalized series of partial sums of residual values in a series of residual values, the residual values is a difference of the mean and each data value of the time series, and each partial sum of the series of partial sums is a summation of a corresponding residual value and residual values that occur before the corresponding residual value in the series of residual values.
11. The non-transitory computer-readable storage medium of claim 10, further comprising: instructions for storing a plurality of tracked values determined based on data values in the window; and in response to receiving the most recent value of the plurality of data values in the time series, instructions for updating the plurality of tracked values to add an influence of the most recent value and remove an influence of the trailing value, wherein updating the statistic value to add an influence of the most recent value and remove an influence of the trailing value comprises determining the statistic value based on the plurality of tracked values.
12. The non-transitory computer-readable storage medium of claim 11, wherein the plurality of tracked values comprise a count value, a sum value, a sum squares value, a weighted sum value, a sum sizes value, and a sum squared size value.
13. The non-transitory computer-readable storage medium of claim 12, wherein determining the statistic value based on the plurality of tracked values comprises: instructions for determining a sum squared sums value, a sum count sums value, and a sum squared counts value based on the plurality of tracked values; instructions for determining a numerator of the statistic value based on the sum squared sums value, the sum value, the sum count sums value, the count value, and the sum squared counts value; instructions for determining a denominator of the statistic value based on the count value, the sum squares value, and the sum value.
14. The non-transitory computer-readable storage medium of claim 10, wherein the statistic value being greater than a second threshold indicates that the time series is not stationary, and the statistic value being greater than the threshold but less than the second threshold indicates that the stationarity of the time series is ambiguous.
15. The non-transitory computer-readable storage medium of claim 10, further comprising, during a priming phase: instructions for adding data values to the time series, the number of added data values the same as the length of the window; and instructions for updating the statistic value to add influences of the added data values without removing influences of data values in the time series.
16. The non-transitory computer-readable storage medium of claim 10, wherein the statistic value represents whether the time series is level stationary, wherein the time series is level stationary if the time series is stationary around a mean of the time series.
17. The non-transitory computer-readable storage medium of claim 10, wherein the statistic value represents whether the time series is trend stationary, wherein the time series is trend stationary if the time series is stationary around a linear trend.
18. A computer system comprising: a computer processor; and a non-transitory computer-readable storage medium storage instructions that when executed by the computer processor perform actions comprising: receiving a time series comprising a plurality of data values from an instance of instrumented software executing on an external computing system, each of the plurality of data values corresponding to a metric describing a characteristic of the computing system that changes over time; storing a statistic value representing a current stationarity of the time series based on data values of the plurality of data values for the time series in a window, the window having a leading value and a trailing value, wherein the statistic value is computed based on normalized partial sums of residual values; in response to receiving a most recent value of the plurality of data values in the time series: assigning the most recent value as the leading value in the window; retrieving the trailing value of the window; and updating the statistic value to add an influence of the most recent value and remove an influence of the trailing value; in response to the statistic value being less than a threshold, determining that the time series is stationary; in response to determining that the time series is stationary, assigning an alert for a stationary data stream to the metric; and detecting an anomaly in the metric based on the assigned alert, wherein the statistic value represents a normalized series of partial sums of residual values in a series of residual values, the residual values is a difference of the mean and each data value of the time series, and each partial sum of the series of partial sums is a summation of a corresponding residual value and residual values that occur before the corresponding residual value in the series of residual values.
</claims>
</document>
