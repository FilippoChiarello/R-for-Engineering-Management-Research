<document>

<filing_date>
2020-06-05
</filing_date>

<publication_date>
2020-09-24
</publication_date>

<priority_date>
2018-10-12
</priority_date>

<ipc_classes>
G06T11/00,G06T15/10,G06T3/00,G06T5/00,G06T5/50
</ipc_classes>

<assignee>
ADOBE
</assignee>

<inventors>
LIN ZHE
EISENMANN, JONATHAN
FISHER, MATTHEW
</inventors>

<docdb_family_id>
70160120
</docdb_family_id>

<title>
ENVIRONMENT MAP GENERATION AND HOLE FILLING
</title>

<abstract>
In some embodiments, an image manipulation application receives a two-dimensional background image and projects the background image onto a sphere to generate a sphere image. Based on the sphere image, an unfilled environment map containing a hole area lacking image content can be generated. A portion of the unfilled environment map can be projected to an unfilled projection image using a map projection. The unfilled projection image contains the hole area. A hole filling model is applied to the unfilled projection image to generate a filled projection image containing image content for the hole area. A filled environment map can be generated by applying an inverse projection of the map projection on the filled projection image and by combining the unfilled environment map with the generated image content for the hole area of the environment map.
</abstract>

<claims>
1. A computer-implemented method in which one or more processing devices perform operations comprising: generating an unfilled environment map based on a background image, wherein the unfilled environment map contains a hole area lacking image content and has a horizontal field of view larger than a horizontal field of view of the background image; projecting a portion of the unfilled environment map to an unfilled projection image, the unfilled projection image containing at least a portion of the hole area; generating a filled projection image based on the unfilled projection image, the filled projection image containing image content for the portion of the hole area; projecting, using an inverse projection, the filled projection image to generate image content for the hole area of the unfilled environment map; and generating a filled environment map by combining the unfilled environment map with the generated image content for the hole area of the unfilled environment map.
2. The computer-implemented method of claim 1, wherein the filled environment map represents a field of view of 360 degrees.
3. The computer-implemented method of claim 2, wherein generating the unfilled environment map comprises: projecting the background image onto a sphere to generate a sphere image; scaling the sphere image to increase a field of view of the sphere image; flipping the scaled sphere image horizontally; and concatenating the scaled sphere image and the flipped sphere image horizontally to generate the unfilled environment map.
4. The computer-implemented method of claim 1, the operations further comprising generating a mask image based on the unfilled projection image, the mask image indicating the hole area as an area to be filled, wherein generating the filled projection image comprises applying a hole filling model to the unfilled projection image and the mask image.
5. The computer-implemented method of claim 4, wherein generating the filled projection image comprises: applying the hole filling model to the unfilled projection image and the mask image to generate a first filled projection image; generating a modified unfilled projection image by adding an oracle region containing image content within the hole area of the unfilled projection image; generating a modified mask image based on the modified unfilled projection image; and applying the hole filling model to the modified unfilled projection image and the modified mask image to generate a second filled projection image as the filled projection image.
6. The computer-implemented method of claim 5, wherein the image content of the oracle region is determined based on the image content of the first filled projection image.
7. The computer-implemented method of claim 5, wherein the image content of the oracle region is determined independent of the image content of the first filled projection image.
8. The computer-implemented method of claim 1, wherein projecting a portion of the unfilled environment map to an unfilled projection image is performed using a map projection, and wherein the map projection is a gnomonic projection.
9. The computer-implemented method of claim 1, wherein the unfilled projection image is generated by projecting the unfilled environment map from a north pole of a sphere represented by the unfilled environment map.
10. The computer-implemented method of claim 1, wherein the unfilled environment map and the filled environment map are represented using respective equirectangular projection images.
11. The computer-implemented method of claim 1, wherein generating the filled projection image comprises applying a hole filling model to the unfilled projection image, and wherein the hole filling model is a generative adversarial network (GAN).
12. A system comprising: a processing device; and a non-transitory computer-readable medium communicatively coupled to the processing device, wherein the processing device is configured to execute program code stored in the non-transitory computer-readable medium and thereby perform operations comprising: generating an unfilled environment map based on a background image, wherein the unfilled environment map contains a hole area lacking image content and has a horizontal field of view larger than a horizontal field of view of the background image; projecting a portion of the unfilled environment map to an unfilled projection image, the unfilled projection image containing at least a portion of the hole area; generating a filled projection image based on the unfilled projection image, the filled projection image containing image content for the portion of the hole area; projecting, using an inverse projection, the filled projection image to generate image content for the hole area of the unfilled environment map; and generating a filled environment map by combining the unfilled environment map with the generated image content for the hole area of the unfilled environment map.
13. The system of claim 12, wherein the operations further comprise: generating a plurality of simulated background images from one or more panorama images; generating a plurality of training samples based on the plurality of simulated background images, the plurality of training samples comprising a plurality of unfilled training projection images each containing a hole area lacking image content and a plurality of ground truth images each containing entire image content for a corresponding unfilled training projection image; training a hole filling model based on the plurality of training samples; and applying the hole filling model to the unfilled projection image to generating the filled projection image.
14. The system of claim 13, wherein generating one of the plurality of simulated background images comprises: selecting, randomly or pseudo-randomly, at least one of a camera angle, a horizontal field of view or an aspect ratio; and projecting one of the panorama images into a two-dimensional image plane using the horizontal field of view, the camera angle or the aspect ratio to generate the simulated background images.
15. The system of claim 13, wherein at least one of the unfilled training projection images comprises an oracle region located within the hole area and wherein image content of the oracle region is obtained from a corresponding ground truth image.
16. A non-transitory computer-readable medium having program code that is stored thereon, the program code executable by one or more processing devices for performing operations comprising: generating an unfilled environment map based on a background image, wherein the unfilled environment map contains a hole area lacking image content and has a horizontal field of view larger than a horizontal field of view of the background image; projecting a portion of the unfilled environment map to an unfilled projection image, the unfilled projection image containing at least a portion of the hole area; generating a filled projection image based on the unfilled projection image, the filled projection image containing image content for the portion of the hole area; projecting, using an inverse projection, the filled projection image to generate image content for the hole area of the unfilled environment map; and generating a filled environment map by combining the unfilled environment map with the generated image content for the hole area of the unfilled environment map.
17. The non-transitory computer-readable medium of claim 16, wherein generating the filled projection image comprises: applying a hole filling model to the unfilled projection image to generate a first filled projection image; generating a modified unfilled projection image by adding an oracle region containing image content within the hole area of the unfilled projection image; and applying the hole filling model to the modified unfilled projection image to generate a second filled projection image as the filled projection image.
18. The non-transitory computer-readable medium of claim 17, wherein the image content of the oracle region is determined based on the image content of the first filled projection image.
19. The non-transitory computer-readable medium of claim 18, wherein the image content of the oracle region is determined independent of the image content of the first filled projection image.
20. The non-transitory computer-readable medium of claim 16, wherein generating the filled projection image comprises applying a hole filling model to the unfilled projection image, and wherein the hole filling model is a generative adversarial network (GAN).
</claims>
</document>
