<document>

<filing_date>
2019-11-23
</filing_date>

<publication_date>
2020-11-10
</publication_date>

<priority_date>
2017-07-13
</priority_date>

<ipc_classes>
G01P1/12,G06K9/00,G06K9/22,G06T7/246,G06T7/73,H04N5/232,H04N5/77,H04N7/18
</ipc_classes>

<assignee>
ZILLOW GROUP
</assignee>

<inventors>
GUAN, LI
COLBURN, ALEX
BOYADZHIEV, IVAYLO
SHAN, QI
</inventors>

<docdb_family_id>
64999847
</docdb_family_id>

<title>
Connecting and using building data acquired from mobile devices
</title>

<abstract>
Techniques are described for automated operations involving acquiring and analyzing information from an interior of a house, building or other structure, for use in generating and providing a representation of that interior. Such techniques may include using a user's mobile device to capture video data from multiple viewing locations (e.g., 360Â° video at each viewing location) within multiple rooms, and capturing data linking the multiple viewing locations (e.g., by recording video, acceleration and/or other data from the mobile device as the user moves between the two viewing locations), creating a panorama image for each viewing location, analyzing the linking information to model the user's travel path and determine relative positions/directions between at least some viewing locations, creating inter-panorama links in the panoramas to each of one or more other panoramas based on such determined positions/directions, and providing information to display multiple linked panorama images to represent the interior.
</abstract>

<claims>
1. A computer-implemented method comprising: obtaining, by at least one device, linking information from movement between a sequence of viewing locations within an interior of a building, wherein the linking information includes video information generated by a mobile device as a user carries the mobile device between each successive pair of viewing locations in the sequence; determining, by the at least one device, and for each successive pair of viewing locations in the sequence, relative positional information that includes at least a direction from a starting viewing location of the successive pair to an ending viewing location of the successive pair, including analyzing the linking information to model a travel path of the user from the starting viewing location of the successive pair to the ending viewing location of the successive pair, and using the modeled travel path as part of determining the direction; generating, by the at least one device, and using the determined direction for each successive pair of viewing locations in the sequence, information to link panorama images for the viewing locations, wherein each of the panorama images is associated with one of the viewing locations and has views from the one viewing location in each of multiple directions, and wherein the generating includes, for each of the viewing locations other than a last viewing location in the sequence, generating an inter-panorama link for the panorama image associated with the viewing location that points toward a next viewing location in the sequence; and providing, by the at least one device and for display on a client device, information about the interior of the building that includes the panorama images and that includes the generated inter-panorama links for the panorama images, to enable changing between displays of two of the panorama images upon selection of one of the generated inter-panorama links that is associated with the two panorama images.
2. The computer-implemented method of claim 1 wherein the determining of the relative positional information for one of the successive pairs of viewing locations further includes determining a departure direction from the starting viewing location of the one successive pair by analyzing a first portion of obtained video information that corresponds to that starting viewing location, and determining an arrival direction at the ending viewing location of the one successive pair by analyzing a second portion of obtained video information that corresponds to that ending viewing location, and wherein modeling of the travel path for the one successive pair is further based in part on the determined departure direction and on the determined arrival direction.
3. The computer-implemented method of claim 2 wherein the determining of the relative positional information for the one successive pair further includes determining a second direction from the ending viewing location of the one successive pair to the starting viewing location of the one successive pair, and wherein the generating of the information further includes using the determined second direction to generate an inter-panorama link that points toward the panorama image associated with the starting viewing location of the one successive pair from the panorama image for the ending viewing location of the one successive pair.
4. The computer-implemented method of claim 1 wherein the determining of the relative positional information for one of the successive pairs of viewing locations further includes identifying first image subsets of the panorama image for the starting viewing location of the one successive pair that have features matching second image subsets of the panorama image for the ending viewing location of the one successive pair, and using information from the first image subsets and the second image subsets as part of determining the direction from the starting viewing location of the one successive pair to the ending viewing location of the one successive pair.
5. The computer-implemented method of claim 4 wherein the using of the information from the first image subsets and the second image subsets as part of determining the direction for the one successive pair further includes generating an essential matrix for each of multiple pairs of image subsets each having one of the first image subsets and one of the second image subsets, determining values from the essential matrices for the multiple pairs that correspond to the direction for the one successive pair, and generating an aggregate value for the direction for the one successive pair from the values determined for the multiple pairs.
6. The computer-implemented method of claim 4 wherein the using of the information from the first image subsets and the second image subsets as part of determining the direction for the one successive pair further includes generating a homography matrix for each of multiple pairs of image subsets each having one of the first image subsets and one of the second image subsets, determining values from the homography matrices for the multiple pairs that correspond to the direction for the one successive pair, and generating an aggregate value for the direction for the one successive pair from the values determined for the multiple pairs.
7. The computer-implemented method of claim 4 wherein the using of the information from the first image subsets and the second image subsets as part of determining the direction for the one successive pair further includes determining, for each of multiple pairs of image subsets each having a first image subset and a second image subset, whether to use an essential matrix or a homography matrix to determine a value for the direction for the one successive pair.
8. The computer-implemented method of claim 4 wherein the using of the information from the first image subsets and the second image subsets as part of determining the direction for the one successive pair further includes determining, for each of multiple pairs of image subsets each having one of the first image subsets and one of the second image subsets, and by using reprojection, that a degree of match between the image subsets of the pair exceeds a defined threshold before further using the pair to determine a value for the direction for the one successive pair.
9. The computer-implemented method of claim 4 wherein the using of the information from the first image subsets and the second image subsets as part of determining the direction for the one successive pair further includes generating a confidence value based on the information from the first image subsets and the second image subsets, and using the determined direction from the starting viewing location of the one successive pair to the ending viewing location of the one successive pair based at least in part on the generated confidence value exceeding a defined threshold.
10. The computer-implemented method of claim 9 wherein the generating of the confidence value is based at least in part on a number of peaks in an aggregate consensus distribution generated using multiple pairs of image subsets each having one of the first image subsets and one of the second image subsets, and on circular coverage of samples in at least one of the panorama image for the starting viewing location of the one successive pair or the panorama image for the ending viewing location of the one successive pair.
11. The computer-implemented method of claim 1 wherein the generating of the information to link the panorama images for the viewing locations further includes modifying one or more of the directions from the starting viewing locations of each successive pair to the ending viewing locations of each successive pair by performing a global optimization on the directions, and wherein the generating of the one inter-panorama link is based on at least one of the modified directions.
12. The computer-implemented method of claim 1 wherein the at least one device includes the mobile device and the mobile device performs at least in part the determining and the generating and the providing and/or the at least one device includes one or more server computing devices that are located remotely from the building and are in communication over one or more intervening computer networks with the mobile device and that perform at least in part one or more of the determining and the generating and the providing, and wherein the method further comprises: recording, by the mobile device, videos of the interior from each of the viewing locations as the user turns at the viewing locations; and creating, by the at least one device and from the recorded videos, the panorama images for the viewing locations.
13. The computer-implemented method of claim 1 wherein the providing of the information includes receiving an indication from the client device of a user selection of the one generated inter-panorama link during a display of one of the two panorama images, and causing, based at least in part on the user selection of the one generated inter-panorama link, the client device to display the other of the two panorama images.
14. A non-transitory computer-readable medium having stored contents that cause one or more computing devices to perform automated operations, the automated operations including at least: obtaining linking information for a sequence of viewing locations associated with a structure that include at least one viewing location within an interior of the structure, wherein the linking information includes data that is generated as an acquisition device moves along a travel path between the viewing locations and that includes one or more images captured between each pair of successive viewing locations in the sequence; determining, by the one or more computing devices, and for one or more of the pairs of successive viewing locations in the sequence, relative positional information that includes at least a direction from a starting viewing location of the pair to an ending viewing location of the pair, including analyzing the linking information to model a portion of the travel path from the starting viewing location to the ending viewing location and using the modeled portion of the travel path as part of determining the direction; generating, by the one or more computing devices, and using the determined direction for each of the one or more pairs of successive viewing locations, information to link the starting viewing location for the pair to the ending viewing location for the pair, including generating a link for visual information associated with the starting viewing location for the pair that points toward the ending viewing location for the pair; and providing, by the one or more computing devices, information for display about the structure that includes the visual information associated with the starting viewing location of an indicated pair of the one or more pairs, and the generated link for the indicated pair.
15. The non-transitory computer-readable medium of claim 14 wherein the acquisition device is a mobile computing device, wherein the visual information associated with the starting viewing location of the indicated pair is a first panorama image from that starting viewing location, wherein visual information associated with the ending viewing location of the indicated pair is a second panorama image from that ending viewing location, wherein the providing of the information includes providing the visual information associated with the indicated pair and enables an end user to select a displayed representation of the generated link to change between a display of the first panorama image to a display of the second panorama image, and wherein the stored contents include software instructions that, when executed by the one or more devices, program the one or more computing devices to perform the automated operations.
16. A system, comprising: one or more hardware processors of one or more computing devices; and one or more memories with stored instructions that, when executed by at least one of the one or more hardware processors, cause the one or more computing devices to provide data representing a building, including: obtaining data for multiple recording locations associated with the building, including data that is recorded at each of the recording locations, and including visual linking information captured during movement between at least some of the recording locations; determining, for one or more pairs of recording locations, and based at least in part on analyzing the visual linking information, a direction from a starting recording location of the pair to an ending recording location of the pair; generating, for each of the one or more pairs of recording locations and using the determined direction for the pair, information to link the data recorded at the starting recording location for the pair to the data recorded for the ending recording location for the pair, including generating a link that points between the starting recording location for the pair and the ending recording location for the pair; and providing information for presentation about the building that includes data recorded at one or more of the recording locations and that includes at least one of the generated links.
17. The system of claim 16 wherein data recorded at the one or more recording locations includes a plurality of first images recorded at the starting recording location for one of the one or more pairs and includes a plurality of second images recorded at the ending recording location for the one pair, wherein the visual linking information includes one or more additional images captured during movement between the starting and ending recording locations for the one pair, wherein the stored instructions include software instructions that further cause the one or more computing devices to create a first panorama image for the starting recording location for the one pair from the plurality of first images and to create a second panorama image for the ending recording location for the one pair from the plurality of second images, and wherein the providing of the information further includes: presenting, on a client device of an end user, the first panorama image for the starting recording location of the one pair, and a visual representation of the generated link between the starting and ending recording locations for the one pair; and presenting, on the client device and after selection of the visual representation of the generated link, additional visual information that includes the second panorama image for the ending recording location of the one pair.
18. The system of claim 16 wherein the one or more recording locations are external to the building, and wherein the obtaining of the data for the multiple recording locations further includes recording data at each of the one or more recording locations corresponding to at least some of an exterior of the building.
19. The system of claim 18 wherein the one or more recording locations further include a sequence of two or more recording locations within an interior of the building, and wherein one or more images are captured at each of the two or more recording locations.
20. The system of claim 16 wherein the obtaining of the data for the multiple recording locations includes, for each of the one or more recording locations, capturing audio data at the recording location.
</claims>
</document>
