<document>

<filing_date>
2018-12-21
</filing_date>

<publication_date>
2020-10-13
</publication_date>

<priority_date>
2011-03-31
</priority_date>

<ipc_classes>
G06F16/2457,G06F16/25,G06F16/35,G06F16/903,G06F16/9537,G06Q10/10,G06Q30/02,H04L12/58
</ipc_classes>

<assignee>
TWITTER
</assignee>

<inventors>
BANERJI, ANAMITRA
GOEL, ASHISH
RAJGOPAL, SRINIVASAN
SRIVASTAVA, UTKARSH
</inventors>

<docdb_family_id>
55700147
</docdb_family_id>

<title>
Promoting content in a real-time messaging platform
</title>

<abstract>
A real-time messaging platform and method are disclosed which can be used to promote content in the messaging platform. In one embodiment, the promotion system is disclosed which performs initial candidate selection so as to narrow down the set of candidate promotions before applying more expensive processing. The candidate selection takes advantage of the connection graph information associated with accounts in the messaging platform to identify targeted accounts. In another embodiment, the promotion system uses a prediction model to predict a user's engagement with the promotion and utilizes the prediction to assist in ranking the candidate promotions. Promotions can be assigned metrics based, for example, on a weighted combination of user engagement rates, decayed with time to reflect an intuition that recent interactions by one or more users with the promotion will have a greater impact than older interactions with the promotion.
</abstract>

<claims>
1. A system comprising: one or more computers and one or more storage devices on which are stored instructions that are operable, when executed by the one or more computers, to cause the one or more computers to perform operations comprising: receiving a request for a stream of messages to be provided to a requesting user account of a plurality of user accounts of a real-time messaging platform, wherein the real-time messaging platform hosts a plurality of accounts that includes the plurality of user accounts and a plurality of promotion accounts, wherein each of the plurality of promotion accounts is a respective account of the real-time messaging platform that has provided one or more items of promoted content and promoted messages for one or more streams of messages, wherein the real-time messaging platform provides streams of messages that include the one or more streams of messages, wherein messages in the streams of messages include messages authored by user accounts of the plurality of user accounts and messages authored by promotion accounts of the plurality of promotion accounts, wherein each account is associated with respective connection graph data defining one or more relationships on a respective connection graph between the account and respective other accounts in the plurality of accounts, and wherein a relationship on a connection graph between a pair of accounts represents that a first, follower account of the pair of accounts is subscribed to receive messages provided to the real-time messaging platform by a second, followee account of the pair of accounts; selecting candidate items of promoted content to be provided to the requesting user account, wherein each item of promoted content is a promoted message authored by a respective promotion account, the selecting comprising: determining that a followee account of the requesting user account is connection graph similar to one or more promotion accounts, wherein two accounts are connection graph similar when a measure of similarity between their respective connection graphs satisfies a similarity threshold, selecting, as candidate items of promoted content, one or more items of promoted content provided by the one or more identified promotion accounts that are connection graph similar to the followee account of the requesting user account; and providing, to the requesting user account, in the requested stream of messages, one or more of the candidate items of promoted content.
2. The system of claim 1, wherein selecting the one or more items of promoted content comprises: excluding from the candidate items of promoted content, items of promoted content that have a respective measure of fatigue that indicates that the item has been provided to the requesting user account a number of times meeting a predetermined frequency threshold within a predetermined period of time.
3. The system of claim 1, wherein at least one item in the candidate items of promoted content is a recommendation to follow another user account or a trend, wherein the trend is represented as a list of textual items.
4. The system of claim 1, wherein, for each account, the connection graph data for the account further includes engagement metrics that measure engagements by the account with messages in the streams of messages; and wherein the measure of similarity between two connection graphs is based on a similarity between respective engagement metrics included in the graph data of the respective connection graphs.
5. The system of claim 1, wherein selecting the candidate items of promoted content further comprises: excluding items of promoted content from promotion accounts that have not designated the requesting user account as a targeted account; and selecting candidate items of promoted content from items after the excluding, including selecting items of promoted content from one or more promotion accounts that have targeted the requesting user account.
6. The system of claim 5, wherein the operations further comprise: for each targeted user account of the one or more identified promotion accounts, identifying respective related user accounts that are related to the targeted user account in a respective connection graph for the targeted user account and that are each connection graph similar to a respective identified promotion account targeting the user account; and providing, to the identified related user accounts, the one or more selected items of promoted content.
7. The system of claim 6, wherein the operations further comprise maintaining a candidate map that associates promotion accounts with sufficiently similar connection graphs; and wherein determining that the followee account of the requesting user account is connection graph similar to the one or more promotion accounts comprises determining that the followee account is mapped to the one or more promotion accounts in the candidate map.
8. The system of claim 1, wherein the one or more items of promoted content provided by the one or more promotion accounts include items received from a particular promotion account, and wherein selecting candidate items of promoted content further comprises: receiving, from the particular promotion account, one or more keywords; generating a keyword map that maps user accounts of the platform one or more respective keywords that describe the user account, wherein generating the keyword map comprises generating mappings from each of the mapped user accounts to the one or more keywords, using: (i) connection graph data associated with the user account, (ii) user-specified information provided by the user account, or (iii) messages authored by the user account; and wherein selecting the candidate items of promoted content further comprises: determining that the followee account is mapped to one or more keywords, and in response, selecting as candidate items of promoted content, one or more items of promoted content comprising the one or more keywords mapped to the followee account.
9. The system of claim 1, wherein the operations further comprise maintaining a candidate map that associates promotion accounts with sufficiently similar connection graphs; and wherein determining that the followee account of the requesting user account is connection graph similar to the one or more promotion accounts comprises determining that the followee account is mapped to the one or more promotion accounts in the candidate map.
10. A method, comprising: receiving a request for a stream of messages to be provided to a requesting user account of a plurality of user accounts of a real-time messaging platform, wherein the real-time messaging platform hosts a plurality of accounts that includes the plurality of user accounts and a plurality of promotion accounts, wherein each of the plurality of promotion accounts is a respective account of the real-time messaging platform that has provided one or more items of promoted content and promoted messages for one or more streams of messages, wherein the real-time messaging platform provides streams of messages that include the one or more streams of messages, wherein messages in the streams of messages include messages authored by user accounts of the plurality of user accounts and messages authored by promotion accounts of the plurality of promotion accounts, wherein each account is associated with respective connection graph data defining one or more relationships on a respective connection graph between the account and respective other accounts in the plurality of accounts, and wherein a relationship on a connection graph between a pair of accounts represents that a first, follower account of the pair of accounts is subscribed to receive messages provided to the real-time messaging platform by a second, followee account of the pair of accounts; selecting candidate items of promoted content to be provided to the requesting user account, wherein each item of promoted content is a promoted message authored by a respective promotion account, the selecting comprising: determining that a followee account of the requesting user account is connection graph similar to one or more promotion accounts, wherein two accounts are connection graph similar when a measure of similarity between their respective connection graphs satisfies a similarity threshold, selecting, as candidate items of promoted content, one or more items of promoted content provided by the one or more identified promotion accounts that are connection graph similar to the followee account of the requesting user account; and providing, to the requesting user account, in the requested stream of messages, one or more of the candidate items of promoted content.
11. The method of claim 10, wherein selecting the one or more items of promoted content comprises: excluding from the candidate items of promoted content, items of promoted content that have a respective measure of fatigue that indicates that the item has been provided to the requesting user account a number of times meeting a predetermined frequency threshold within a predetermined period of time.
12. The method of claim 10, wherein at least one item in the candidate items of promoted content is a recommendation to follow another user account or a trend, wherein the trend is represented as a list of textual items.
13. The method of claim 10, wherein, for each account, the connection graph data for the account further includes engagement metrics that measure engagements by the account with messages in the streams of messages; and wherein the measure of similarity between two connection graphs is based on a similarity between respective engagement metrics included in the graph data of the respective connection graphs.
14. The method of claim 10, wherein selecting the candidate items of promoted content further comprises: excluding items of promoted content from promotion accounts that have not designated the requesting user account as a targeted account; and selecting candidate items of promoted content from items after the excluding, including selecting items of promoted content from one or more promotion accounts that have targeted the requesting user account.
15. The method of claim 14, further comprising: for each targeted user account of the one or more identified promotion accounts, identifying respective related user accounts that are related to the targeted user account in a respective connection graph for the targeted user account and that are each connection graph similar to a respective identified promotion account targeting the user account; and providing, to the identified related user accounts, the one or more selected items of promoted content.
16. The method of claim 10, wherein the one or more items of promoted content provided by the one or more promotion accounts include items received from a particular promotion account, and wherein selecting candidate items of promoted content further comprises: receiving, from the particular promotion account, one or more keywords, wherein each keyword describes the particular promotion account or items of promoted content received from the particular promotion account; generating a keyword map that maps user accounts of the platform to one or more respective keywords that describe the user account, wherein generating the keyword map comprises generating mappings from each of the mapped user accounts to the one or more keywords, using: (i) connection graph data associated with the user account, (ii) user-specified information provided by the user account, or (iii) messages authored by the user account; and wherein selecting the candidate items of promoted content further comprises: determining that the followee account is mapped to one or more keyword, and in response, selecting as candidate items of promoted content, one or more items of promoted content comprising the one or more keywords mapped to the followee account.
17. The method of claim 10, wherein the measure of similarity between two connection graphs is a measure of (i) a number of accounts represented in the two connection graphs following same respective accounts, (ii) a number of accounts represented in the two connection graphs engaging with same respective messages posted to the platform, or both.
18. One or more non-transitory computer-readable storage media encoded with instructions that, when executed by one or more computers, cause the one or more computers to perform operations comprising: receiving a request for a stream of messages to be provided to a requesting user account of a plurality of user accounts of a real-time messaging platform, wherein the real-time messaging platform hosts a plurality of accounts that includes the plurality of user accounts and a plurality of promotion accounts, wherein each of the plurality of promotion accounts is a respective account of the real-time messaging platform that has provided one or more items of promoted content and promoted messages for one or more streams of messages, wherein the real-time messaging platform provides streams of messages that include the one or more streams of messages, wherein messages in the streams of messages include messages authored by user accounts of the plurality of user accounts and messages authored by promotion accounts of the plurality of promotion accounts, wherein each account is associated with respective connection graph data defining one or more relationships on a respective connection graph between the account and respective other accounts in the plurality of accounts, and wherein a relationship on a connection graph between a pair of accounts represents that a first, follower account of the pair of accounts is subscribed to receive messages provided to the real-time messaging platform by a second, followee account of the pair of accounts; selecting candidate items of promoted content, including to be provided to the requesting user account, wherein each item of promoted content is a promoted message authored by a respective promotion account, the selecting comprising: determining that a followee account of the requesting user account is connection graph similar to one or more promotion accounts, wherein two accounts are connection graph similar when a measure of similarity between their respective connection graphs satisfies a similarity threshold, selecting, as candidate items of promoted content, one or more items of promoted content provided by the one or more identified promotion accounts that are connection graph similar to the followee account of the requesting user account; and providing, to the requesting user account, in the requested stream of messages, one or more of the candidate items of promoted content.
19. The computer-readable media of claim 18, wherein selecting candidate items of promoted content further comprises: wherein selecting the candidate items of promoted content further comprises: excluding items of promoted content from promotion accounts that have not designated the requesting user account as a targeted account; and selecting candidate items of promoted content from items after the excluding, including selecting items of promoted content from one or more promotion accounts that have targeted the requesting user account.
20. The computer-readable media of claim 19, wherein the operations further comprise: for each targeted user account of the one or more identified promotion accounts, identifying respective related user accounts that are related to the targeted user account in a respective connection graph for the targeted user account and that are each connection graph similar to a respective identified promotion account targeting the user account; and providing, to the identified related user accounts, the one or more selected items of promoted content.
21. The computer-readable media of claim 18, wherein the one or more items of promoted content provided by the one or more promotion accounts include items received from a particular promotion account, and wherein selecting candidate items of promoted content further comprises: receiving, from the particular promotion account, one or more keywords, wherein each keyword describes the particular promotion account or items of promoted content received from the particular promotion account; generating a keyword map that maps user accounts of the platform to one or more respective keywords that describe the user account, wherein generating the keyword map comprises generating mappings from each of the mapped user accounts to the one or more keywords, using: (i) connection graph data associated with the user account, (ii) user-specified information provided by the user account, or (iii) messages authored by the user account; and wherein selecting the candidate items of promoted content further comprises: determining that the followee account is mapped to one or more keyword, and in response, selecting as candidate items of promoted content, one or more items of promoted content comprising the one or more keywords mapped to the followee account.
22. The computer-readable media of claim 18, wherein selecting the one or more items of promoted content comprises: excluding from the candidate items of promoted content, items of promoted content that have a respective measure of fatigue that indicates that the item has been provided to the requesting user account a number of times meeting a predetermined frequency threshold within a predetermined period of time.
23. The computer-readable media of claim 18, wherein at least one item in the candidate items of promoted content is a recommendation to follow another user account or a trend, wherein the trend is represented as a list of textual items.
24. The computer-readable media of claim 18, wherein, for each account, the connection graph data for the account further includes engagement metrics that measure engagements by the account with messages in the streams of messages; and wherein the measure of similarity between two connection graphs is based on a similarity between respective engagement metrics included in the graph data of the respective connection graphs.
25. The system of claim 1, wherein the measure of similarity between two connection graphs is a measure of (i) a number of accounts represented in the two connection graphs following same respective accounts, (ii) a number of accounts represented in the two connection graphs engaging with same respective messages posted to the platform, or both.
26. The computer-readable media of claim 18, wherein the measure of similarity between two connection graphs is a measure of (i) a number of accounts represented in the two connection graphs following same respective accounts, (ii) a number of accounts represented in the two connection graphs engaging with same respective messages posted to the platform, or both.
27. The computer-readable media of claim 18, wherein the operations further comprise maintaining a candidate map that associates promotion accounts with sufficiently similar connection graphs; and wherein determining that the followee account of the requesting user account is connection graph similar to the one or more promotion accounts comprises determining that the followee account is mapped to the one or more promotion accounts in the candidate map.
</claims>
</document>
