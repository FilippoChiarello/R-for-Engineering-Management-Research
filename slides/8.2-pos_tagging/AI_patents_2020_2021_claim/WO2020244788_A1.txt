<document>

<filing_date>
2019-08-27
</filing_date>

<publication_date>
2020-12-10
</publication_date>

<priority_date>
2019-06-04
</priority_date>

<ipc_classes>
A61N5/10,G06F21/62,G06N3/08
</ipc_classes>

<assignee>
ELEKTA AB (PUBL)
</assignee>

<inventors>
SJÃ–LUND, JENS OLOF
FAY, Dominik
</inventors>

<docdb_family_id>
67809456
</docdb_family_id>

<title>
RADIOTHERAPY PLAN PARAMETERS WITH PRIVACY GUARANTEES
</title>

<abstract>
Techniques for producing segmentation with privacy are provided. The techniques include receiving a medical image; processing the medical image with a student machine learning model to estimate radiotherapy plan parameters, the student machine learning model being trained to establish a relationship between a plurality of public training medical images and corresponding radiotherapy plan parameters, the radiotherapy plan parameters of the plurality of public training medical images being generated by aggregating a plurality of radiotherapy plan parameter estimates produced by: processing the plurality of public training medical images with a plurality of teacher machine learning models to generate sets of radiotherapy plan parameter estimates; and reducing respective dimensions of the sets of radiotherapy plan parameter estimates or medical images, the radiotherapy plan parameters of the plurality of public training medical images being perturbed in accordance with privacy criteria; and generating a radiotherapy treatment plan based on the estimated radiotherapy plan parameters.
</abstract>

<claims>
1. A method for performing privacy based radiotherapy treatment planning, the method comprising:
receiving, by processor circuitry, a medical image of a patient;
processing, by the processor circuitry, the medical image with a student machine learning model to estimate one or more radiotherapy plan parameters, wherein the student machine learning model is trained to establish a relationship between a plurality of public training medical images and corresponding radiotherapy plan parameters of the public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are generated by aggregating a plurality of radiotherapy plan parameter estimates which have been produced by:
processing the plurality of public training medical images with a plurality of teacher machine learning models to generate sets of radiotherapy plan parameter estimates; and
reducing respective dimensions of the sets of radiotherapy plan parameter estimates or the plurality of public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are perturbed in accordance with a privacy criteria; and
generating, by the processor circuitry, a radiotherapy treatment plan for the patient based on the estimated one or more radiotherapy plan parameters of the medical image of the patient.
2. The method of claim 1, wherein the student machine learning model and the plurality of teacher machine learning models are implemented by respective neural networks or deep learning networks.
3. The method of any of claims 1-2 further comprising training the teacher machine learning models based on private medical information comprising private medical images and private radiotherapy plan parameters of the private medical images, wherein the student machine learning model is trained on data that excludes the private medical information.
4. The method of claim 3, wherein training the teacher machine learning models comprises:
generating disjoint datasets from the private medical information; and training the teacher machine learning models based on respective ones of the disjoint datasets.
5. The method of any of claims 1-4 further comprising:
generating a first of the plurality of radiotherapy plan parameter estimates by processing the plurality of public training medical images with a first of the plurality of trained teacher machine learning models;
generating a second of the plurality of radiotherapy plan parameter estimates by processing the plurality of public training medical images with a second of the plurality of trained teacher machine learning models;
reducing a dimension of each of the first and second of the plurality of radiotherapy plan parameter estimates to produce reduced dimension first and second radiotherapy plan parameter estimates; and
aggregating the reduced dimension first and second radiotherapy plan parameter estimates.
6. The method of claim 5, wherein the first of the plurality of radiotherapy plan parameter estimates includes a first number of entries, and wherein the reduced dimension first radiotherapy plan parameter estimate includes a second number of entries that is smaller than the first number of entries.
7. The method of any of claims 1-6, wherein aggregating the reduced dimension first and second radiotherapy plan parameter estimates comprises computing a mean, a trimmed mean, a median, or a generalized f-mean of the reduced dimension first and second radiotherapy plan parameter estimates.
8. The method of any of claims 1-7, wherein aggregating the reduced dimension first and second radiotherapy plan parameter estimates comprises estimating an aggregation of the reduced dimension first and second
radiotherapy plan parameter estimates by processing the reduced dimension first and second radiotherapy plan parameter estimates with an aggregation machine learning model, wherein the aggregation machine learning model is trained to establish a relationship between a plurality of training individual radiotherapy plan parameter estimates and aggregated results of the plurality of training individual radiotherapy plan parameter estimates and to minimize an amount of perturbation needed to satisfy the privacy criteria.
9. The method of any of claims 1-8 further comprising perturbing at least one of the reduced dimension first and second radiotherapy plan parameter estimates or the aggregated reduced dimension first and second radiotherapy plan parameter estimates by adding noise based on a selected privacy level to the at least one of the reduced dimension first and second radiotherapy plan parameter estimates or the aggregated reduced dimension first and second radiotherapy plan parameter estimates.
10. The method of claim 9, wherein adding noise comprises adding samples from a Gaussian, Beta, Dirichlet, or Laplace distribution to at least one of the reduced dimension first and second radiotherapy plan parameter estimates or the aggregated reduced dimension first and second radiotherapy plan parameter estimates.
11. The method of any of claims 1-10 further comprising increasing a dimension of the perturbed aggregated reduced dimension first and second radiotherapy plan parameter estimates to output the plurality of radiotherapy plan parameters.
12. The method of claim 11, wherein increasing the dimension comprises processing the perturbed aggregated reduced dimension first and second radiotherapy plan parameter estimates with a variational autoencoder, autoencoder, principal component analysis, or homomorphic compression.
13. The method of any of claims 1-12, wherein reducing the dimension of each of the first and second of the plurality of radiotherapy plan parameter estimates comprises processing each of the first and second of the plurality of radiotherapy plan parameter estimates with a variational autoencoder, autoencoder, principal component analysis, or homomorphic compression.
14. The method of claim 13, wherein the variational autoencoder, the autoencoder, or the principal component analysis is trained based on a public set of segmentation maps.
15. The method of any of claims 1-14, wherein the privacy criteria comprise at least one of differential privacy, Renyi differential privacy, concentrated differential privacy, mutual information, conditional entropy,
Fisher information, generative adversarial privacy, or k-anonymity.
16. The method of any of claims 1-15, wherein the medical image comprises a magnetic resonance (MR) image or computed tomography (CT), and wherein the one or more radiotherapy plan parameters include at least one of labels for the medical image, a three-dimensional volume corresponding to the medical image, a dose distribution, a synthetic CT image, the medical image, a processed version of the medical image, or radiotherapy device parameters.
17. A non-transitory computer-readable medium comprising non-transitory computer-readable instructions, the computer-readable instructions comprising instructions for performing operations comprising:
receiving a medical image of a patient;
processing the medical image with a student machine learning model to estimate one or more radiotherapy plan parameters, wherein the student machine learning model is trained to establish a relationship between a plurality of public training medical images and corresponding radiotherapy plan parameters of the public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are generated by aggregating a plurality of radiotherapy plan parameter estimates which have been produced by:
processing the plurality of public training medical images with a plurality of teacher machine learning models to generate sets of radiotherapy plan parameter estimates; and
reducing respective dimensions of the sets of radiotherapy plan parameter estimates or the plurality of public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are perturbed in accordance with privacy criteria; and
generating a radiotherapy treatment plan for the patient based on the estimated one or more radiotherapy plan parameters of the medical image of the patient.
18. The non-transitory computer readable medium of claim 17, wherein the student machine learning model and the plurality of teacher machine learning models are implemented by respective neural networks or deep learning networks.
19. The non-transitory computer readable medium of any of claims 17-18, wherein the operations further comprise training the teacher machine learning models based on private medical information comprising private medical images and private radiotherapy plan parameters of the private medical images, wherein the student machine learning model is trained on data that excludes the private medical information.
20. A system comprising:
a memory for storing instructions; and
one or more processors for executing the instructions stored in the memory for performing operations comprising:
receiving a medical image of a patient;
processing the medical image with a student machine learning model to estimate one or more radiotherapy plan parameters, wherein the student machine learning model is trained to establish a relationship between a plurality of public training medical images and corresponding radiotherapy plan parameters of the public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are generated by aggregating a plurality of radiotherapy plan parameter estimates which have been produced by:
processing the plurality of public training medical images with a plurality of teacher machine learning models to generate sets of radiotherapy plan parameter estimates; and
reducing respective dimensions of the sets of radiotherapy plan parameter estimates or the plurality of public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are perturbed in accordance with privacy criteria; and generating a radiotherapy treatment plan for the patient based on the estimated one or more radiotherapy plan parameters of the medical image of the patient.
21. The system of claim 20, wherein the student machine learning model and the plurality of teacher machine learning models are implemented by respective neural networks or deep learning networks.
22. The system of any of claims 20-21, wherein the operations further comprise training the teacher machine learning models based on private medical information comprising private medical images and private radiotherapy plan parameters of the private medical images, wherein the student machine learning model is trained on data that excludes the private medical information.
23. A method for training a machine learning model to perform privacy based radiotherapy treatment planning, the method comprising:
receiving, by processor circuitry, a public training medical image of a patient; and
training, by the processor circuitry, a student machine learning model to estimate one or more radiotherapy plan parameters of the public training medical image by establishing a relationship between a plurality of public training medical images and corresponding radiotherapy plan parameters of the plurality of public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are generated by aggregating a plurality of radiotherapy plan parameter estimates which have been produced by:
processing the public training medical images with a plurality of teacher machine learning models to generate sets of radiotherapy plan parameter estimates; and
reducing respective dimensions of the sets of radiotherapy plan parameter estimates or the plurality of public training medical images, wherein the radiotherapy plan parameters of the plurality of public training medical images are perturbed in accordance with privacy criteria.
24. The method of claim 23 further comprising training the teacher machine learning models based on private medical information comprising private medical images and private radiotherapy plan parameters of the private medical images, wherein the student machine learning model is trained on data that excludes the private medical information.
25. The method of any of claims 23-24, wherein training the teacher machine learning models comprises:
generating disjoint datasets from the private medical information; and training the teacher machine learning models based on respective ones of the disjoint datasets.
26. The method of any of claims 23-25 further comprising:
generating a first of the plurality of radiotherapy plan parameter estimates by processing the plurality of public training medical images with a first of the plurality of trained teacher machine learning models;
generating a second of the plurality of radiotherapy plan parameter estimates by processing the plurality of public training medical images with a second of the plurality of trained teacher machine learning models;
reducing a dimension of each of the first and second of the plurality of radiotherapy plan parameter estimates to produce reduced dimension first and second radiotherapy plan parameter estimates; and
aggregating the reduced dimension first and second radiotherapy plan parameter estimates.
27. The method of any of claims 23-26, wherein training the student machine learning model comprises, for each of the plurality of public training medical images: obtaining a pair of a given one of the plurality of public training medical images and a given one of the corresponding radiotherapy plan parameters;
applying the student machine learning model to the obtained public training medical image to generate an estimate of the radiotherapy plan parameters for the obtained public training medical image;
computing a deviation between the estimate of the radiotherapy plan parameters for the obtained public training medical image and the obtained radiotherapy plan parameter; and
updating one or more parameters of the student machine learning model based on the computed deviation.
</claims>
</document>
