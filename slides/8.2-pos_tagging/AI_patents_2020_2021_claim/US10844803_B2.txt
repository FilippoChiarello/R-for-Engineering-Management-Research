<document>

<filing_date>
2020-03-16
</filing_date>

<publication_date>
2020-11-24
</publication_date>

<priority_date>
2019-03-22
</priority_date>

<ipc_classes>
B60T7/12,F01N11/00,F01N3/28,F02B37/18,F02D13/02,F02D41/00,F02D41/14,F02D41/22,F02D41/24,F02M25/08,F02M26/13
</ipc_classes>

<assignee>
TOYOTA MOTOR CORPORATION
</assignee>

<inventors>
KATAYAMA, AKIHIRO
MORI, KOHEI
Hashimoto, Yosuke
Muto, Harufumi
</inventors>

<docdb_family_id>
69101075
</docdb_family_id>

<title>
Abnormality detection device for air-fuel ratio sensor, abnormality detection system for air-fuel ratio sensor, data analysis device, and control device for internal combustion engine
</title>

<abstract>
An abnormality detection device for an air-fuel ratio sensor is provided. An air-fuel ratio sensor is provided in an exhaust passage. A storage device stores mapping data specifying a mapping. The mapping outputs an abnormality determination variable using first time series data and second time series data as an input. The first time series data is time series data of an excess amount variable in a first predetermined period. The excess amount variable is a variable corresponding to an excess amount of fuel actually discharged to the exhaust passage in relation to an amount of fuel reacting without excess or deficiency with oxygen contained in a fluid discharged to the exhaust passage. The second time series data is time series data of an air-fuel ratio detection variable in a second predetermined period.
</abstract>

<claims>
1. An abnormality detection device for an air-fuel ratio sensor that is provided in an exhaust passage of an internal combustion engine, the abnormality detection device, comprising: a storage device; and an execution device, wherein the storage device stores mapping data specifying a mapping, the mapping outputs an abnormality determination variable using first time series data and second time series data as an input, the first time series data is time series data of an excess amount variable in a first predetermined period, the excess amount variable is a variable corresponding to an excess amount of fuel actually discharged to the exhaust passage in relation to an amount of fuel reacting without excess or deficiency with oxygen contained in a fluid discharged to the exhaust passage, the second time series data is time series data of an air-fuel ratio detection variable in a second predetermined period, the air-fuel ratio detection variable is a variable related to a detection value of the air-fuel ratio sensor, the abnormality determination variable is a variable related to presence and absence of an abnormality that decreases responsiveness of the air-fuel ratio sensor, the execution device is configured to execute an acquisition process, a calculation process, and a handling process, in the acquisition process, the execution device acquires the first time series data and the second time series data, in the calculation process, the execution device inputs the first time series data and the second time series data, which are acquired by the acquisition process, to the mapping to calculate a value of the abnormality determination variable, and in the handling process, when the calculation result of the calculation process indicates the abnormality, the execution device operates predetermined hardware to handle the abnormality.
2. The abnormality detection device according to claim 1, wherein the air-fuel ratio detection variable includes a temporally-varying variable, and the temporally-varying variable is a variable related to temporal variation of the detection value in a sampling period for a value of each air-fuel ratio detection variable configuring the second time series data.
3. The abnormality detection device according to claim 1, wherein the air-fuel ratio detection variable includes a difference variable, and the difference variable is a variable related to a difference between a local maximum of the detection value and a local minimum of the detection value in a sampling period for a value of each air-fuel ratio detection variable configuring the second time series data.
4. The abnormality detection device according to claim 1, wherein the excess amount variable is determined based on an actual amount of fuel injected by a fuel injection valve of the internal combustion engine.
5. The abnormality detection device according to claim 1, wherein the internal combustion engine includes: a canister configured to collect fuel vapor from a fuel tank, the fuel tank storing fuel that is to be injected from a fuel injection valve; a purge passage configured to connect the canister to an intake passage of the internal combustion engine; and an adjustment device configured to adjust a flow rate of the fuel vapor, the fuel vapor flowing into the intake passage from the canister through the purge passage, and the excess amount variable includes a purge variable that is a variable related to the flow rate of the fuel vapor.
6. The abnormality detection device according to claim 1, wherein the internal combustion engine includes a forced induction device upstream of the air-fuel ratio sensor in the exhaust passage, the exhaust passage includes a bypass passage that bypasses the forced induction device, the bypass passage has a flow path cross-sectional area that is adjusted by a wastegate valve, the input to the mapping includes a flow path variable that is a variable related to the flow path cross-sectional area of the bypass passage, the acquisition process includes a process that acquires the flow path variable, and the calculation process includes a process that calculates the value of the abnormality determination variable based on an output of the mapping in which the flow path variable is further included in the input to the mapping.
7. The abnormality detection device according to claim 1, wherein the internal combustion engine includes: an exhaust gas recirculation (EGR) passage configured to connect the exhaust passage to an intake passage; and an EGR valve configured to adjust a flow rate of a fluid flowing from the exhaust passage into the intake passage through the EGR passage, the input to the mapping includes an EGR variable that is a variable related to the flow rate of the fluid flowing into the intake passage from the exhaust passage, the acquisition process includes a process that acquires the EGR variable, and the calculation process includes a process that calculates the value of the abnormality determination variable based on an output of the mapping in which the EGR variable is further included in the input to the mapping.
8. The abnormality detection device according to claim 1, wherein the internal combustion engine includes a valve characteristic variable device configured to change a valve characteristic of an intake valve, the input to the mapping includes a valve characteristic variable that is a variable related to the valve characteristic, the acquisition process includes a process that acquires the valve characteristic variable, and the calculation process includes a process that calculates the value of the abnormality determination variable based on an output of the mapping in which the valve characteristic variable is further included in the input to the mapping.
9. The abnormality detection device according to claim 1, wherein the calculation process includes a process that calculates the value of the abnormality determination variable based on the first time series data and the second time series data acquired by the acquisition process on condition that a flow rate of the fluid discharged to the exhaust passage is within a predetermined range.
10. The abnormality detection device according to claim 1, wherein the exhaust passage is provided with a catalyst, the air-fuel ratio sensor is an upstream air-fuel ratio sensor disposed at an upstream side of the catalyst in the exhaust passage, a downstream air-fuel ratio sensor is provided at a downstream side of the catalyst in the exhaust passage, the execution device executes a main feedback process and a sub-feedback process, the main feedback process feedback-controls the detection value of the upstream air-fuel ratio sensor to a target value, when the detection value of the downstream air-fuel ratio sensor is richer than a stoichiometric air-fuel ratio by a predetermined amount or more, the sub-feedback process causes the target value to be leaner than the stoichiometric air-fuel ratio, when the detection value of the downstream air-fuel ratio sensor is leaner than the stoichiometric air-fuel ratio by a predetermined amount or more, the sub-feedback process causes the target value to be richer than the stoichiometric air-fuel ratio, and in synchronization with a point in time when the target value is switched from rich to lean and a point in time when the target value is switched from lean to rich, the acquisition process sets the first predetermined period and sets the second predetermined period after the first predetermined period.
11. The abnormality detection device according to claim 1, wherein the storage device stores multiple types of mapping data as the mapping data, the calculation process includes a selection process, and the selection process selects one of the multiple types of mapping data as mapping data that is used to calculate the value of the abnormality determination variable.
12. An abnormality detection system for an air-fuel ratio sensor, the abnormality detection system, comprising: the execution device and the storage device according to claim 1, wherein the execution device includes a first execution device and a second execution device, the first execution device is mounted on a vehicle and configured to execute the acquisition process, a vehicle-side transmission process, a vehicle-side reception process, and the handling process, in the vehicle-side transmission process, the first execution device transmits data acquired by the acquisition process to outside the vehicle, in the vehicle-side reception process, the first execution device receives a signal based on the value of the abnormality determination variable calculated by the calculation process, the second execution device is disposed outside the vehicle and configured to execute an external-side reception process, the calculation process, and an external-side transmission process, in the external-side reception process, the second execution device receives the data transmitted by the vehicle-side transmission process, and in the external-side transmission process, the second execution device transmits the signal based on the value of the abnormality determination variable calculated by the calculation process to the vehicle.
13. A data analysis device, comprising: the second execution device and the storage device according to claim 12.
14. A control device for an internal combustion engine, the control device, comprising: the first execution device according to claim 12.
15. A method for detecting an abnormality of an air-fuel ratio sensor that is provided in an exhaust passage of an internal combustion engine, the method comprising, as various processes executed by a computer: storing mapping data specifying a mapping, the mapping outputting an abnormality determination variable using first time series data and second time series data as an input; acquiring the first time series data, the first time series data being time series data of an excess amount variable in a first predetermined period, the excess amount variable being a variable corresponding to an excess amount of a fuel actually discharged to the exhaust passage in relation to an amount of fuel reacting without excess or deficiency with oxygen contained in a fluid discharged to the exhaust passage; acquiring the second time series data, the second time series data being time series data of an air-fuel ratio detection variable in a second predetermined period, and the air-fuel ratio detection variable being a variable related to a detection value of the air-fuel ratio sensor; calculating a value of the abnormality determination variable by inputting the acquired first time series data and the acquired second time series data to the mapping, the abnormality determination variable being a variable related to presence and absence of an abnormality that decreases responsiveness of the air-fuel ratio sensor; and operating predetermined hardware to handle the abnormality when the abnormality determination variable indicates the abnormality.
</claims>
</document>
