<document>

<filing_date>
2017-06-26
</filing_date>

<publication_date>
2021-01-12
</publication_date>

<priority_date>
2017-06-26
</priority_date>

<ipc_classes>
G06F12/00,G06F13/38,G06F16/2457,G06F16/335,G06F17/30,G06F3/06
</ipc_classes>

<assignee>
WESTERN DIGITAL TECHNOLOGIES
</assignee>

<inventors>
SHARON, ERAN
HAHN JUDAH GAMLIEL
NAVON, ARIEL
BAZARSKY, ALEX
</inventors>

<docdb_family_id>
64692547
</docdb_family_id>

<title>
Adaptive system for optimization of non-volatile storage operational parameters
</title>

<abstract>
A system and method for optimization of non-volatile storage operational parameters is provided. The method may utilize a crowdsourcing server to gather performance data for multiple storage devices connected to respective remotely located host systems. The performance data may be transmitted at regular intervals or at predefined events and the crowdsourcing server may aggregate and determine improved operating parameters for each different type of storage device based on the data gathered for multiple instances of that type of storage device. The optimized operating parameters may be selected from pre-stored and pre-qualified operating parameter sets on the respective storage devices that the crowdsourcing server is aware of. The system includes a non-volatile memory and a controller that is configured to log performance data and transmit at least a portion of that logged data to the crowdsourcing server. The controller may retrieve pre-stored operating parameters based on a crowdsourcing server recalibration command.
</abstract>

<claims>
We claim:
1. A method for adjusting performance of a solid state drive, the method comprising: a controller of the solid state drive logging a predetermined set of performance measurements of non-volatile memories of the solid state drive, wherein the solid state drive comprises the controller; the controller automatically transmitting to a non-volatile memory optimization server, via a host of the solid state drive, data logged for the predetermined set of performance measurements; detecting a self-calibration trigger; and in response to detecting the self-calibration trigger: the solid state drive transmitting, via the host, a calibration update request to the non-volatile memory optimization server, wherein the calibration update request causes the non-volatile memory optimization server to: identify a non-volatile memory operating parameter from a first plurality of predetermined non-volatile memory operating parameters previously stored in the non-volatile memory optimization server, based on an assessment by the non-volatile memory optimization server of the data logged for the predetermined set of performance measurements and on crowdsourced information received from other solid state drives by the non-volatile memory optimization server, wherein the crowdsourced information is data of performance measurements of non-volatile memories of the other solid state drives; and transmit a calibration update command to the solid state drive without transmitting the identified non-volatile memory operating parameter of the first plurality of predetermined non-volatile memory operating parameters; the solid state drive receiving, in response to the calibration update request, the calibration update command from the non-volatile memory optimization server, the calibration update command comprising a non-volatile memory operating parameter identifier identified by the non-volatile memory optimization server, wherein the non-volatile memory operating parameter identifier is associated with the non-volatile memory operating parameter; and the solid state drive retrieving, using the non-volatile memory operating parameter identifier, one non-volatile memory operating parameter identified by the non-volatile memory operating parameter identifier, from a second plurality of predetermined non-volatile memory operating parameters previously stored in the solid state drive, wherein the non-volatile memory operating parameter identifier is based on the data logged for the predetermined set of performance measurements of non-volatile memories of the solid state drive and the data of performance measurements of non-volatile memories of the other solid state drives, wherein the solid state drive, the other solid state drives, the host, and the non-volatile memory optimization server are separate and distinct from one another, wherein the non-volatile memory optimization server is outside the solid state drive, wherein the first and second pluralities of predetermined non-volatile memory operating parameters are for non-volatile memories and comprise non-volatile memory read thresholds, a sequence of steps for error recovery, and error correction code parameters.
2. The method of claim 1, wherein: each of the second plurality of predetermined non-volatile memory operating parameters comprises a respective set of memory operation settings; and retrieving the one non-volatile memory operating parameter previously stored in the solid state drive comprises retrieving the respective set of memory operation settings, wherein the controller automatically transmitting the data logged comprises automatically transmitting at predetermined time intervals at least a portion of the data logged.
3. The method of claim 1, wherein logging the predetermined set of performance measurements comprises measuring at least one of: program/erase cycles, peak bit error rate, uncorrectable error correction code (UECC) instances, grown bad block number, power consumption, read or write latency, or leakage current for the solid state drive, and wherein the data of performance measurements of non-volatile memories of the other solid state drives comprises one or more of: program/erase cycles, peak bit error rate, uncorrectable error correction code (UECC) instances, grown bad block number, power consumption, read or write latency, or leakage current for the other solid state drives.
4. The method of claim 1, wherein detecting the self-calibration trigger comprises identifying at least one performance measurement that has reached a predetermined threshold.
5. The method of claim 1, further comprising the controller recalibrating, during an idle time at the solid state drive, at least one memory operation setting of the solid state drive with the one non-volatile memory operating parameter retrieved from the solid state drive, wherein the controller recalibrates the at least one memory operation setting as part of a firmware update process.
6. The method of claim 5, wherein recalibrating the at least one memory operation setting comprises changing a read threshold level for the solid state drive.
7. The method of claim 5, wherein recalibrating the at least one memory operation setting comprises changing an error correction code (ECC) decoding mode for the solid state drive.
8. The method of claim 1, wherein the second plurality of predetermined non-volatile memory operating parameters comprises operating parameter sets, wherein the solid state drive comprises a predetermined order of implementation of the operating parameter sets, wherein the calibration update command from the non-volatile memory optimization server causes at least one of: accelerating or decelerating when to implement the predetermined order; selecting one or more of the operating parameter sets out of order; or skipping implementation of one or more of the operating parameter sets.
9. The method of claim 1, wherein in response to detecting the self-calibration trigger: the calibration update request causes the non-volatile memory optimization server to change a category of the solid state drive from a first performance stage to a second performance stage based on the data of performance measurements of non-volatile memories of the other solid state drives, wherein the solid state drive and the other solid state drives are of a same type of storage device.
10. The method of claim 1, wherein the one non-volatile memory operating parameter is one of pre-stored and pre-qualified operating parameter sets previously stored in the solid state drive, wherein a pre-qualified operating parameter is a parameter that has been pre-determined to work on the solid state drive prior to logging the predetermined set of performance measurements of non-volatile memories of the solid state drive.
11. The method of claim 1, wherein the controller assigns a same time tag to a plurality of blocks in non-volatile memories of the solid state drive, wherein the data transmitted to the non-volatile memory optimization server has been logged from only a portion of the plurality of blocks having the same time tag, and wherein the remaining portion of the plurality of blocks having the same time tag is prevented from providing data of performance measurements to be transmitted to the non-volatile memory optimization server.
12. A non-volatile memory device comprising: non-volatile memory having a plurality of non-volatile memory operating parameter sets stored therein; and a controller configured to be in communication with the non-volatile memory, the controller configured to: perform memory operations in accordance with a first of the plurality of non-volatile memory operating parameter sets; periodically transmit logged internal memory performance data of the non-volatile memory device, via a host, to a non-volatile memory optimization server; monitor the logged internal memory performance data for a self-calibration trigger event; and in response to detection of the self-calibration trigger event: transmit a calibration update request to the non-volatile memory optimization server; receive, in response to the calibration update request, a calibration update command from the non-volatile memory optimization server, without receiving non-volatile memory operating parameters stored in the non-volatile memory optimization server, the calibration update command comprising a non-volatile memory operating parameter set identifier, wherein the non-volatile memory operating parameter set identifier is based on the internal memory performance data of the non-volatile memory device and internal memory performance data of other non-volatile memory devices; and update memory operating parameters with a new non-volatile memory operating parameter set associated with the non-volatile memory operating parameter set identifier, wherein the non-volatile memory device, the other non-volatile memory devices, the host, and the non-volatile memory optimization server are separate and distinct from one another, and wherein the non-volatile memory optimization server is outside the non-volatile memory device.
13. The non-volatile memory device of claim 12, wherein the new non-volatile memory operating parameter set comprises an adjusted read threshold voltage.
14. The non-volatile memory device of claim 12, wherein: the non-volatile memory further comprises a plurality of pre-stored sets of non-volatile memory device operating parameters; and to update memory operating parameters, the controller is configured to retrieve, from the non-volatile memory, an operating parameter set identified by the non-volatile memory operating parameter set identifier.
15. The non-volatile memory device of claim 12, wherein the controller is configured to periodically transmit logged internal memory performance data via the host using an error transmission protocol.
16. The non-volatile memory device of claim 12, wherein the logged internal memory performance data for the non-volatile memory device comprises at least one of program/erase cycles, bit error rate, uncorrectable error correction code (UECC) instances, grown bad block number, power consumption, read or write latency, or leakage current, and wherein the internal memory performance data of the other non-volatile memory devices comprises one or more of program/erase cycles, bit error rate, uncorrectable error correction code (UECC) instances, grown bad block number, power consumption, read or write latency, or leakage current.
17. The non-volatile memory device of claim 12, wherein the controller is configured to receive the calibration update command having the non-volatile memory operating parameter set identifier via a firmware update protocol.
18. The non-volatile memory device of claim 12, wherein the self-calibration trigger event comprises a read or write latency exceeding a predetermined threshold.
19. The non-volatile memory device of claim 12, wherein the new non-volatile memory operating parameter set comprises a new read threshold level for the non-volatile memory device.
20. A method of updating non-volatile memory operating parameters of a first storage device based on internal memory performance characteristics of a plurality of storage devices, the method comprising: in a crowdsourcing server remotely located from the plurality of storage devices: receiving periodic internal memory performance reports from the plurality of storage devices; monitoring for an abnormal data pattern in the periodic internal memory performance reports from the plurality of storage devices; in response to identifying the abnormal data pattern in one of the plurality of storage devices, identifying a preferred one of a predetermined number of non-volatile memory operating parameter sets associated with the one of the plurality of storage devices based on internal memory performance data from other of the plurality of storage devices of a same type; and transmitting a non-volatile memory operating parameter set identifier directed to the one of the plurality of storage devices instructing the one of the plurality of storage devices to change its non-volatile memory operating parameters, wherein the non-volatile memory operating parameter set identifier is transmitted to the one of the plurality of storage devices, without transmitting non-volatile memory operating parameters that are stored in the crowdsourcing server.
21. The method of claim 20, wherein the non-volatile memory operating parameter set identifier is associated with the preferred one of the predetermined number of non-volatile memory operating parameter sets, and wherein receiving periodic internal memory performance reports comprises receiving the periodic internal memory performance reports from a host of a respective one of the plurality of storage devices.
</claims>
</document>
